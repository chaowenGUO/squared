!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e=e||self).squared=e.squared||{},e.squared.svg={}))}(this,(function(e){"use strict";const{CSS_UNIT:t,calculateStyle:i,calculateVar:s,calculateVarAsString:n,convertAngle:a,getFontSize:r,isLength:l,isPercent:o,parseUnit:c}=squared.lib.css,{getNamedItem:h}=squared.lib.dom,{clamp:f,convertRadian:u,hypotenuse:d}=squared.lib.math,{TRANSFORM:g}=squared.lib.regex,{getStyleValue:p}=squared.lib.session,{convertCamelCase:m,convertFloat:v,resolvePath:y}=squared.lib.util;function S(e,t,i,s,n){if(l(s))t[i]=c(s,r(e));else if(o(s))t[i]=parseFloat(s)/100*n}const b=(e,t)=>t?Math.min(e.width,e.height):d(e.width,e.height),k={svg:e=>"svg"===e.tagName,g:e=>"g"===e.tagName,symbol:e=>"symbol"===e.tagName,path:e=>"path"===e.tagName,shape:e=>{switch(e.tagName){case"path":case"line":case"rect":case"ellipse":case"circle":case"polyline":case"polygon":return true;default:return false}},image:e=>"image"===e.tagName,use:e=>"use"===e.tagName,line:e=>"line"===e.tagName,rect:e=>"rect"===e.tagName,circle:e=>"circle"===e.tagName,ellipse:e=>"ellipse"===e.tagName,polygon:e=>"polygon"===e.tagName,polyline:e=>"polyline"===e.tagName,clipPath:e=>"clipPath"===e.tagName,pattern:e=>"pattern"===e.tagName,linearGradient:e=>"linearGradient"===e.tagName,radialGradient:e=>"radialGradient"===e.tagName},T={applyX:(e,t,i)=>e.a*t+e.c*i+e.e,applyY:(e,t,i)=>e.b*t+e.d*i+e.f,clone:e=>({a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}),rotate(e){const t=u(e),i=Math.cos(t),s=Math.sin(t);return{a:i,b:s,c:-1*s,d:i,e:0,f:0}},skew:(e=0,t=0)=>({a:1,b:Math.tan(u(t)),c:Math.tan(u(e)),d:1,e:0,f:0}),scale:(e=1,t=1)=>({a:e,b:0,c:0,d:t,e:0,f:0}),translate:(e=0,t=0)=>({a:1,b:0,c:0,d:1,e:e,f:t})},w={create:(e,t,i=0,s=true,n=true)=>({type:e,matrix:t,angle:i,method:{x:s,y:n}}),parse(e,t){if(!t)t=e.style.getPropertyValue("transform");if(t){const i=[],s=/(\w+)\([^)]+\)/g;let n;while(n=s.exec(t)){const t=n[1],s=t.endsWith("X"),l=t.endsWith("Y");if(t.startsWith("translate")){const t=g.TRANSLATE.exec(n[0]);if(t){const n=r(e),a=c(t[2],n),o=!s&&t[3]?c(t[3],n):0,h=l?0:a,f=l?a:o;i.push(w.create(SVGTransform.SVG_TRANSFORM_TRANSLATE,T.translate(h,f),0))}}else if(t.startsWith("rotate")){const e=g.ROTATE.exec(n[0]);if(e){const t=a(e[2],e[3]);if(!isNaN(t)){const e=T.rotate(t);if(s)e.a=1,e.b=0,e.c=0;else if(l)e.b=0,e.c=0,e.d=1;i.push(w.create(SVGTransform.SVG_TRANSFORM_ROTATE,e,t,!s,!l))}}}else if(t.startsWith("scale")){const e=g.SCALE.exec(n[0]);if(e){const t=l?void 0:parseFloat(e[2]),n=l?parseFloat(e[2]):!s&&e[3]?parseFloat(e[3]):t;i.push(w.create(SVGTransform.SVG_TRANSFORM_SCALE,T.scale(t,s?void 0:n),0,!l,!s))}}else if(t.startsWith("skew")){const e=g.SKEW.exec(n[0]);if(e){const t=a(e[2],e[3],0),n=l?0:t,r=l?t:e[4]&&e[5]?a(e[4],e[5],0):0,o=T.skew(n,r);if(s)i.push(w.create(SVGTransform.SVG_TRANSFORM_SKEWX,o,n,true,false));else if(l)i.push(w.create(SVGTransform.SVG_TRANSFORM_SKEWY,o,r,false,true));else if(i.push(w.create(SVGTransform.SVG_TRANSFORM_SKEWX,Object.assign(Object.assign({},o),{b:0}),n,true,false)),0!==r)i.push(w.create(SVGTransform.SVG_TRANSFORM_SKEWY,Object.assign(Object.assign({},o),{c:0}),r,false,true))}}else if(t.startsWith("matrix")){const t=w.matrix(e,n[0]);if(t)i.push(w.create(SVGTransform.SVG_TRANSFORM_MATRIX,t))}}if(i.length>0){for(const e of i)e.fromStyle=true;return i}}},matrix(e,t){const i=g.MATRIX.exec(t||R(e,"transform"));if(i)switch(i[1]){case"matrix":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[4]),d:parseFloat(i[5]),e:parseFloat(i[6]),f:parseFloat(i[7])};case"matrix3d":return{a:parseFloat(i[2]),b:parseFloat(i[3]),c:parseFloat(i[6]),d:parseFloat(i[7]),e:parseFloat(i[14]),f:parseFloat(i[15])}}},origin(e,t){if(!t)t=R(e,"transform-origin");const i={x:0,y:0};if(t){const s=_(e);let n,a;if(s)({width:n,height:a}=s);else{const t=e.parentElement;if(t instanceof SVGGraphicsElement){const e=t.viewportElement;if(e&&(k.svg(e)||k.symbol(e)))({width:n,height:a}=e.viewBox.baseVal)}}if(!n||!a)({width:n,height:a}=e.getBoundingClientRect());const r=t.split(" ");if(1===r.length)r.push("center");switch(r[0]){case"0%":case"left":break;case"100%":case"right":i.x=n;break;case"center":r[0]="50%";default:S(e,i,"x",r[0],n);break}switch(r[1]){case"0%":case"top":break;case"100%":case"bottom":i.y=a;break;case"center":r[1]="50%";default:S(e,i,"y",r[1],a);break}}return i},rotateOrigin(e,t="transform"){const i=h(e,t),s=[];if(""!==i){const e=/rotate\((-?[\d.]+)(?:,?\s+(-?[\d.]+))?(?:,?\s+(-?[\d.]+))?\)/g;let t;while(t=e.exec(i)){const e=parseFloat(t[1]);if(0!==e)s.push({angle:e,x:v(t[2]),y:v(t[3])})}}return s},typeAsName(e){switch(e){case SVGTransform.SVG_TRANSFORM_ROTATE:return"rotate";case SVGTransform.SVG_TRANSFORM_SCALE:return"scale";case SVGTransform.SVG_TRANSFORM_SKEWX:return"skewX";case SVGTransform.SVG_TRANSFORM_SKEWY:return"skewY";case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"translate";default:return""}},typeAsValue(e){switch(e){case"rotate":case SVGTransform.SVG_TRANSFORM_ROTATE:return"0 0 0";case"scale":case SVGTransform.SVG_TRANSFORM_SCALE:return"1 1 0 0";case"skewX":case"skewY":case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:return"0";case"translate":case SVGTransform.SVG_TRANSFORM_TRANSLATE:return"0 0";default:return""}}};function A(e){const t=e.getBoundingClientRect();return t.x=t.left,t.y=t.top,t}function x(e,t,a){switch(t=m(t)){case"clipPath":case"height":case"offsetAnchor":case"offsetPath":case"transform":case"transformOrigin":case"width":return i(e,t,a,_(e));case"animationDelay":case"animationDuration":case"animationIterationCount":case"offsetDistance":case"offsetRotate":return i(e,t,a);case"fill":case"stroke":return i(e,"fontColor",a);case"fillOpacity":case"strokeOpacity":{const t=s(e,a,{boundingSize:1,unitType:32});return!isNaN(t)?f(t).toString():""}case"strokeMiterlimit":{const t=s(e,a,{supportPercent:false,unitType:32,min:1});return!isNaN(t)?t.toString():""}}const r=_(e)||(e.viewportElement||e.parentElement||e).getBoundingClientRect();switch(t){case"cx":case"x":case"x1":case"x2":{const t=s(e,a,{boundingSize:r.width});return!isNaN(t)?t.toString():""}case"cy":case"y":case"y1":case"y2":{const t=s(e,a,{boundingSize:r.height});return!isNaN(t)?t.toString():""}case"r":{const t=s(e,a,{boundingSize:b(r,true),min:0});return!isNaN(t)?t.toString():"0"}case"rx":{const t=s(e,a,{boundingSize:r.width,min:0});return!isNaN(t)?k.rect(e)?Math.min(t,r.width/2).toString():t.toString():"0"}case"ry":{const t=s(e,a,{boundingSize:r.height,min:0});return!isNaN(t)?k.rect(e)?Math.min(t,r.height/2).toString():t.toString():"0"}case"strokeDasharray":return n(e,a,{boundingSize:b(r),min:0});case"strokeDashoffset":{const t=s(e,a,{boundingSize:b(r,true),unitType:32});return!isNaN(t)?t.toString():""}case"strokeWidth":{const t=s(e,a,{boundingSize:b(r),unitType:32,min:0});return!isNaN(t)?t.toString():""}}return""}function R(e,t,i){return p(e,m(t))||function(e,t){var i;const s=e.dataset.baseValue;if(s)try{const e=JSON.parse(s);if(e)return(null===(i=e[t])||void 0===i?void 0:i.toString().trim())||""}catch(e){}return""}(e,t)||h(e,t)||(i||Array.from(e.style).includes(t))&&getComputedStyle(e).getPropertyValue(t)||""}function V(e,t,i){let s,n=e;do{if(s=R(n,t,i),""!==s&&"inherit"!==s)break;n=n.parentElement}while(n&&!(n instanceof HTMLElement));return s}function E(e,t,i){const s=h(e,"href")||h(e,"xlink:href");if("#"===s.charAt(0)){const i=s.substring(1);if(!t){let i=e.parentElement;t=i;while(null!==i)if(i.parentElement instanceof HTMLElement)break;else if(i.parentElement)t=i,i=i.parentElement}if(t){const e=t.querySelectorAll("*"),s=e.length;let n=0;while(n<s){const t=e.item(n++);if(t.id.trim()===i&&t instanceof SVGElement)return t}}const n=document.getElementById(i);if(n instanceof SVGElement)return n}else if(i&&s.indexOf("#")>0){const[t,n]=s.split("#").map((e,t)=>0===t?y(e):e),a=i[t];if(a)if(document.body.insertAdjacentHTML("beforeend",a),(e=document.body.lastElementChild)instanceof SVGGraphicsElement)return e.style.display="none",e.querySelector("#"+n);else if(e)document.body.removeChild(e)}return null}function _(e){let t=e.parentElement;while(null!==t){if(k.svg(t)||k.symbol(t)){const e=t.viewBox;if(e){const i=e.baseVal;return i&&i.width>0&&i.height>0?i:A(t)}}t=t.parentElement}}function P(e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t}function N(e){return P(e).getTotalLength()}var M=Object.freeze({__proto__:null,SVG:k,MATRIX:T,TRANSFORM:w,getDOMRect:A,calculateStyle:x,getAttribute:R,getParentAttribute:V,getTargetElement:E,getNearestViewBox:_,getRootOffset:function(e,t){let i=0,s=0,n=e.parentElement;while(n&&n!==t){if(k.svg(n)||k.use(n))i+=n.x.baseVal.value,s+=n.y.baseVal.value;n=n.parentElement}return{x:i,y:s}},createPath:P,getPathLength:N});const{isAngle:B,parseAngle:G}=squared.lib.css,{getNamedItem:C}=squared.lib.dom,{absoluteAngle:F,offsetAngleY:O,relativeAngle:L,truncate:I,truncateFraction:q,truncateString:X}=squared.lib.math,{STRING:z}=squared.lib.regex,{convertWord:D,hasBit:U,isArray:W,plainMap:Y}=squared.lib.util,$=new RegExp(z.DECIMAL,"g"),j=new Map;class SvgBuild{static drawLine(e,t,i=0,s=0,n){if(n)e=I(e,n),t=I(t,n),i=I(i,n),s=I(s,n);return`M${e},${t} L${i},${s}`}static drawRect(e,t,i=0,s=0,n){if(n)e=I(i+e,n),t=I(s+t,n),i=I(i,n),s=I(s,n);else e+=i,t+=s;return`M${i},${s} ${e},${s} ${e},${t} ${i},${t} Z`}static drawEllipse(e,t,i,s,n){if(void 0===s)s=i;let a=2*i;if(n)e=I(e-i,n),t=I(t,n),i=I(i,n),s=I(s,n),a=I(a,n);else e-=i;return`M${e},${t} a${i},${s},0,0,1,${a},0 a${i},${s},0,0,1,-${a},0`}static drawPolyline(e,t){let i="M";const s=e.length;let n=0;if(t)while(n<s){const{x:s,y:a}=e[n++];i+=` ${I(s,t)},${I(a,t)}`}else while(n<s){const{x:t,y:s}=e[n++];i+=` ${t},${s}`}return i}static drawPath(e,t){let i="";const s=e.length;let n=0;while(n<s){const t=e[n++];switch(i+=(""!==i?" ":"")+t.key,t.key.toUpperCase()){case"M":case"L":case"C":case"S":case"Q":case"T":i+=t.coordinates.join(",");break;case"H":i+=t.coordinates[0];break;case"V":i+=t.coordinates[1];break;case"A":i+=`${t.radiusX},${t.radiusY},${t.xAxisRotation},${t.largeArcFlag},${t.sweepFlag},${t.coordinates.join(",")}`;break}}return t?X(i,t):i}static drawRefit(e,t,i){let s;if(k.path(e)){if(s=C(e,"d"),null==t?void 0:t.requireRefit){const e=SvgBuild.getPathCommands(s);if(e.length>0){const n=SvgBuild.getPathPoints(e);if(n.length>0)t.refitPoints(n),s=SvgBuild.drawPath(SvgBuild.syncPathPoints(e,n),i)}}}else if(k.line(e)){const n=[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}];if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=SvgBuild.drawPolyline(n,i)}else if(k.circle(e)||k.ellipse(e)){let n,a;if(k.ellipse(e))n=e.rx.baseVal.value,a=e.ry.baseVal.value;else n=e.r.baseVal.value,a=n;const r=[{x:e.cx.baseVal.value,y:e.cy.baseVal.value,rx:n,ry:a}];if(null==t?void 0:t.requireRefit)t.refitPoints(r);const l=r[0];s=SvgBuild.drawEllipse(l.x,l.y,l.rx,l.ry,i)}else if(k.rect(e)){let n=e.x.baseVal.value,a=e.y.baseVal.value,r=e.width.baseVal.value,l=e.height.baseVal.value;if(null==t?void 0:t.requireRefit)n=t.refitX(n),a=t.refitY(a),r=t.refitSize(r),l=t.refitSize(l);s=SvgBuild.drawRect(r,l,n,a,i)}else if(k.polygon(e)||k.polyline(e)){const n=SvgBuild.clonePoints(e.points);if(null==t?void 0:t.requireRefit)t.refitPoints(n);s=k.polygon(e)?SvgBuild.drawPolygon(n,i):SvgBuild.drawPolyline(n,i)}return s||""}static transformRefit(e,t){let i,s,n,a;if(t)({transforms:i,parent:s,container:n,precision:a}=t);const r=SvgBuild.getPathCommands(e);if(r.length>0){let t=SvgBuild.getPathPoints(r);if(t.length>0){const l=W(i);if(l)t=SvgBuild.applyTransforms(i,t,s&&w.origin(s.element));if(null==n?void 0:n.requireRefit)n.refitPoints(t);e=SvgBuild.drawPath(SvgBuild.syncPathPoints(r,t,l),a)}}return e}static getOffsetPath(e,t="auto 0deg"){const i=P(e),s=Math.ceil(i.getTotalLength()),n=[];if(s){const a=[],r=[];let l,o=false,c=0,h=0,f=0,u=0,d=-1;if(B(t))c=G(t,0);else{for(const t of SvgBuild.getPathCommands(e))switch(t.key.toUpperCase()){case"M":case"L":case"H":case"V":case"Z":{const e=t.value;for(let t=0;t<e.length;++t)a.push(e[t]),r.push(false);break}case"C":case"S":case"Q":case"T":case"A":a.push(t.end),r.push(true);break}if("auto 0deg"!==t)h=G(t.split(" ").pop(),0)}while(++d<=s){const e=i.getPointAtLength(d);if(a.length>0){const t=a.findIndex(t=>{const i=t.x.toString(),s=t.y.toString();return i===e.x.toPrecision(i.length-(i.includes(".")?1:0))&&s===e.y.toPrecision(s.length-(s.includes(".")?1:0))});if(-1!==t){const i=a[t+1];if(i)if(o=r[t+1],o)l=SvgBuild.centerPoints(a[t],i),c=0;else l=void 0,c=q(F(e,i));else l=void 0;u=0,a.splice(0,t+1),r.splice(0,t+1)}}let t;if(o){if(t=l?q(L(l,e)):0,f>0&&f%360==0&&0===Math.floor(t))u=f;t+=u}else t=c;t+=h,n.push({key:d,value:e,rotate:t}),f=Math.ceil(t)}}return n}static getPathCommands(e){const t=[],i=/([A-Za-z])([^A-Za-z]+)?/g;let s,n=true;while(s=i.exec(e.trim())){let e=s[1];if(n&&"M"!==e.toUpperCase())break;const i=SvgBuild.parseCoordinates((s[2]||"").trim()),a=[];let r,l,o=i.length;if(!n){const e=t[t.length-1];r=e.key.toUpperCase(),l=e.end}switch(e.toUpperCase()){case"M":if(n)e="M";case"L":if(o>=2)o-=o%2,a.push(i);break;case"H":if(l&&o){let t=0;while(t<o)a.push([i[t++],"h"===e?0:l.y])}break;case"V":if(l&&o){let t=0;while(t<o)a.push(["v"===e?0:l.x,i[t++]])}break;case"Z":if(!n)a.push(t[0].coordinates.slice(0,2)),e="Z";break;case"C":if(o>=6){o-=o%6;for(let e=0;e<o;e+=6){const t=i.slice(e,e+6);a.push(t)}}break;case"S":if(o>=4&&("C"===r||"S"===r)){o-=o%4;for(let e=0;e<o;e+=4){const t=i.slice(e,e+4);a.push(t)}}break;case"Q":if(o>=4){o-=o%4;for(let e=0;e<o;e+=4){const t=i.slice(e,e+4);a.push(t)}}break;case"T":if(o>=2&&("Q"===r||"T"===r)){o-=o%2;for(let e=0;e<o;e+=2){const t=i.slice(e,e+2);a.push(t)}}break;case"A":if(o>=7){o-=o%7;for(let e=0;e<o;e+=7){const t=i.slice(e,e+7);a.push(t)}}break;default:continue}for(const i of a){const s=e.toLowerCase(),a="a"===s?i.splice(0,5):void 0,r=e===s,o=i.length,c=new Array(o/2);for(let e=0,t=0;e<o;e+=2){let s=i[e],n=i[e+1];if(r&&l)s+=l.x,n+=l.y;c[t++]={x:s,y:n}}const h={key:e,value:c,start:c[0],end:c[c.length-1],relative:r,coordinates:i};if(a)h.radiusX=a[0],h.radiusY=a[1],h.xAxisRotation=a[2],h.largeArcFlag=a[3],h.sweepFlag=a[4];t.push(h),l=h.end,n=false}}return t}static getPathPoints(e){const t=[];let i=0,s=0;const n=e.length;let a,r=0;while(r<n){const n=e[r++],{key:l,relative:o,coordinates:c}=n,h=c.length;a=0;while(a<h){if(o)i+=c[a++],s+=c[a++];else i=c[a++],s=c[a++];const e={x:i,y:s};if("A"===l.toUpperCase())e.rx=n.radiusX,e.ry=n.radiusY;t.push(e)}if(o)n.key=l.toUpperCase()}return t}static syncPathPoints(e,t,i){e:{let s;const n=e.length;let a=0;while(a<n){const n=e[a++],{key:r,coordinates:l,value:o}=n;if(n.relative)if(s)if(i&&("H"===r||"V"===r)){const e=t.shift();if(e)l[0]=e.x,l[1]=e.y,o[0]=e,n.key="L",n.relative=false;else break e}else{const e=l.length;let i=0,a=0;while(i<e){const e=t.shift();if(e){if(l[i++]=e.x-s.x,l[i++]=e.y-s.y,"a"===r&&void 0!==e.rx&&void 0!==e.ry)n.radiusX=e.rx,n.radiusY=e.ry;o[a++]=e,s=e}else break e}n.key=r.toLowerCase()}else break;else switch(r.toUpperCase()){case"M":case"L":case"H":case"V":case"C":case"S":case"Q":case"T":case"Z":{const i=l.length;let s=0,a=0;while(s<i){const i=t.shift();if(i)l[s++]=i.x,l[s++]=i.y,n.value[a++]=i;else{e=[];break e}}break}case"A":{const i=t.shift();if(i)l[0]=i.x,l[1]=i.y,n.radiusX=i.rx,n.radiusY=i.ry,n.value[0]=i;else{e=[];break e}break}}s=o[o.length-1],n.start=o[0],n.end=s}}return e}static filterTransforms(e,t){const i=[];for(let s=0;s<e.length;++s){const n=e[s],a=n.type;if(!t||!t.includes(a)){switch(a){case SVGTransform.SVG_TRANSFORM_ROTATE:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(0===n.angle)continue;break;case SVGTransform.SVG_TRANSFORM_SCALE:{const e=n.matrix;if(1===e.a&&1===e.d)continue;break}case SVGTransform.SVG_TRANSFORM_TRANSLATE:{const e=n.matrix;if(0===e.e&&0===e.f)continue;break}}i.push(n)}}return i}static applyTransforms(e,t,i){const s=SvgBuild.clonePoints(t);for(const t of e.slice(0).reverse()){const e=t.matrix;let n=0,a=0,r=0,l=0;if(i){const{x:s,y:o}=i,c=t.method;switch(t.type){case SVGTransform.SVG_TRANSFORM_SCALE:if(c.x)r=s*(1-e.a);if(c.y)l=o*(1-e.d);break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(c.y)a-=o;break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(c.x)n-=s;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(c.x)n-=s,r=s+O(t.angle,s);if(c.y)a-=o,l=o+O(t.angle,o);break}}for(let i=0;i<s.length;++i){const o=s[i],{x:c,y:h}=o;if(o.x=T.applyX(e,c,h+a)+r,o.y=T.applyY(e,c+n,h)+l,t.type===SVGTransform.SVG_TRANSFORM_SCALE){const{rx:t,ry:i}=o;if(void 0!==t&&void 0!==i)o.rx=T.applyX(e,t,i+a),o.ry=T.applyY(e,t+n,i)}}}return s}static convertTransforms(e){const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{type:t,matrix:n,angle:a}=e.getItem(s);i[s++]=w.create(t,n,a)}return i}static clonePoints(e){if(Array.isArray(e)){const t=e.length,i=new Array(t);let s=0;while(s<t){const{x:t,y:n,rx:a,ry:r}=e[s],l={x:t,y:n};if(void 0!==a&&void 0!==r)l.rx=a,l.ry=r;i[s++]=l}return i}else{const t=e.numberOfItems,i=new Array(t);let s=0;while(s<t){const{x:t,y:n}=e.getItem(s);i[s++]={x:t,y:n}}return i}}static minMaxPoints(e,t=false){let{x:i,y:s}=e[0],n=i,a=s;const r=e.length;for(let l=1;l<r;++l){const{x:r,y:o}=e[l];if(t&&l>0){const{rx:t,ry:c}=e[l];if(void 0!==t&&void 0!==c){const{x:h,y:f}=e[l-1];let u=(r+h)/2,d=(o+f)/2;if(r>h)d-=c;else if(r<h)d+=c;if(o<f)u+=t;else if(o>h)u-=t;i=Math.min(u,i),n=Math.max(u,n),s=Math.min(d,s),a=Math.max(d,a)}}if(r<i)i=r;else if(r>n)n=r;if(o<s)s=o;else if(o>a)a=o}return{top:s,right:n,bottom:a,left:i}}static centerPoints(...e){const t=this.minMaxPoints(e);return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}static convertPoints(e){const t=e.length;if(t%2==0){const i=new Array(t/2);let s=0,n=0;while(s<t)i[n++]={x:e[s++],y:e[s++]};return i}return[]}static parsePoints(e){return Y(e.trim().split(/\s+/),e=>{const[t,i]=e.split(",");return{x:parseFloat(t),y:parseFloat(i)}})}static parseCoordinates(e){const t=[];let i;while(i=$.exec(e)){const e=parseFloat(i[0]);if(!isNaN(e))t.push(e)}return $.lastIndex=0,t}static getBoxRect(e){let t=[];const i=e.length;let s=0;while(s<i)t=t.concat(SvgBuild.getPathPoints(SvgBuild.getPathCommands(e[s++])));return this.minMaxPoints(t,true)}static setName(e){let t,i,s=e.id.trim();if(""!==s){if(s=D(s,true),!j.has(s))t=s;i=s}else i=e.tagName;let n=j.get(i)||0;if(t)return j.set(t,n),t;else return j.set(i,++n),i+"_"+n}static resetNameCache(){j.clear()}}SvgBuild.isUse=e=>U(e.instanceType,1),SvgBuild.isContainer=e=>U(e.instanceType,2),SvgBuild.isElement=e=>U(e.instanceType,4),SvgBuild.isShape=e=>U(e.instanceType,2052),SvgBuild.isAnimate=e=>U(e.instanceType,32776),SvgBuild.isAnimateTransform=e=>U(e.instanceType,98312),SvgBuild.asSvg=e=>18===e.instanceType,SvgBuild.asG=e=>34===e.instanceType,SvgBuild.asPattern=e=>258===e.instanceType,SvgBuild.asShapePattern=e=>514===e.instanceType,SvgBuild.asImage=e=>8196===e.instanceType,SvgBuild.asUseG=e=>115===e.instanceType,SvgBuild.asUseSymbol=e=>131===e.instanceType,SvgBuild.asUseShape=e=>6149===e.instanceType,SvgBuild.asUseShapePattern=e=>1539===e.instanceType,SvgBuild.asSet=e=>8===e.instanceType,SvgBuild.asAnimate=e=>32776===e.instanceType,SvgBuild.asAnimateTransform=e=>98312===e.instanceType,SvgBuild.asAnimateMotion=e=>229384===e.instanceType,SvgBuild.drawCircle=(e,t,i,s)=>SvgBuild.drawEllipse(e,t,i,i,s),SvgBuild.drawPolygon=(e,t)=>e.length>0?SvgBuild.drawPolyline(e,t)+"Z":"";const{getNamedItem:K}=squared.lib.dom;function H(e,t,i,s,n){const a=e.length;let r=0;while(r<a){const a=e[r++];if(a.x+=t,a.y+=i,void 0!==a.rx&&void 0!==a.ry)a.rx*=s,a.ry*=n}}var Z=e=>class extends e{constructor(){super(...arguments),this._baseVal={}}setBaseValue(e,t){if(void 0!==t){if(this.verifyBaseValue(e,t))return this._baseVal[e]=t,true}else switch(e){case"d":return this._baseVal[e]=K(this.element,"d"),true;case"points":{const t=this.element[e];if(Array.isArray(t))return this._baseVal[e]=SvgBuild.clonePoints(t),true;break}default:{const t=this.element[e];if(t){const i=t.baseVal;if(i)return this._baseVal[e]=i.value,true}break}}return false}getBaseValue(e,t){var i;return null!==(i=this._baseVal[e])&&void 0!==i?i:!this.setBaseValue(e)?t:void 0}refitBaseValue(e,t,i,s=1,n=1){const a=this._baseVal;for(const r in a){const l=a[r];if("string"==typeof l){if("d"===r){const o=SvgBuild.getPathCommands(l),c=SvgBuild.getPathPoints(o);H(c,e,t,s,n),a[r]=SvgBuild.drawPath(SvgBuild.syncPathPoints(o,c),i)}}else if("number"==typeof l)switch(r){case"cx":case"x1":case"x2":case"x":a[r]+=e;break;case"cy":case"y1":case"y2":case"y":a[r]+=t;break;case"r":a[r]*=Math.min(s,n);break;case"rx":case"width":a[r]*=s;break;case"ry":case"height":a[r]*=n;break}else if(Array.isArray(l))if("points"===r)H(l,e,t,s,n)}}verifyBaseValue(e,t){switch(e){case"d":return"string"==typeof t;case"cx":case"cy":case"r":case"rx":case"ry":case"x1":case"x2":case"y1":case"y2":case"x":case"y":case"width":case"height":return"number"==typeof t;case"points":return Array.isArray(t)}}};const{getFontSize:Q,isLength:J,parseUnit:ee}=squared.lib.css,{getNamedItem:te}=squared.lib.dom,{capitalize:ie,hasBit:se,isString:ne}=squared.lib.util;function ae(e,t){const i=se(this.fillMode,t);if(e){if(!i)this.fillMode|=t}else if(i)this.fillMode^=t}class SvgAnimation{constructor(e,t){if(this.element=null,this.fillMode=0,this.synchronizeState=0,this.paused=false,this.animationElement=null,this._to="",this._duration=-1,this._delay=0,this._attributeName="",this._dataset={},e){const t=e.dataset;for(const e in t){const i=t[e];if(ne(i))try{this._dataset[e]=JSON.parse(i)}catch(e){}}this.element=e}if(t){this.animationElement=t,this.setAttribute("attributeName"),this.setAttribute("to"),this.setAttribute("fill","freeze");const e=te(t,"dur");if(""!==e&&"indefinite"!==e){const t=SvgAnimation.convertClockTime(e);this.duration=!isNaN(t)&&t>0?t:0}}}static convertClockTime(e){e=e.trim();let t=/^(-)?(\d+(?:\.\d+)?)(ms|s|min|h)?$/.exec(e);if(t){let e=parseFloat(t[2])*(t[1]?-1:1);switch(t[3]){case"ms":break;case"h":e*=60;case"min":e*=60;default:e*=1e3;break}return Math.round(e)}else if(t=/^(-)?(?:(\d+):)?(?:([0-5][0-9]):)?([0-5][0-9])(?:\.(\d{1,3}))?$/.exec(e),t){const e=t[5];let i=parseInt(t[4])*(t[1]?-1:1);if(t[1])i+=60*parseInt(t[2])*60;if(t[2])i+=60*parseInt(t[3]);return 1e3*i+(e?parseInt(e)*(e.length<3?Math.pow(10,3-e.length):1):0)}return NaN}setAttribute(e,t){const i=this.animationElement;if(i){const s=te(i,e);if(""!==s)if(ne(t))t=t.trim(),this[e+ie(t)]=s===t;else this[e]=s}}addState(...e){for(let t=0;t<e.length;++t){const i=e[t];if(!se(this.synchronizeState,i))this.synchronizeState|=i}}removeState(...e){for(let t=0;t<e.length;++t){const i=e[t];if(se(this.synchronizeState,i))this.synchronizeState^=i}}hasState(...e){return e.some(e=>se(this.synchronizeState,e))}set attributeName(e){var t,i,s;if("transform"!==e&&!this.baseValue){let n=null===(t=this._dataset.baseValue)||void 0===t?void 0:t[e];if(void 0!==n)this.baseValue=n.toString().trim();else{const t=this.element;if(t){switch(e){case"opacity":case"stroke-opacity":case"fill-opacity":n=R(t,e)||"1";break;default:n=R(t,e);break}if(""===n){const a=this.animationElement;if(a&&"paused"===getComputedStyle(t).animationPlayState){const t=a.parentElement,r=null===(s=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i.baseVal)||void 0===s?void 0:s.valueAsString;if(r&&J(r))this.baseValue=ee(n,Q(t)).toString()}}else this.baseValue=n}}}this._attributeName=e}get attributeName(){return this._attributeName}set delay(e){this._delay=e}get delay(){return this._delay}set duration(e){this._duration=Math.round(e)}get duration(){return this._duration}set to(e){this._to=e}get to(){return this._to}set fillBackwards(e){ae.call(this,e,4)}get fillBackwards(){return se(this.fillMode,4)}set fillForwards(e){ae.call(this,e,2)}get fillForwards(){return se(this.fillMode,2)}set fillFreeze(e){ae.call(this,e,1)}get fillFreeze(){return se(this.fillMode,1)}set parent(e){this._parent=e}get parent(){return this._parent}set group(e){this._group=e}get group(){return this._group||{id:-1/0,name:""}}set setterType(e){}get setterType(){return true}get fillReplace(){switch(this.fillMode){case 0:case 4:return true;default:return false}}get parentContainer(){let e=this._parent;while(e&&!SvgBuild.isContainer(e))e=e.parent;return e}get dataset(){return this._dataset}get instanceType(){return 8}}const re={ease:"0.25 0.1 0.25 1","ease-in":"0.42 0 1 1","ease-in-out":"0.42 0 0.58 1","ease-out":"0 0 0.58 1",linear:"0 0 1 1","step-start":"0 1 0 1","step-end":"1 0 1 0"};var le=Object.freeze({__proto__:null,KEYSPLINE_NAME:re});const{getHexCode:oe,parseColor:ce}=squared.lib.color,{getFontSize:he,isLength:fe,parseUnit:ue}=squared.lib.css,{getNamedItem:de}=squared.lib.dom,{isNumber:ge,replaceMap:pe,sortNumber:me,trimEnd:ve}=squared.lib.util,ye=e=>parseFloat((1-e).toPrecision(5));class SvgAnimate extends SvgAnimation{constructor(e,t){if(super(e,t),this.type=0,this.additiveSum=false,this.accumulateSum=false,this._reverse=false,this._alternate=false,this._iterationCount=1,this._from="",this._setterType=false,this._repeatDuration=-1,this._timingFunction="",t){const e=de(t,"values"),i=-1!==this.duration?SvgAnimate.toFractionList(de(t,"keyTimes")):[];if(""!==e){const t=ve(e,";").split(/\s*;\s*/);this.values=t;const s=t.length;if(s>1&&s===i.length)this.from=t[0],this.to=t[s-1],this.keyTimes=i;else if(1===s)this.to=this.values[0],this.convertToValues()}else this.from=de(t,"from"),this.convertToValues(i);const s=de(t,"repeatDur");if(""!==s&&"indefinite"!==s){const e=SvgAnimation.convertClockTime(s);if(!isNaN(e)&&e>0)this._repeatDuration=e}const n=de(t,"repeatCount");if(this.iterationCount="indefinite"===n?-1:parseFloat(n)||0,"animate"===t.tagName)this.setCalcMode()}}static convertTimingFunction(e){const t=re[e];if(t)return t;else if(/\s*[\d.]+\s+[\d.]+\s+[\d.]+\s+[\d.]+\s*/.test(e))return e.trim();else if(e.startsWith("step"))return re.linear;else{const t=new RegExp(SvgAnimate.PATTERN_CUBICBEZIER).exec(e);return t?t[1]+" "+t[2]+" "+t[3]+" "+t[4]:re.ease}}static convertStepTimingFunction(e,t,i,s,n,a){const r=s[n],l=s[n+1];let o,c;switch(e){case"fill":case"stroke":{const e=ce(r),t=ce(l);if(e&&t)o=[e],c=[t];break}case"points":o=SvgBuild.convertPoints(SvgBuild.parseCoordinates(r)),c=SvgBuild.convertPoints(SvgBuild.parseCoordinates(l));break;case"rotate":case"scale":case"translate":o=pe(r.trim().split(/\s+/),e=>parseFloat(e)),c=pe(l.trim().split(/\s+/),e=>parseFloat(e));break;default:if(ge(r))o=[parseFloat(r)];else if(fe(r))o=[ue(r,a)];if(ge(l))c=[parseFloat(l)];else if(fe(l))c=[ue(l,a)];break}if(o&&c){const s=o.length;if(s===c.length){switch(t){case"step-start":t="steps(1, start)";break;case"step-end":t="steps(1, end)";break}const a=/steps\((\d+)(?:,\s+(start|end))?\)/.exec(t);if(a){const t=i[n+1]-i[n],r=parseInt(a[1]),l=100/r,h=new Array(r+1),f=new Array(r+1);for(let u=0;u<=r;++u){const d=0===u&&"start"===a[2]?1:0,g=i[n]+t*(u/r),p=l*(u+d)/100;let m="";switch(e){case"fill":case"stroke":{const e=o[0].rgba,t=c[0].rgba,i=oe(SvgAnimate.getSplitValue(e.r,t.r,p),SvgAnimate.getSplitValue(e.g,t.g,p),SvgAnimate.getSplitValue(e.b,t.b,p)),s=oe(SvgAnimate.getSplitValue(e.a,t.a,p));m+=(""!==m?" ":"")+"#"+(i+("FF"!==s?s:""));break}case"points":{let e=0;while(e<s){const t=o[e],i=c[e++];m+=(""!==m?" ":"")+SvgAnimate.getSplitValue(t.x,i.x,p)+","+SvgAnimate.getSplitValue(t.y,i.y,p)}break}default:{let e=0;while(e<s)m+=(""!==m?" ":"")+SvgAnimate.getSplitValue(o[e],c[e++],p).toString();break}}if(""!==m)h[u]=g,f[u]=m;else return}return[h,f]}}}}static toFractionList(e,t=";",i=true){let s=0;const n=pe(e.split(t),e=>{const t=parseFloat(e);if(!isNaN(t)&&(!i||t>=s&&t<=1))return s=t,t;else return-1});return n.length>1&&(!i||0===n[0]&&n.some(e=>-1!==e))?n:[]}setCalcMode(e,t){const i=this.animationElement;if(i){if(!t)t=de(i,"calcMode")||"linear";const s=this.keyTimes;switch(t){case"discrete":if(0===s[0]&&2===s.length){const t=this.values;let n=[],a=[];const r=s.length-1;let l=0;while(l<r){const r=SvgAnimate.convertStepTimingFunction(e||this.attributeName,"step-end",s,t,l++,he(i));if(r)n=n.concat(r[0]),a=a.concat(r[1])}n.push(s.pop()),a.push(t.pop()),this._values=a,this._keyTimes=n,this._keySplines=[re["step-end"]]}break;case"paced":this._keySplines=void 0;break;case"spline":this.keySplines=pe(de(i,"keySplines").split(";"),e=>e.trim()).filter(e=>""!==e);case"linear":if(0!==s[0]&&1!==s[s.length-1]){const e=this.values.length,t=new Array(e);let i=0;while(i<e)t[i]=i++/(e-1);this._keyTimes=t,this._keySplines=void 0}break}}}convertToValues(e){const t=this.to;if(t){if(this.values=[this.from,t],e&&2===e.length){const t=this.keyTimes;if(2!==t.length||0===t[0]&&t[1]<=1)return void(this.keyTimes=e)}this.keyTimes=[0,1]}}setGroupOrdering(e){if(this.group.ordering=e,this.fillBackwards){const t=this.group.name;let i=false,s=e.length-1;while(s>=0){const n=e[s--];if(i){if("forwards"!==n.fillMode){this.fillBackwards=false;break}}else if(n.name===t)i=true}}}getIntervalEndTime(e,t){const i=this.getTotalDuration();if(e<i){const{duration:s,keyTimes:n}=this;let a=this.delay;while(a+s<=e)a+=s;return Math.min(a+(t?1:n[n.length-1])*s,i)}return i}getTotalDuration(e){let t=this.iterationCount;if(e&&-1===t)t=1;if(-1!==t)return Math.min(this.delay+this.duration*t,this.end||1/0);else return 1/0}set delay(e){this._delay=e;const t=this.animationElement,i=t&&de(t,"end");if(i){const t=me(pe(i.split(";"),e=>SvgAnimation.convertClockTime(e)).filter(e=>!isNaN(e)))[0];if(!isNaN(t)){const{duration:i,iterationCount:s}=this;if(-1===s||i>0&&t<i*s)if(e>t){if(this.end=t,-1===s)this.iterationCount=Math.ceil((t-e)/i)}else this.duration=-1}}}get delay(){return this._delay}set duration(e){super.duration=e}get duration(){const e=this._duration;return-1===e&&-1!==this._repeatDuration?this._repeatDuration:e}set to(e){this._to=e}get to(){return this._setterType?this.valueTo||this._to:this.setterType?this.values[0]:this._to}get from(){return this._from}set from(e){if(void 0===this._values){const t=this.animationElement;if(t){if(""===this.to){const i=de(t,"by"),s=SvgBuild.parseCoordinates(i);if(s.length>0){if(""===e)e=this.baseValue||"";if(""!==e){const t=SvgBuild.parseCoordinates(e),i=t.length;if(s.length===i){let e="",n=0;while(n<i)e+=(n>0?",":"")+(t[n]+s[n++]);this.to=e}}}}if(SvgBuild.parseCoordinates(this.to).length>0)this.setAttribute("additive","sum")}}this._from=e}set iterationCount(e){this._iterationCount=isNaN(e)?1:e;const t=this.animationElement;if(t)if(-1!==this.iterationCount)this.setAttribute("accumulate","sum"),this.fillFreeze="freeze"===de(t,"fill");else this.accumulateSum=false,this.fillFreeze=false}get iterationCount(){const e=this.duration;if(e>0){const t=this._iterationCount,i=this._repeatDuration;if(-1!==i&&(-1===t||i<t*e))return i/e;else return t}return 1}set values(e){if(this._values=e,e&&e.length!==this.keyTimes.length)this._keyTimes=void 0,this._keySplines=void 0}get values(){var e;return null!==(e=this._values)&&void 0!==e?e:this._values=[]}set keyTimes(e){const t=this._values;if((!t||t.length===e.length)&&e.every(e=>e>=0&&e<=1))this._keyTimes=e}get keyTimes(){var e;return null!==(e=this._keyTimes)&&void 0!==e?e:this._keyTimes=[]}set keySplines(e){if(null==e?void 0:e.length){const t=this.keyTimes.length-1;if(e.length>=t&&!e.every(e=>""===e||e===re.linear)){const i=[];let s=0;while(s<t){const t=pe(e[s++].split(/\s+/),e=>parseFloat(e));if(4===t.length&&!t.some(e=>isNaN(e))&&t[0]>=0&&t[0]<=1&&t[2]>=0&&t[2]<=1)i.push(t.join(" "));else i.push(re.linear)}this._keySplines=i}}else this._keySplines=void 0}get keySplines(){return this._keySplines}set timingFunction(e){this._timingFunction=e?SvgAnimate.convertTimingFunction(e):e}get timingFunction(){var e;return this._timingFunction||(null===(e=this.keySplines)||void 0===e?void 0:e[0])||""}set reverse(e){if(this.length>0&&e!==this._reverse){const e=this.keyTimes,t=this._keySplines,i=e.length,s=new Array(i);let n=i-1,a=0;while(n>=0)s[a++]=1-e[n--];if(this.keyTimes=s,this.values.reverse(),t){const e=[];n=t.length-1;while(n>=0){const i=pe(t[n--].split(" "),e=>parseFloat(e));e.push(4===i.length?ye(i[2])+" "+ye(i[3])+" "+ye(i[0])+" "+ye(i[1]):re.linear)}this._keySplines=e}}this._reverse=e}get reverse(){return this._reverse}set alternate(e){this._alternate=e}get alternate(){return this._alternate}set setterType(e){this._setterType=e}get setterType(){if(this._setterType)return true;else if(this.animationElement&&0===this.duration){const e=this.keyTimes;return e.length>=2&&0===e[0]&&""!==this.values[0]}return false}set length(e){if(0===e)this._values=void 0}get length(){var e;return(null===(e=this._values)||void 0===e?void 0:e.length)||0}get valueTo(){const e=this._values;return(null==e?void 0:e[e.length-1])||""}get valueFrom(){return this.values[0]||""}get playable(){return!this.paused&&this.duration>0&&this.keyTimes.length>0}get fillReplace(){return super.fillReplace||-1===this.iterationCount}get fromToType(){const e=this.keyTimes;return 2===e.length&&0===e[0]&&1===e[1]}get evaluateStart(){const e=this.keyTimes;return e.length>0&&e[0]>0}get evaluateEnd(){const e=this.keyTimes;return e.length>0&&e[e.length-1]<1}get instanceType(){return 32776}}SvgAnimate.PATTERN_CUBICBEZIER="cubic-bezier\\(([01](?:\\.\\d+)?),\\s+(-?\\d+(?:\\.\\d+)?),\\s+([01](?:\\.\\d+)?),\\s+(-?\\d+(?:\\.\\d+)?)\\)",SvgAnimate.getSplitValue=(e,t,i)=>e+(t-e)*i;const{getNamedItem:Se}=squared.lib.dom,{replaceMap:be}=squared.lib.util;class SvgAnimateTransform extends SvgAnimate{constructor(e,t){if(super(e,t),this.attributeName="transform",t){const e=Se(t,"type");this.setType(e),this.setCalcMode(e)}}static toRotateList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0,0,0];else{const e=SvgBuild.parseCoordinates(t);if(2===e.length)e[2]=0;if(3===e.length)i[s]=e;else return}}return i}static toScaleList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[1,1,0,0];else{const e=SvgBuild.parseCoordinates(t);if(1===e.length)e[1]=e[0];if(2===e.length)e[2]=0,e[3]=0;if(4===e.length)i[s]=e;else return}}return i}static toTranslateList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0,0];else{const e=SvgBuild.parseCoordinates(t);if(1===e.length)e[1]=0;if(2===e.length)i[s]=e;else return}}return i}static toSkewList(e){const t=e.length,i=new Array(t);for(let s=0;s<t;++s){const t=e[s];if(""===t)i[s]=[0];else{const e=SvgBuild.parseCoordinates(t);if(1===e.length)i[s]=e;else return}}return i}expandToValues(){if(this.additiveSum){const{duration:e,keyTimes:t,iterationCount:i}=this;if(-1!==i&&e>0&&t.length>0){const s=e*i;e:{const{type:n,keySplines:a,values:r}=this,l=[],o=[],c=[];let h;const f=t.length;for(let u=0;u<i;++u){if(u>0&&a)c.push("");for(let d=0;d<f;++d){const g=SvgBuild.parseCoordinates(r[d]),p=g.length;if(p>0){let r;switch(n){case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(1===p)r=[g[0],0];else if(2===p)r=g;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(1===p)r=[g[0],g[0]];else if(2===p)r=g;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(1===p)r=[g[0],0,0];else if(3===p)r=g;break;case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:if(1===p)r=g;break}if(r){let n=(t[d]+u)*e;if(h){let e=0;while(e<r.length)r[e]+=h[e++]}if(u<i-1&&d===f-1){if(this.accumulateSum)h=r;--n}if(l.push(n/s),o.push(r.join(" ")),a&&d<f-1)c.push(a[d])}else break e}else break e}}this.values=o,this.keyTimes=l,this.keySplines=c.length>0?c:void 0,this.duration=s,this.iterationCount=1,this.accumulateSum=false}}}}setType(e){let t;switch(e){case"translate":if(this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this.animationElement)t=SvgAnimateTransform.toTranslateList(this.values);break;case"scale":if(this.type=SVGTransform.SVG_TRANSFORM_SCALE,this.animationElement)t=SvgAnimateTransform.toScaleList(this.values);break;case"rotate":if(this.type=SVGTransform.SVG_TRANSFORM_ROTATE,this.animationElement)t=SvgAnimateTransform.toRotateList(this.values);break;case"skewX":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWX,this.animationElement)t=SvgAnimateTransform.toSkewList(this.values);break;case"skewY":if(this.type=SVGTransform.SVG_TRANSFORM_SKEWY,this.animationElement)t=SvgAnimateTransform.toSkewList(this.values);break;default:return}if(t)this.values=be(t,e=>e.join(" "));this.baseValue=w.typeAsValue(this.type)}get instanceType(){return 98312}}const{safeNestedArray:ke,sortNumber:Te}=squared.lib.util;function we(e,t,i,s,n,a=0,r,l=false,o=false,c=0,h=false,f){if(n)ke(e[i],s).push({time:s,value:n,animation:r,start:l,end:o,endTime:a,fillMode:c,infinite:h,valueFrom:f}),t[i].add(s)}class SvgAnimationIntervalMap{constructor(e,...t){var i;e=(t.length>0?e.filter(e=>t.includes(e.attributeName)):e.slice(0)).sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?1:-1;else return e.delay<t.delay?-1:1}),t.length=0;const s=e.length;let n=0;while(n<s){const i=e[n++],s=SvgAnimationIntervalMap.getKeyName(i);if(!t.includes(s))t.push(s)}const a={},r={},l={};n=0;while(n<t.length){const i=t[n++];a[i]=new Map,r[i]={},l[i]=new Set;const s=i.split(":")[0],o=e.filter(e=>e.fillBackwards&&e.attributeName===s).sort((e,t)=>e.group.id<t.group.id?1:-1)[0];if(o){const e=o.delay;we(r,l,i,0,o.values[0],e,o,0===e,false,4)}}n=0;while(n<s){const t=e[n++],i=SvgAnimationIntervalMap.getKeyName(t);if(t.baseValue&&void 0===r[i][-1])we(r,l,i,-1,t.baseValue);if(t.setterType){const{delay:e,duration:s}=t,n=t.fillReplace&&s>0;if(we(r,l,i,e,t.to,n?e+s:0,t,n,!n,1),n)we(r,l,i,e+s,"",0,t,false,true,1)}else if(SvgBuild.isAnimate(t)&&t.duration>0){const e=-1===t.iterationCount,s=t.getTotalDuration();if(we(r,l,i,t.delay,t.valueTo,s,t,true,false,0,e,t.valueFrom),!e&&!t.fillReplace)we(r,l,i,s,t.valueTo,0,t,false,true,t.fillForwards?2:1)}}for(const e in r){const t=Te(Array.from(l[e])),i=t.length;n=0;while(n<i){const i=t[n++],s=r[e][i];for(let t=0;t<s.length;++t){const i=s[t],n=i.animation;if(""===i.value||n&&i.start&&SvgBuild.isAnimate(n)&&""===n.from){let n,r;for(const t of a[e].values()){const e=t.length;r=0;while(r<e){const e=t[r++];if(i.animation!==e.animation&&""!==e.value&&(-1===e.time||2===e.fillMode||1===e.fillMode)){n=e.value;break}}}if(n)i.value=n;else if(""===i.value)s.splice(t--,1)}}if(s.length>0)s.sort((e,t)=>{if(e.animation&&t.animation)if(e.fillMode===t.fillMode)return e.animation.group.id<t.animation.group.id?1:-1;else return e.fillMode<t.fillMode?1:-1;return 0}),a[e].set(i,s)}}for(const e in a)for(const[t,s]of a[e].entries()){const r=s.length;n=0;while(n<r){const r=s[n++],l=r.animation;if(l)if(1===r.fillMode){const i=[];for(const[s,n]of a[e].entries())if(s<t){const e=n.length;let t=0;while(t<e){const e=n[t++];if(e.start){const t=e.animation;if(null==t?void 0:t.animationElement)i.push(t)}}}else for(let e=0;e<n.length;++e){const a=n[e];if(s>t){if(a.end&&i.includes(a.animation))n.splice(e--,1)}else if(a.end){const t=a.animation;if((null==t?void 0:t.animationElement)&&t.group.id<l.group.id)n.splice(e--,1)}}}else if(2===r.fillMode||r.infinite){let s=false;const n=l.group,r=n.ordering;if(r){const e=l.getTotalDuration(),t=n.name;let i=0;while(i<r.length){const n=r[i++];if(n.name===t)s=true;else if(SvgAnimationIntervalMap.getGroupEndTime(n)>=e)break}}const o=[];for(const[n,r]of a[e].entries())if(!s&&n<t){const e=r.length;let t=0;while(t<e){const e=r[t++];if(e.start){const t=e.animation;if(t)o.push(t)}}}else for(let e=0;e<r.length;++e){const a=r[e];if(n>t){const t=a.animation;if(s||t&&(a.end&&o.includes(t)||!l.animationElement&&t.group.id<l.group.id))r.splice(e--,1)}else if(a.end){if(((null===(i=a.animation)||void 0===i?void 0:i.group.id)||NaN)<l.group.id)r.splice(e--,1)}}}}}for(const e in a){const t=a[e];for(const[e,i]of t.entries())if(0===i.length)t.delete(e)}this.map=a}has(e,t,i){const s=this.map[e];if(void 0!==t){if(s&&s.has(t))if(!i)return true;else return-1!==s.get(t).findIndex(e=>e.animation===i);return false}return!!s}get(e,t,i){let s;const n=this.map[e];if(n)for(const[e,a]of n.entries())if(e<=t){const n=a.length;let r=0;while(r<n){const n=a[r++];if(""!==n.value&&(-1===n.time||n.end&&(2===n.fillMode||1===n.fillMode))||i&&n.start&&t!==e){s=n.value;break}}}else break;return s}paused(e,t){let i=0;const s=this.map[e];if(s)for(const[e,n]of s.entries())if(e<=t){const e=n.length;let s=0;while(s<e){const e=n[s++];if(e.start&&(e.infinite||0===e.fillMode&&e.endTime>t))if(e.animation)i=2;else{i=1;break}else if(e.end&&(2===e.fillMode||1===i&&1===e.fillMode)){i=0;break}}}else break;return 0===i}evaluateStart(e,t){const i=e.values,s=(e.reverse?i[i.length-1]:i[0])||this.get(e.attributeName,e.delay)||t||e.baseValue;if(s)if(e.reverse)i[i.length-1]=s,e.to=s;else i[0]=s,e.from=s;return i}}SvgAnimationIntervalMap.getGroupEndTime=e=>"infinite"===e.iterationCount?1/0:e.delay+e.duration*parseInt(e.iterationCount),SvgAnimationIntervalMap.getKeyName=e=>e.attributeName+(SvgBuild.isAnimateTransform(e)?":"+w.typeAsName(e.type):"");const{clamp:Ae,equal:xe,multipleOf:Re}=squared.lib.math,{hasBit:Ve,hasKeys:Ee,hasValue:_e,isEqual:Pe,isNumber:Ne,joinArray:Me,plainMap:Be,replaceMap:Ge,safeNestedArray:Ce,spliceArray:Fe,sortNumber:Oe}=squared.lib.util;function Le(e,t,i,s,n){let a,r,l,o=0;for(const[t,s]of e.entries()){if(i===t){r={key:t,value:s};break}else if(i>o&&i<t&&void 0!==a){r={key:o,value:a},l={key:t,value:s};break}o=t,a=s}if(r&&l)He(e,i,Ye(i,r.key,r.value,l.key,l.value),true);else if(r)He(e,i,r.value,true);else if(!n){let n=s.get(t,i,true);if(void 0!==n)if(n=qe(n,true),""!==n)He(e,i,n)}}function Ie(e){const t=new Set,i=e.length,s=e[i-1][0];let n=0;while(n<i){const i=e[n++];let a=i[0]/s;if(a>0){let e=7;do{const i=parseFloat(a.toString().substring(0,e));if(!t.has(i)){a=i;break}}while(++e)}i[0]=a,t.add(a)}return e}function qe(e,t){if("string"==typeof e)if(Ne(e))e=parseFloat(e);else if(0===(e=SvgBuild.parsePoints(e)).length)e="";return t&&"string"==typeof e?"":e}function Xe(e,t){let i;if(e){const s=e.length;let n=0;while(n<s){const s=e[n++];if(s.time<=t)i=s.value;else break}}return i}function ze(e,t,i,s,n){var a;const r=[],l=t.element.tagName;let o;switch(l){case"line":o=["x1","y1","x2","y2"];break;case"rect":o=["width","height","x","y"];break;case"polyline":case"polygon":o=["points"];break;case"circle":o=["cx","cy","r"];break;case"ellipse":o=["cx","cy","rx","ry"];break;default:return}const c=w.origin(t.element),h=e.length;let f,u=0;while(u<h){const[h,d]=e[u++],g=[],p=o.length;f=0;while(f<p){const e=o[f++];let i=d.get(e);if(void 0===i)i=null!==(a=Xe(s[e],h))&&void 0!==a?a:t.getBaseValue(e);if(void 0!==i)g.push(i);else return}let m;switch(l){case"line":m=[{x:g[0],y:g[1]},{x:g[2],y:g[4]}];break;case"rect":{const[e,t,i,s]=g;m=[{x:i,y:s},{x:i+e,y:s},{x:i+e,y:s+t},{x:i,y:s+t}];break}case"polygon":case"polyline":m=g[0];break;case"circle":case"ellipse":m=[{x:g[0],y:g[1],rx:g[2],ry:g[g.length-1]}];break}if(m){let e;if(t.transformed)m=SvgBuild.applyTransforms(t.transformed,m,c);switch(null==i||i.refitPoints(m),l){case"line":case"polyline":e=SvgBuild.drawPolyline(m,n);break;case"rect":case"polygon":e=SvgBuild.drawPolygon(m,n);break;case"circle":case"ellipse":{const{x:t,y:i,rx:s,ry:a}=m[0];e=SvgBuild.drawEllipse(t,i,s,a,n);break}}if(void 0!==e)r.push({key:h,value:e})}}return r}function De(e,t,i){const s=new Map,n=t.length;let a=0;while(a<n){const n=t[a++],r=new Map;for(const t in e){let s=e[t].get(n);if(void 0===s)s=Xe(i[t],n);if(void 0!==s)r.set(t,s)}s.set(n,r)}return s}function Ue(e,t,i,s){if(t)if(e.set(i,t),void 0!==s)e.set(s,t)}function We(e,t,i,s,n){if(e.alternate&&i%2!=0)t=t.slice(0).reverse();switch(e.attributeName){case"transform":if(e.additiveSum&&"string"==typeof n){const a=Ge(n.split(" "),e=>parseFloat(e)),r=Be(t,e=>Ge(e.trim().split(" "),e=>parseFloat(e))),l=a.length;if(r.every(e=>e.length===l)){const t=r[s];if(!e.accumulateSum)i=0;let n,o,c=0;while(c<l)t[c]+=a[c++];const h=r.length;c=0;while(c++<i){n=0;while(n<h){const e=r[n++];o=0;while(o<e.length)t[o]+=e[o++]}}return t.join(" ")}}return t[s];case"points":return SvgBuild.parsePoints(t[s]);default:{let a=parseFloat(t[s]);if(!isNaN(a)){if(e.additiveSum&&"number"==typeof n){if(a+=n,!e.accumulateSum)i=0;const s=t.length;let r,l=0;while(l++<i){r=0;while(r<s)a+=parseFloat(t[r++])}}return a}}}return n||0}function Ye(e,t,i,s,n){if(e>t)if("number"==typeof i&&"number"==typeof n)return SvgAnimate.getSplitValue(i,n,(e-t)/(s-t));else if("string"==typeof i&&"string"==typeof n){const a=Ge(i.split(" "),e=>parseFloat(e)),r=Ge(n.split(" "),e=>parseFloat(e)),l=a.length;if(l===r.length){let i="",n=0;while(n<l)i+=(n>0?" ":"")+Ye(e,t,a[n],s,r[n++]);return i}}else if(Array.isArray(i)&&Array.isArray(n)){const a=[],r=Math.min(i.length,n.length);let l=0;while(l<r){const r=i[l],o=n[l++];a.push({x:Ye(e,t,r.x,s,o.x),y:Ye(e,t,r.y,s,o.y)})}return a}return i}function $e(e,t,i,s,n,a,r,l,o,c,h,f,u,d){if(r<0)t-=r,r=0;const g=e.duration,p=t-(r+g*l),m=0===p?0===o?0:1:Ae(p/g);let v=-1,y=-1;const S=s.length;for(let e=0;e<S;++e){if(-1!==v&&m<=s[e]){y=e;break}if(m>=s[e])v=e}let b;if(-1!==v&&-1!==y)b=Ye(m,s[v],We(e,n,l,v,i),s[y],We(e,n,l,y,i));else y=-1!==v?v+1:s.length-1,b=We(e,n,l,y,i);return Ze(e,c=He(f,c,b),a,y,h,u,d),[c,b]}function je(e,t,i,s,n,a,r,l){const o=(e-t)/a,c=s.length;for(let e=1;e<c;++e){const t=s[e-1],a=s[e];if(o>=t&&o<=a)return ht(Ye(o,t,We(i,n,r,e-1,l),a,We(i,n,r,e,l)))}}function Ke(e,t,i,s,n,a,r,l,o,c,h){let f=r.length;if(!l)l=new Array(f-1).fill("");const{delay:u,duration:d}=n,g=u+d*s,p=n.getTotalDuration(),m=g+(h?a[0]:1)*d,v=parseFloat(r[h?0:f-1]);let y=g;e:{f=c.length;let s=0;while(s<f){const u=c[s++];if(u!==n){const n=u.getTotalDuration();if(u.addState(2),n>y){const[S,b,k]=gt(u);Qe(e,t,i,u,o,S,b,k);let T=m;t:{let e=false,t=pt(y,u.delay,u.duration)-1;const i=(i,s,c)=>{let f=h?!e&&y===g?0:i%d/d:s===m?1:s%d/d,T=i===s?ht(We(u,b,t,c,o)):je(i,s,u,S,b,u.duration,t,o);if(T){if(f>0)T=Math.round((parseFloat(T)+v)/2).toString();const t=a.length;if(!(f===a[t-1]&&T===r[t-1])){const o=e||0===f?(null==k?void 0:k[c])||u.timingFunction:"";if(h){if(!e&&f>0&&i===y)f+=.001;for(let e=0;e<t;++e)if(f<=a[e]){if(0===e||0===f)a.unshift(f),r.unshift(T),l.unshift(o);else a.splice(e,0,f),r.splice(e,0,T),l.splice(e,0,o);break}}else{if((s===n||s===m)&&s<p)f-=.001;a.push(f),r.push(T),l.push(o)}}}};do{if(h){let e=s+1;while(e<f){const t=c[e++];if(t.delay>y){T=t.delay;break}}}const a=S.length;for(let s=0;s<a;++s){const a=ct(u.delay,u.duration,S,t,s);if(a>=y){if(!e)i(a,y,s),e=true;if(a>y){if(h&&a>=m)break e;if(i(a,Math.min(a,n,m),s),a>=m)break e;else if(y=a,a>=n){if(n<=p)u.addState(8);break t}else if(a>=T)break t}}}}while(++t)}}}}}return[a,r,l]}function He(e,t,i,s){if(""!==i){let n=e.get(t),a=false;if(void 0===n)n=e.get(t-1),a=true;if(n!==i||s){if(!s){if("number"==typeof n&&xe(i,n))return t;while(t>0&&e.has(t))++t}e.set(t,i)}else if(a&&!e.has(t))e.delete(t-1),e.set(t,i)}return t}function Ze(e,t,i,s,n,a,r){if(!ft(SvgBuild.isAnimateTransform(e),n)){if(0===s)return;--s}const l=null==i?void 0:i[s];if(l)a.set(t,l);if(r)!function(e,t,i,s){var n;if(SvgBuild.asAnimateTransform(t)){const a=null===(n=t.transformOrigin)||void 0===n?void 0:n[s];if(a)e.set(i,a)}}(r,e,t,s)}function Qe(e,t,i,s,n,a,r,l){var o;if(0!==a[0]){let i;if(s.additiveSum)i=ht(n);else i=(null===(o=Je(t,s.attributeName))||void 0===o?void 0:o.value.toString())||e.get(SvgAnimationIntervalMap.getKeyName(s),s.delay)||ht(n);const c=s.by;if(c&&Ne(i))i=(parseFloat(i)+c).toString();a.unshift(0),r.unshift(i),null==l||l.unshift(s.timingFunction)}if(a[a.length-1]<1){const t=e.get(SvgAnimationIntervalMap.getKeyName(s),s.delay)||ht(i[s.attributeName])||r[0];a.push(1),r.push(t),null==l||l.push(s.timingFunction)}}function Je(e,t){const i=e[t];return null==i?void 0:i[i.length-1]}function et(e,t,i,s,n){if(void 0===s)s=t.delay;if(void 0===n)n=t.to;return He(e,s,i?n:qe(n))}function tt(e,t){if(t)e.push(t);e.sort((e,t)=>{if(e.delay===t.delay)return e.group.id<t.group.id?-1:1;else return e.delay<t.delay?-1:1});for(let t=0;t<e.length-1;++t)if(e[t].delay===e[t+1].delay)e.splice(t--,1)}function it(e,t){if(!t.hasState(8,32)){const i=e.indexOf(t);if(-1!==i)e.splice(i,1);e.push(t),t.addState(2)}}function st(e,t=1/0){e.sort((e,i)=>{const s=e.delay,n=e.delay;if(t!==1/0)if(t===s&&t!==n)return-1;else if(t!==s&&t===n)return 1;else if(s>t&&n<t)return 1;else if(s<t&&n>t)return-1;if(s!==n)return s>n?-1:1;else return e.group.id>i.group.id?-1:1})}function nt(e,t){if(t){if(-1!==t.iterationCount)Fe(e,e=>e===t)}else Fe(e,e=>!!e.animationElement)}function at(e,t){e.sort((e,i)=>{if(e.getTotalDuration()<=t)return 1;if(i.getTotalDuration()<=t)return-1;const s=e.delay,n=i.delay;if(s===n)return e.group.id<i.group.id?1:-1;else if(s===t)return-1;else if(n===t)return 1;else if(s<t&&n<t)return s>n?-1:1;return s<n?-1:1})}function rt(e,t){const i=e.get("x")||0,s=e.get("y")||0;return t?t.refitX(i)+" "+t.refitX(s):i+" "+s}function lt(e,t,i){if(!i)t.iterationCount=-1;t.from=t.valueFrom,t.to=t.valueTo,e.push(t)}function ot(e,t){if(t.length>0)Fe(e,e=>t.includes(e))}const ct=(e,t,i,s,n)=>Math.round(e+(i[n]+s)*t),ht=e=>Array.isArray(e)?Be(e,e=>e.x+","+e.y).join(" "):(null==e?void 0:e.toString())||"",ft=(e,t)=>Ve(t,e?16:2),ut=(e,t)=>Ve(t,e?8:1),dt=e=>e.playable||e.animationElement&&-1!==e.duration,gt=e=>{var t;return[e.keyTimes.slice(0),e.values.slice(0),null===(t=e.keySplines)||void 0===t?void 0:t.slice(0)]},pt=(e,t,i)=>Math.floor(Math.max(0,e-t)/i);var mt=e=>class extends e{getAnimateShape(e){const t=[],i=this.animations,s=i.length;let n=0;while(n<s){const s=i[n++];if(dt(s))switch(s.attributeName){case"r":case"cx":case"cy":if(k.circle(e)){t.push(s);break}case"rx":case"ry":if(k.ellipse(e))t.push(s);break;case"x1":case"x2":case"y1":case"y2":if(k.line(e))t.push(s);break;case"points":if(k.polyline(e)||k.polygon(e))t.push(s);break;case"x":case"y":case"width":case"height":if(k.rect(e))t.push(s);break}}return t}getAnimateTransform(e){const t=[],i=this.animations,s=i.length;let n=0;while(n<s){const s=i[n++];if(SvgBuild.isAnimateTransform(s)&&s.duration>0)if(t.push(s),SvgBuild.asAnimateMotion(s))s.framesPerSecond=null==e?void 0:e.framesPerSecond}return t}getAnimateViewRect(e){if(!e)e=this.animations;const t=[],i=e.length;let s=0;while(s<i){const i=e[s++];if(dt(i))switch(i.attributeName){case"x":case"y":t.push(i);break}}return t}animateSequentially(e,t,i,s){var n,a,r;let l,o=9;if(s){if(s.keyTimeMode)o=s.keyTimeMode;l=s.precision}const c=this.animations;for(const s of[e,t]){const e=s===t;if(!s||0===s.length||!e&&Ve(o,4)||e&&Ve(o,32))continue;const h=[],f={},u=new Set;let d=0;const g=e=>{Ce(f,e.attributeName).push(e),++d};{const e=[],t=s.length;for(let i=0;i<t;++i){const n=s[i];if(n.setterType)g(n);else{const a=n.getTotalDuration();for(let r=0;r<t;++r){const t=s[r];if(i!==r&&n.attributeName===t.attributeName&&n.group.id<t.group.id&&n.fillReplace&&!t.evaluateEnd)if(t.setterType){if(n.delay===t.delay){e[i]=n;break}}else if(!t.evaluateStart&&!t.evaluateEnd)if(n.delay===t.delay&&(!t.fillReplace||-1===t.iterationCount||a<=t.getTotalDuration())||t.fillBackwards&&n.delay<=t.delay&&(t.fillForwards||n.fillReplace&&a<=t.delay)||n.animationElement&&!t.animationElement&&(n.delay>=t.delay&&a<=t.getTotalDuration()||t.fillForwards)){e[i]=n;break}}}}const i=[];let n=0;while(n<t){const t=s[n];if(e[n++])if(!t.fillReplace)t.setterType=true,g(t);else i.push(t);else if(!t.setterType)h.push(t),u.add(t.group.name)}ot(c,i)}const p=h.length;if(p+d>1||1===p&&(h[0].alternate||void 0!==h[0].end)){const t={},d={},g=new SvgAnimationIntervalMap(s),m={},v=new Map,y=e?new Map:void 0,S={},b=new Set,k={},T=new Map,A=e?new Map:void 0,x={},R={},V=new Map;let E,_,P=0,N=-1;for(let e=0;e<p;++e){const i=h[e],s=i.group.ordering;if(s)Fe(s,e=>!u.has(e.name));const n=i.attributeName;let a=t[n];if(!a)a=new Map,t[n]=a,d[n]=[];const r=i.delay,l=a.get(r)||[];l.push(i),d[n].push(i),a.set(r,l)}for(const e in t){const i=new Map,s=t[e],n=Oe(Array.from(s.keys())),a=n.length;let r,l=0;while(l<a){const e=n[l++],t=s.get(e),a=t.length;r=0;while(r<a)P=Math.max(P,t[r++].getTotalDuration(true));i.set(e,t.reverse())}t[e]=i,d[e].reverse()}for(const s in t){const a=new Map;if(m[s]=a,!e){let e;if(i)e=i.getBaseValue(s);else if(e=this[s],void 0===e&&"function"==typeof this.getBaseValue)e=this.getBaseValue(s);if(_e(e))x[s]=e}const r=f[s]||[],l=[],c=[],h=[];for(const[e,i]of t[s].entries())c.push(e),h.push(i);let u,p,T,A=-1,E=0,_=1/0;const N=(t,i)=>{if(b.add(t),t.addState(8),T=t,t.fillForwards){G(E,u,t.type,t);const{name:e,ordering:i}=t.group;if(i){const s=t.getTotalDuration(),n=i.length;let a=0;while(a<n){const t=i[a++];if(t.name===e)return true;else if(SvgAnimationIntervalMap.getGroupEndTime(t)>=s)return false}}}else{if(t.fillFreeze)G(E,u,t.type,t);if(void 0!==i){let s=A;const n=M(E,E+1);if(void 0!==n&&t.fillReplace&&i>E&&0===l.length){if(s=He(a,s,n),e)Ue(V,t.type,s);u=n,A=s}}B()}return false},M=(t,i)=>{var n;let o=null===(n=Je(R,s))||void 0===n?void 0:n.value;return Fe(r,e=>e.delay>=t&&e.delay<i,i=>{const s=i.to;if(i.animationElement)nt(l);if(0===l.length)u=s;if(G(i.delay,s,i.type,i),i.delay===t)o=e?s:qe(s);else A=et(a,i,e),E=i.delay}),o},B=(e,t)=>{if(l.length>0)Fe(l,e=>e.getTotalDuration()<=E,i=>{if(i.addState(8),i.fillForwards)if(G(i.getTotalDuration(),i.valueTo,i.type,i),void 0!==e&&void 0!==t){const s=c.length;let n,a=e;while(a<s){if(a!==e)t=-1;const s=h[a++],r=s.length;n=t+1;while(n<r){const e=s[n++];if(i.group.id>e.group.id)e.addState(8)}}}})},G=(t,i,n=0,a)=>{if(!e)i=qe(i);const o=Je(R,s);if(""!==i&&(!o||t>=o.time))Ce(R,s).push({key:n,value:i,time:t});if(a&&SvgBuild.isAnimate(a)&&!a.fillReplace)if(a.fillForwards){Fe(r,e=>e.group.id<a.group.id||e.delay<t),l.length=0;let e,i=0;while(i<h.length){const t=h[i++];e=0;while(e<t.length){const i=t[e++];if(i.group.id<a.group.id)i.addState(8)}}}else if(a.fillFreeze)nt(l)},C=(e,t,i)=>{if(p&&!e){if(void 0===i)i=w.typeAsValue(p.type);if(A=He(a,t,i),t!==A)Ue(V,p.type,A)}p=void 0},F=d[s].find(e=>e.fillBackwards);if(F){if(u=We(F,F.values,0,0),A=He(a,0,u),e)Ue(V,F.type,0),p=F;let t=true;for(const e of d[s])if(e.group.id>F.group.id&&e.delay<=F.delay){t=false;break}const i=F.getTotalDuration(),n=[];for(let e=0;e<c.length;++e){const s=h[e];for(let a=0;a<s.length;++a){const o=s[a];if(t)if(o===F&&(0!==e||0!==a)){s.splice(a--,1),c.unshift(F.delay),h.unshift([F]);continue}else if(o.group.id<F.group.id&&(F.fillForwards||o.getTotalDuration()<=i)){if(o.fillForwards)o.setterType=true,r.push(o);n.push(o);continue}if(o.animationElement&&o.delay<=F.delay)s.splice(a--,1),it(l,o)}}for(let e=0;e<c.length;++e){const t=h[e];if(n.length>0)for(let e=0;e<t.length;++e)if(n.includes(t[e]))t.splice(e--,1);if(0===t.length)h.splice(e,1),c.splice(e--,1)}F.addState(1)}if(!e){const e=x[s];if(!R[s]&&void 0!==e)G(0,e,0);if(void 0===u)u=(null===(n=Je(R,s))||void 0===n?void 0:n.value)||e}tt(r);{let t;if(Fe(r,e=>e.delay<=c[0],i=>{const n=SvgBuild.isAnimate(i)&&i.fillForwards,r=i.delay;if(r<c[0]&&(!F||n))if(F&&n)G(r,i.to,i.type);else{const n=r-1;if(!t){if(!a.has(0)){const t=e&&SvgBuild.isAnimateTransform(i)?w.typeAsValue(i.type):x[s];if(void 0!==t)et(a,i,e,0,t),et(a,i,e,n,t)}else if(!e)et(a,i,e,n,u)}else et(a,t,e,n);A=et(a,i,e),E=r,t=i}}),t)et(a,t,e,c[0]-1)}e:{const t=c.length;for(let i=0;i<t;++i){let n=h[i],f=c[i];for(let d=0;d<n.length;++d){const m=n[d];if(m.hasState(8,32)||m.hasState(2)&&m.animationElement)continue;const S=-1===m.iterationCount,b=m.duration,T=m.iterationCount;let F,O,L;if(!S){if(F=m.getTotalDuration(),F<=A){if(m.fillReplace)m.addState(32);else it(l,m);continue}}else F=f+b;if(S)O=Math.ceil((P-f)/b),L=0;else O=Math.ceil(T),L=T-Math.floor(T);if(r.length>0&&E>0&&E<f)M(E,f);if(-1!==A&&A<f)A=He(a,f-1,u),E=f;_=1/0;const I=m.group.ordering;if(I&&I.length>1){let e=true,n=0;while(n<I.length){const t=I[n++];if(t.name===m.group.name){e=false;break}else if(!t.paused&&E<=t.delay&&t.attributes.includes(s))break}if(e)t:{n=i+1;while(n<t){const e=h[n++],t=e.length;let i=0;while(i<t){const t=e[i++];if(t.group.ordering){_=t.delay;break t}else if(t.getTotalDuration()<=F){if(t.fillFreeze)tt(r,t);t.addState(8)}else if(t.delay<F)it(l,t)}}}}else for(let e=i+1;e<t;++e){const t=c[e];if(t!==1/0){const i=h[e];if(i.length>0&&!i.every(e=>e.hasState(8,32))){_=t;break}}}const q=E;let X,z=A+1,D=Math.min(_,m.end||1/0);if(m.animationElement&&r.length>0){const t=Math.min(_,F,D);if(X=r.find(e=>e.delay>=E&&e.delay<=t),X){switch(X.delay){case E:if(u=X.to,G(E,u,X.type,X),X.group.id>m.group.id){if(e&&p)C(m.additiveSum,Math.max(f-1,A));A=et(a,X,e,Math.max(X.delay,A),u),D=-1}break;case _:X.addState(16);break;default:D=X.delay,X.addState(16);break}Fe(r,e=>e!==X),m.addState(2)}}let U,W=false;if(D>A){if(e){if(p)C(m.additiveSum,Math.max(f-1,A)),z=A+1;u=w.typeAsValue(m.type),G(E,u,m.type)}let r=f===1/0||(-1!==A||m.hasState(1))&&!(0===i&&0===d)||m.hasState(4);W=true;t:{const e=Je(R,s);for(let i=pt(E,f,b);i<O;++i){let s,c,h;if(m.evaluateStart||m.evaluateEnd){[s,c,h]=gt(m);const e=n.length;if(m.evaluateStart){const t=l.concat(n.slice(d+1,e)).filter(e=>!!e.animationElement&&e.delay<D);if(t.length>0){at(t,E),[s,c,h]=Ke(g,R,x,i,m,s,c,h,u,t,true);for(let e=0;e<t.length;++e){const i=t[e];if(i.hasState(2)&&n.includes(i))it(l,i)}}}if(m.evaluateEnd)if(m.getIntervalEndTime(E)<D&&(l.length>0||d<e-1)){const t=l.filter(e=>!!e.animationElement);let a=d+1;while(a<e){const e=n[a++];if(e.animationElement){if(!t.includes(e))t.push(e);it(l,e)}}if(t.length>0)st(t,E),[s,c,h]=Ke(g,R,x,i,m,s,c,h,u,t,false)}Qe(g,R,x,m,u,s,c,h)}else({keyTimes:s,values:c,keySplines:h}=m);const p=s.length;for(let n=0;n<p;++n){const l=s[n];let d=-1,g=We(m,c,i,n,u);if(i===O-1&&L>0)if(L===l)L=-1;else if(n===p-1)d=F,E=d,g=Ye(L,s[n-1],We(m,c,i,n-1,u),l,g),L=-1;else if(L>l)for(let e=n+1;e<p;++e)if(L<=s[e]){d=F,E=d,g=Ye(L,l,g,s[e],We(m,c,i,e,u)),L=-1;break}if(-1===d){if(d=ct(f,b,s,i,n),d<0||d<A)continue;if(d===D)W=i===O-1&&n===p-1,E=d;else{const e=e=>[A,U]=$e(m,E,u,s,c,h,f,i,n,e,o,a,v,y);if(f<0&&-1===A){if(d>0)E=0,e(0)}else if(d>D){if(r&&A+1<D)e(A);E=D,e(D+(D===_&&!a.has(D-1)?-1:0)),W=false;break t}else if(r){if(m.hasState(1))E=q;if(f>=A)d=Math.max(f,A+1),E=f;else if(d===A)E=d,d=A+1;else e(A),E=Math.max(d,A);r=false}else{if(E=d,i>0&&0===n&&m.accumulateSum){Ze(m,d,h,n,o,v,y),A=d;continue}d=Math.max(d,A+1)}}}if(d>A){if(n===t-1&&!m.accumulateSum&&(i<O-1||m.fillReplace&&(!e||g!==e.value)))--d;A=He(a,d,g),Ze(m,A,h,n,o,v,y),U=g}if(!W||-1===L)break t}}}B(i,d)}if(void 0!==U)if(u=U,e)Ue(V,m.type,z,A),p=m;if(X){if(X.hasState(16))U=X.to,A=et(a,X,e,X.delay,U),E=X.delay,G(E,U,X.type,X);else if(m.hasState(32))Ue(V,A,X.type);nt(l),W=true}if(Fe(r,e=>e.delay>=q&&e.delay<=E,e=>{if(G(e.delay,e.to,e.type,e),e.animationElement)nt(l)}),S)if(W){if(!X){k[s]=m;break e}}else{l.length=0,l.push(m);continue}if(W){if(!S&&N(m,_))break e;for(let e=i;e<t;++e)if(c[e]<E){const t=h[e];for(let e=0;e<t.length;++e){const i=t[e],s=i.getTotalDuration();if(s>E&&!i.hasState(2,8,32))it(l,i);else if(!i.fillReplace)G(s,i.valueTo,i.type,i)}c[e]=1/0,t.length=0}if(l.length>0&&E<_){st(l);const e=l.find(e=>e.delay<=E);if(e)e.removeState(2,1),e.addState(4),nt(l,e),f=e.delay,n=[e],d=-1}}else it(l,m)}}if(l.length>0){st(l);while(l.length>0){const t=l.shift(),{delay:i,duration:n}=t,r=A-i;let c=1/0;const h=()=>{let[h,f,d]=gt(t);const p=pt(E,i,n);if(l.length>0){if(t.evaluateStart){const e=l.slice(0);at(e,E),[h,f,d]=Ke(g,R,x,p,t,h,f,d,u,e,true)}if(t.evaluateEnd&&t.getIntervalEndTime(E)<c)[h,f,d]=Ke(g,R,x,p,t,h,f,d,u,l,false)}Qe(g,R,x,t,u,h,f,d);const S=A+1;let b=Math.floor(r/n),k=false;const T=(e,n)=>$e(t,E,u,h,f,d,i,b,e,n,o,m[s],v,y);do{const e=h.length;for(let s=0;s<e;++s){let r=ct(i,n,h,b,s);if(!k&&r>=A)[A,u]=T(s,A),k=true;if(k)if(r>=c){if(c>A){const e=t.fillReplace||-1===t.iterationCount;if([A,u]=T(s,c-(e?1:0)),e)u=We(t,f,b,0,u),A=He(a,c,u);E=c}}else if(r>A){if(E=r,s===e-1&&r<c)--r;u=We(t,f,b,s,u),A=He(a,r,u),Ze(t,A,d,s,o,v,y)}}}while(A<c&&++b);if(e)Ue(V,t.type,S,A)};if(-1===t.iterationCount){if(r>0&&r%t.duration!=0)c=i+t.duration*Math.ceil(r/n),h();k[s]=t;break e}else if(c=Math.min(i+t.duration*t.iterationCount,t.end||1/0),c>A)if(h(),N(t))break e}}if((null==T?void 0:T.fillReplace)&&void 0===k[s]){let t,i=0;if(R[s]){const e=Je(R,s);if(e)({key:i,value:t}=e)}else if(e)i=Array.from(V.values()).pop(),t=w.typeAsValue(i);else t=x[s];if(void 0!==t&&!Pe(a.get(A),t))if(A=He(a,A,t),e)Ue(V,i,A)}}S[s]=A}{const t=new Set;let s=0;for(const e in m){let i=0;for(const s of m[e].keys())t.add(s),i=s;s=Math.max(s,i),null===(a=R[e])||void 0===a||a.sort((e,t)=>{if(e.time===t.time)return 0;else return e.time<t.time?-1:1})}if(Ee(k)){const e=[],i=[];for(const t in k){const s=k[t];e.push(s.delay),i.push(s.duration)}const n=e[0];if(0===b.size&&1===new Set(e).size&&1===new Set(i).size&&n===t.values().next().value)N=n;else if(i.length>1&&i.every(e=>e%250==0))s=Re(i,s,e);else{const e=i[0];if((s-n)%e!=0)s=e*Math.ceil(s/e)}}if(-1===N)for(const i in m){const n=k[i];if(n){let a=S[i];if(a<s){const r=m[i],l=n.delay,c=a+1;let h=Array.from(r.values()).pop();const[f,u,d]=gt(n);Qe(g,R,x,n,h,f,u,d);const p=f.length;let b=Math.floor((a-l)/n.duration);do{let e=false;for(let i=0;i<p;++i){let c=ct(l,n.duration,f,b,i);if(!e&&c>=a)[a,h]=$e(n,a,h,f,u,d,l,b,i,a,o,r,v,y),t.add(a),e=true;if(e&&c>a){if(i===p-1&&c<s)--c;h=We(n,u,b,i,h),a=He(r,c,h),Ze(n,c,d,i,o,v,y),t.add(a)}}}while(a<s&&++b);if(S[i]=a,e)Ue(V,n.type,c,a)}}}const n=Oe(Array.from(t));if(i||e){let e=false;for(const t in m){const i=m[t];if(!i.has(0)){const s=x[t];if(void 0!==s){const t=i.keys().next().value-1;if(i.set(0,s),i.set(t,s),!n.includes(0))n.push(0),e=true;if(!n.includes(t))n.push(t),e=true}}}if(e)Oe(n)}if(!e)for(const t in m){const i=m[t],s=i.keys().next().value,a=i.values().next().value,r=n.length;let l=0;while(l<r){const r=n[l++];if(r<=S[t]){if(!i.has(r)){if(g.paused(t,r))if(r<s)i.set(r,a);else{let e=g.get(t,r);if(void 0!==e)if(e=qe(e,true),""!==e){i.set(r,e);continue}}Le(i,t,r,g,e)}}else break}}E=De(m,n,R)}if(-1===N&&Ee(k)){const t={},i=[],s=[],n=[];for(const e in k){const t=k[e];n.push(t.duration),i.push(t)}const a=Re(n);for(let e=0;e<i.length;++e){const n=i[e],l=n.attributeName;t[l]=new Map;let c=null!==(r=m[l].get(S[l]))&&void 0!==r?r:x[l];const[h,f,u]=gt(n);Qe(g,R,x,n,c,h,f,u);let d=0;const p=h.length;let v=0;do{for(let e=0;e<p;++e){let i=ct(0,n.duration,h,v,e);if(e===h.length-1&&i<a)--i;if(c=We(n,f,v,e,c),d=He(t[l],i,c),Ze(n,d,u,e,o,T,A),!s.includes(d))s.push(d)}}while(d<a&&++v)}if(i.every(e=>e.alternate)){let e=-1;for(const i in k){const n=t[i],r=Array.from(n.keys()),l=Array.from(n.values()).reverse(),o=r.length;for(let t=0;t<o;++t){const i=r[t];if(0!==i){e=a+i;const r=T.get(i);if(r)T.set(e,r);if(e=He(n,e,l[t]),!s.includes(e))s.push(e)}}}}Oe(s);for(const i in t){const n=t[i],a=s.length;let r=0;while(r<a){const t=s[r++];if(!n.has(t))Le(n,i,t,g,e)}}_=De(t,s,R)}if(E||_){ot(c,h);const t=Array.from(V.entries()),s=Me(h,e=>SvgBuild.isAnimateTransform(e)?w.typeAsName(e.type):e.attributeName,"-",false),n=this.parent;for(const a of[E,_])if(a){const r=a===E,h=r?v:T,f=r?y:A;if(ft(e,o)){const s=[];if(e){const e=[];if(r){const i=Array.from(a.entries());let s=t[0][1];const n=t.length,r=i.length;for(let a=0,l=0,o=0;a<n;++a){const c=a<n-1?t[a+1][1]:-1;if(s!==c){const n=new Map;for(let e=o;e<r;++e){const r=i[e][0];if(r>=t[l][0]&&r<=t[a][0])n.set(r,new Map([[s,i[e][1].values().next().value]])),o=e;else if(r>t[a][0])break}e.push(n),s=c,l=a+1}}}else if(k.transform){const t=new Map;for(const[e,i]of a.entries())t.set(e,new Map([[k.transform.type,i.values().next().value]]));e.push(t)}else continue;let i=0;const n=e.length;for(let t=0;t<n;++t){const a=Array.from(e[t].entries()),l=a[0];let o=l[0];const u=l[1];if(1===a.length)if(t<n-1)a.push([e[t+1].keys().next().value,u]);else a.push([o+1,u]);const d=a.length,g=a[d-1][0];let p=g-o;const m=new SvgAnimateTransform;m.type=u.keys().next().value;for(let e=0;e<d;++e){const t=a[e];if(s.push(h.get(t[0])||""),m.type!==SVGTransform.SVG_TRANSFORM_ROTATE){const i=f.get(t[0]);if(i)Ce(m,"transformOrigin")[e]=i}t[0]-=o}for(const[e,t]of Ie(a))m.keyTimes.push(e),m.values.push(t.values().next().value);if(o-=i,o>1)m.delay=o;else if(1===o&&(p+1)%10==0)++p;m.duration=p,m.keySplines=s,m.synchronized={key:t,value:""},i=g,lt(c,m,r)}}else{const e=Array.from(a.entries()),t=-1!==N?N:0;let o,f=0;while(f<e.length){const i=e[f++];s.push(h.get(i[0])||""),i[0]-=t}if(i){const t=ze(Ie(e),i,n,R,l);if(t){o=new SvgAnimate,o.attributeName="d";const e=t.length;let i=0;while(i<e){const e=t[i++];o.keyTimes.push(e.key),o.values.push(e.value.toString())}}else continue}else{const e=new SvgAnimateTransform;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE;for(const[t,i]of a.entries()){const s=i.get("x")||0,a=i.get("y")||0;e.keyTimes.push(t),e.values.push(n?n.refitX(s)+" "+n.refitX(a):s+" "+a)}o=e}o.delay=t,o.keySplines=s,o.duration=e[e.length-1][0],lt(c,o,r)}}else if(ut(e,o)){const o=Array.from(a.entries()),u=o.length-1;for(let a=0;a<u;++a){const[u,d]=o[a],[g,p]=o[a+1];let m,v=s;if(e){const e=new SvgAnimateTransform;if(r){const i=t.length-1;for(let s=0;s<i;++s){const i=t[s],n=t[s+1];if(i[1]===n[1]&&u>=i[0]&&g<=n[0]){e.type=i[1];break}else if(g-u==1&&g===n[0]){e.type=n[1];break}}}else if(k.transform)e.type=k.transform.type;if(0===e.type)continue;e.values=[d.values().next().value,p.values().next().value];const i=f.get(g);if(i)e.transformOrigin=[i];m=e}else if(i){const e=ze([[u,d],[g,p]],i,n,R,l);if(e)m=new SvgAnimate,m.attributeName="d",m.values=Ge(e,e=>e.value.toString());else continue}else{const e=new SvgAnimateTransform;e.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,e.values=[rt(d,n),rt(p,n)],v+=a,m=e}if(r)m.delay=0===a?u:0;m.duration=g-u,m.keyTimes=[0,1],m.synchronized={key:a,value:v};const y=h.get(g);if(y)m.keySplines=[y];lt(c,m,r)}}}}}}}};const{isPercent:vt,parseAngle:yt}=squared.lib.css,{getNamedItem:St}=squared.lib.dom,{truncateFraction:bt}=squared.lib.math,{isEqual:kt,isNumber:Tt,iterateArray:wt,plainMap:At}=squared.lib.util,xt=(e,t,i,s)=>!!e&&e.key===t&&e.rotate===s&&kt(e.value,i);class SvgAnimateMotion extends SvgAnimateTransform{constructor(e,t){if(super(e,t),this.path="",this.distance="0%",this.rotate="auto 0deg",this.motionPathElement=null,this.type=SVGTransform.SVG_TRANSFORM_TRANSLATE,this._offsetLength=0,this._keyPoints=[],t){this.setAttribute("path");const e=St(t,"rotate");switch(e){case"auto":break;case"auto-reverse":this.rotate="auto 180deg";break;default:if(Tt(e))this.rotate=parseFloat(e)+"deg";break}wt(t.children,e=>{if("mpath"===e.tagName){let t=E(e);if(t){if(k.use(t))t=E(t);if(t&&k.shape(t))return this.motionPathElement=t,true}}}),this.setCalcMode()}else if(e){const t=/path\("([^"]+)"\)/.exec(R(e,"offset-path"));if(t)this.path=t[1];const i=R(e,"offset-distance");if(""!==i)this.distance=i;const s=R(e,"offset-rotate");if(""!==s&&"auto"!==s)this.rotate=s}}setCalcMode(){const e=this.animationElement;if(e){const t=St(e,"calcMode")||"paced";switch(t){case"paced":case"discrete":case"spline":super.setCalcMode("translate",t);break;case"linear":{const t=SvgAnimateTransform.toFractionList(St(e,"keyPoints"),";",false);let i=super.keyTimes;if(0===i.length&&-1!==this.duration)i=SvgAnimateTransform.toFractionList(St(e,"keyTimes")),this.length=0,super.keyTimes=i;if(t.length===i.length)this._keyPoints=t;break}}}}addKeyPoint(e){if(void 0===this._offsetPath){const t=e.key;if(t>=0&&t<=1){const i=super.keyTimes,s=this._keyPoints;if(i.length===s.length){const n=e.value;let a=vt(n)?parseFloat(n)/100:Tt(n)?parseFloat(n)/this.offsetLength:NaN;if(!isNaN(a)){a=Math.min(a,1);const n=i.findIndex(e=>e===t);if(-1!==n)i[n]=e.key,s[n]=a;else i.push(e.key),s.push(a)}}}}}setOffsetPath(){if(void 0===this._offsetPath&&this.path){let e=SvgBuild.getOffsetPath(this.path,this.rotate),t=e.length;if(t>0){const{duration:i,keyPoints:s,rotateData:n,framesPerSecond:a}=this;let r=1;if(i>=t){r=i/t;const s=t-1;let n=1;while(n<s)e[n++].key*=r;e[s].key=i}else if(i>0){const s=new Array(i),n=t/i;let a,r=0;while(r<i)a=e[Math.floor(r*n)],a.key=r,s[r++]=a;const l=e.pop();if(a.value!==l.value)l.key=i,s.push(l);e=s,t=s.length}const l=a?1e3/a:0;if(s.length>0){const n=t-1,a=super.keyTimes,o=[];if(s.length>1){let t;const c=a.length-1;for(let h=0;h<c;++h){const c=a[h],f=bt(c*i),u=bt((a[h+1]-c)*i),d=s[h],g=s[h+1];if(0===u){const i=f,{value:s,rotate:a}=e[Math.floor(g*n)];if(!xt(t,i,s,a))t={key:i,value:s,rotate:a},o.push(t)}else{let i=f,s=0;if(d===g){const{value:a,rotate:c}=e[Math.floor(d*n)];if(xt(t,f,a,c))s+=r,i+=l;for(;s<u;s+=r){const e=f+s;if(e>=i)if(o.push({key:e,value:a,rotate:c}),s<u-1)i+=l;else i=0}}else{const a=Math.floor(Math.min(d,g)*n),r=Math.floor(Math.max(d,g)*n),c=[];let h=a;while(h<=r)c.push(e[h++]);if(d>g)c.reverse();const p=c.length,m=u/p,v=c[0];if(xt(t,f,v.value,v.rotate))++s,i+=l;for(;s<p;++s){const e=f+s*m;if(e>=i){const t=c[s];if(t.key=e,o.push(t),s<p-1)i+=l;else i=0}}}o[o.length-1].key=f+u}}}else if(o.push(e[Math.floor(s[0]*n)]),0===a[0])o[0].rotate=0;this._offsetPath=o}else if(l>0){const i=[];for(let s=0;s<t;s+=l)i.push(e[Math.floor(s)]);const s=e.pop();if(i[i.length-1]!==s)i.push(s);this._offsetPath=i}else this._offsetPath=e;if(n){e=this._offsetPath;const t=n.length-1;for(let s=0,a=0;s<t;++s){const t=n[s],r=n[s+1],l=r.key,o=[];if(t.key===l)o.push(e[a++]);else{const t=Math.floor(bt(l*i));do{const i=e[a];if((null==i?void 0:i.key)<=t)o.push(i);else break}while(++a)}const c=t.value,h=r.value,f=yt(c.split(" ").pop()),u=yt(h.split(" ").pop());if(isNaN(f)||isNaN(u))continue;const d=c.startsWith("auto");if(c===h||f===u){const e=o.length;if(d){if(0!==f){let t=0;while(t<e)o[t++].rotate+=f}}else{let t=0;while(t<e)o[t++].rotate=f}}else{const e=u-f,t=o.length-1,i=e/t;let s=0;if(d){while(s<t)o[s].rotate+=f+s++*i;o[t].rotate+=f+e}else{while(s<t)o[s].rotate=f+s++*i;o[t].rotate=f+e}}}}this.keySplines=void 0,this.timingFunction=re.linear}}}reverseKeyPoints(){let e,t;if(this.validKeyPoints())t=this._keyPoints.slice(0).reverse(),e=At(super.keyTimes,e=>1-e).reverse();return{keyTimes:e,keyPoints:t}}validKeyPoints(){const e=this.keyPoints;return e.length>0&&e.length===super.keyTimes.length}set keyTimes(e){if(!this.path)super.keyTimes=e}get keyTimes(){this.setOffsetPath();const e=this._offsetPath;if(e){const t=this.duration;return At(e,e=>e.key/t)}return super.keyTimes}set values(e){if(!this.path)super.values=e}get values(){return this.setOffsetPath(),this._offsetPath?At(this._offsetPath,e=>`${e.value.x} ${e.value.y}`):super.values}set reverse(e){if(e!==this._reverse){const{keyTimes:t,keyPoints:i}=this.reverseKeyPoints();if(t&&i)this.length=0,this._keyPoints=i,super.keyTimes=t,super.reverse=e}}get reverse(){return this._reverse}set alternate(e){const t=this.iterationCount;if(e!==this._alternate&&(-1===t||t>1)){const{keyTimes:i,keyPoints:s}=this.reverseKeyPoints();if(i&&s){let n=super.keyTimes,a=this.keyPoints;const r=n.length;if(-1===t){let e=0;while(e<r)n[e]/=2,i[e]=.5+i[e++]/2;n=n.concat(i),a=a.concat(s),this.duration=2*this.duration}else{const e=n.slice(0),l=a.slice(0);let o;for(let c=0;c<t;++c)if(0===c){o=0;while(o<r)n[o++]/=t}else{const h=c*(1/t),f=c%2==0?e.slice(0):i.slice(0);o=0;while(o<r)f[o]=bt(h+f[o++]/t);n=n.concat(f),a=a.concat(c%2==0?l:s)}this.duration=this.duration*t,this.iterationCount=1}this._keyTimes=n,this._keyPoints=a,this._alternate=e}}}get alternate(){return this._alternate}set parent(e){this._parent=e;const t=this.parentContainer;if((null==t?void 0:t.requireRefit)&&this.path)this.path=SvgBuild.transformRefit(this.path,{container:t})}get parent(){return this._parent}get offsetPath(){return this._offsetPath}get playable(){return!this.paused&&-1!==this.duration&&!!this.path}get rotateValues(){return this.setOffsetPath(),this._offsetPath&&At(this._offsetPath,e=>e.rotate)}get keyPoints(){return this._keyPoints}get offsetLength(){return 0===this._offsetLength&&this.path?N(this.path):this._offsetLength}get instanceType(){return 229384}}const{getFontSize:Rt,getKeyframesRules:Vt,isAngle:Et,isCustomProperty:_t,hasCalc:Pt,parseAngle:Nt,parseVar:Mt}=squared.lib.css,{getNamedItem:Bt}=squared.lib.dom,{iterateArray:Gt,replaceMap:Ct,safeNestedArray:Ft,sortNumber:Ot}=squared.lib.util,Lt={"animation-delay":"0s","animation-duration":"0s","animation-iteration-count":"1","animation-play-state":"running","animation-direction":"normal","animation-fill-mode":"none","animation-timing-function":"ease"},It=Vt(),qt=new RegExp(`(ease|ease-in|ease-out|ease-in-out|linear|step-(?:start|end)|steps\\(\\d+,\\s+(?:start|end)\\)|${SvgAnimate.PATTERN_CUBICBEZIER}),?\\s*`,"g");function Xt(e,t){const i=R(e,t);if("animation-timing-function"===t){const e=[];let t;while(t=qt.exec(i))e.push(t[1]);return qt.lastIndex=0,e}return i.split(/\s*,\s*/)}function zt(e){return e.sort((e,t)=>{if(e.key!==t.key)return e.key<t.key?-1:1;else return 0})}function Dt(e){if("reverse"===e)return"auto 180deg";else if(/^reverse\s+/.test(e)){const t=e.split(" ")[1];return"auto "+(Et(t)?180+Nt(t,0):"0")+"deg"}return e}function Ut(e,t,i){var s;const n=null===(s=e["transform-origin"])||void 0===s?void 0:s.find(e=>e.key===i);return n?w.origin(t,n.value):void 0}function Wt(e,t,i){var s;if(i){const s=e.querySelector(`:scope > ${t}[lang="${i}"]`);if(s)return s.textContent.trim()||""}return(null===(s=e.querySelector(":scope > "+t))||void 0===s?void 0:s.textContent.trim())||""}var Yt=e=>class extends e{getTransforms(e){if(!e)e=this.element;return SvgBuild.filterTransforms(w.parse(e)||SvgBuild.convertTransforms(e.transform.baseVal))}getAnimations(e){var t,i;const s=[];if(!e)e=this.element;let n=0;const a=(e,t,i="")=>{if(""===i)++n;e.delay=t,e.group={id:n,name:i},e.parent=this,s.push(e)};Gt(e.children,t=>{var i,s;if(t instanceof SVGAnimationElement){const n=Bt(t,"begin"),r=""!==n?Ot(Ct(n.split(";"),e=>SvgAnimation.convertClockTime(e)).filter(e=>!isNaN(e))):[0];if(r.length>0)switch(t.tagName){case"set":for(let i=0;i<r.length;++i)a(new SvgAnimation(e,t),r[i]);break;case"animate":for(let i=0;i<r.length;++i)a(new SvgAnimate(e,t),r[i]);break;case"animateTransform":for(let s=0;s<r.length;++s){const n=new SvgAnimateTransform(e,t);if(SvgBuild.isShape(this)&&this.path)n.transformFrom=SvgBuild.drawRefit(e,this.parent,null===(i=this.viewport)||void 0===i?void 0:i.precision);a(n,r[s])}break;case"animateMotion":for(let i=0;i<r.length;++i){const n=new SvgAnimateMotion(e,t),l=n.motionPathElement;if(l)n.path=SvgBuild.drawRefit(l,this.parent,null===(s=this.viewport)||void 0===s?void 0:s.precision);a(n,r[i])}break}}});const r=Xt(e,"animation-name");let l=r.length;if(l>0){const s={},o=[],c=[];for(const t in Lt){let i=Xt(e,t);if(0===i.length)i.push(Lt[t]);while(i.length<l)i=i.concat(i.slice(0));i.length=l,s[t]=i}for(let h=0;h<l;++h){const l=It[r[h]],f=SvgAnimation.convertClockTime(s["animation-duration"][h]);if(l&&!isNaN(f)&&f>0){++n;const u={},d={},g="paused"===s["animation-play-state"][h],p=SvgAnimation.convertClockTime(s["animation-delay"][h])||0,m=s["animation-iteration-count"][h],v=s["animation-fill-mode"][h],y=r[h]+"_"+h,S=[];let b=true;c.push({name:y,attributes:S,paused:g,delay:p,duration:f,iterationCount:m,fillMode:v});for(const t in l){const i=parseFloat(t)/100,s=l[t];for(const t in s){let n=s[t];if(Pt(n))n=x(e,t,n);else if(_t(n))n=Mt(e,n);if(n)Ft(Lt[t]?d:u,t).push({key:i,value:n})}}if(u.transform){const i=zt(u.transform),s=i.length;let n=0;while(n<s){const s=i[n++],a=s.key,r=Ut(u,e,a)||w.origin(e);null===(t=w.parse(e,s.value))||void 0===t||t.forEach(e=>{const t=e.matrix;let i,s,n;switch(e.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:i="translate",s=t.e+" "+t.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:if(i="scale",s=t.a+" "+t.d+" "+(r?r.x+" "+r.y:"0 0"),r&&(0!==a||0!==r.x||0!==r.y))n={x:r.x*(1-t.a),y:r.y*(1-t.d)};break;case SVGTransform.SVG_TRANSFORM_ROTATE:i="rotate",s=e.angle+" "+(r?r.x+" "+r.y:"0 0");break;case SVGTransform.SVG_TRANSFORM_SKEWX:if(i="skewX",s=e.angle.toString(),r&&(0!==a||0!==r.y))n={x:r.y*t.c*-1,y:0};break;case SVGTransform.SVG_TRANSFORM_SKEWY:if(i="skewY",s=e.angle.toString(),r&&(0!==a||0!==r.x))n={x:0,y:r.x*t.b*-1};break;default:return}const l=Ft(u,i),o=l.findIndex(e=>e.key===a);if(-1!==o){const e=l[o];e.value=s,e.transformOrigin=n}else l.push({key:a,value:s,transformOrigin:n})})}delete u.transform,delete u["transform-origin"]}if("none"===R(e,"offset-path"))delete u["offset-distance"],delete u["offset-rotate"];else if(u["offset-rotate"]){const t=u["offset-rotate"];if(u["offset-distance"]||!u.rotate){let i=R(e,"offset-rotate");if(""===i||"auto"===i)i="auto 0deg";zt(t);const s=t[0],n=t[t.length-1];if(0!==s.key)t.unshift({key:0,value:i});if(1!==n.key)t.push({key:1,value:i});for(let e=1;e<t.length;++e){const i=t[e-1],s=t[e],n=Dt(i.value),a=Dt(s.value);if(i.value=n,s.value=a,n.split(" ").pop()!==a.split(" ").pop()){const r=n.startsWith("auto"),l=a.startsWith("auto");if(r&&!l||!r&&l){const r=(i.key+s.key)/2;t.splice(e++,0,{key:r,value:n}),t.splice(e++,0,{key:r,value:a})}}}if(!u["offset-distance"]){const i=new SvgAnimateMotion(e);i.duration=0,i.iterationCount=1,i.fillForwards=true,i.addKeyPoint({key:0,value:i.distance}),a(i,p,y);const s=t.length;let n=0;while(n<s){const e=t[n++],i=e.value;let s=Nt(i.split(" ").pop(),0);if(i.startsWith("auto"))s+=90;e.value=s+" 0 0"}u.rotate=t,delete u["offset-rotate"],b=false}}else delete u["offset-rotate"]}for(const t in u){let n;switch(t){case"offset-rotate":continue;case"offset-distance":n=new SvgAnimateMotion(e),n.rotateData=u["offset-rotate"];break;case"rotate":case"scale":case"skewX":case"skewY":case"translate":n=new SvgAnimateTransform(e),n.setType(t);break;default:n=new SvgAnimate(e),n.attributeName=t;break}a(n,p,y);const r=u[t],l=s["animation-direction"][h],c=s["animation-timing-function"][h];if(zt(r),"offset-distance"===t){const e=n;if(0!==r[0].key)e.addKeyPoint({key:0,value:e.distance});for(let t=0;t<r.length;++t)e.addKeyPoint(r[t]);if(1!==r.pop().key)e.addKeyPoint({key:1,value:e.distance});if(c)e.timingFunction=c}else{S.push(t);const s=[];let a=r.length;const l=new Array(a),o=new Array(a);for(let e=0;e<a;++e){const t=r[e],{key:h,value:f}=t;if(l[e]=h,o[e]=f,b&&e<a-1){const e=null===(i=d["animation-timing-function"])||void 0===i?void 0:i.find(e=>e.key===h);s.push((null==e?void 0:e.value)||c)}const u=t.transformOrigin;if(u&&SvgBuild.asAnimateTransform(n))Ft(n,"transformOrigin")[e]=u}if(b&&!s.every(e=>"linear"===e)){const i=[],r=[],c=[];a=l.length;for(let n=0;n<a;++n){const h=l[n],u=o[n];if(n<a-1){const a=s[n];if(""!==u&&a.startsWith("step")){const s=SvgAnimate.convertStepTimingFunction(t,a,l,o,n,Rt(e));if(s){const[e,t]=s,o=(l[n+1]-h)*f,u=e.length-(1===l[n+1]?1:0);let d=0;while(d<u){let s=(h+e[d]*o)/f;if(i.includes(s))s+=.001;i.push(s),r.push(t[d++]),c.push(re[a.includes("start")?"step-start":"step-end"])}continue}}c.push(SvgAnimate.convertTimingFunction(a))}i.push(h),r.push(u)}n.values=r,n.keyTimes=i,n.keySplines=c}else if(n.values=o,n.keyTimes=l,b)n.keySplines=s;else n.timingFunction=c}n.paused=g,n.duration=f,n.iterationCount="infinite"!==m?parseFloat(m):-1,n.fillForwards="forwards"===v||"both"===v,n.fillBackwards="backwards"===v||"both"===v,n.reverse=l.endsWith("reverse"),n.alternate=(-1===n.iterationCount||n.iterationCount>1)&&l.startsWith("alternate"),o.push(n)}}}c.reverse(),l=o.length;let h=0;while(h<l)o[h++].setGroupOrdering(c)}return s}getTitle(e){return Wt(this.element,"title",e)}getDesc(e){return!e&&Bt(this.element,"aria-describedby")||Wt(this.element,"desc",e)}set name(e){this._name=e}get name(){const e=this._name;return void 0===e?this._name=SvgBuild.setName(this.element):e}get transforms(){const e=this._transforms;return void 0===e?this._transforms=this.getTransforms():e}get animations(){const e=this._animations;return void 0===e?this._animations=this.getAnimations():e}get visible(){const e=R(this.element,"visibility");return"hidden"!==e&&"collapse"!==e&&"none"!==R(this.element,"display")}get opacity(){return R(this.element,"opacity")||"1"}};const{USER_AGENT:$t,isUserAgent:jt}=squared.lib.client;function Kt(e){if("svg"===e.tagName)if(jt(4))return e.parentElement instanceof HTMLElement;else if(jt(2))return!(e.parentElement instanceof HTMLElement);return false}var Ht=e=>class extends e{setRect(){const e=this.parent;let{x:t,y:i,width:s,height:n}=this;if(e)t=e.refitX(t),i=e.refitY(i),s=e.refitSize(s),n=e.refitSize(n);this.setBaseValue("x",t),this.setBaseValue("y",i),this.setBaseValue("width",s),this.setBaseValue("height",n)}getRectElement(){const e=this.rectElement||this.element;switch(e.tagName){case"svg":case"use":case"image":return e;default:return null}}set x(e){this._x=e}get x(){var e,t;return null!==(e=this._x)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.x.baseVal.value)||0}set y(e){this._y=e}get y(){var e,t;return null!==(e=this._y)&&void 0!==e?e:(null===(t=this.getRectElement())||void 0===t?void 0:t.y.baseVal.value)||0}set width(e){this._width=e}get width(){const e=this._width;if(void 0!==e)return e;else{const e=this.getRectElement();return e?Kt(e)?e.getBoundingClientRect().width:e.width.baseVal.value:0}}set height(e){this._height=e}get height(){const e=this._height;if(void 0!==e)return e;else{const e=this.getRectElement();return e?Kt(e)?e.getBoundingClientRect().height:e.height.baseVal.value:0}}};const{STRING:Zt}=squared.lib.regex,{cloneObject:Qt,iterateArray:Jt}=squared.lib.util,ei=new RegExp(Zt.LENGTH_PERCENTAGE);function ti(e,t,i,s){if(e){const n=t.aspectRatio,a=e.aspectRatio;if(i&&s){Qt(i,n);const{width:t,height:r}=n;if(t>0&&r>0){const i=t/r;let l=a.width||e.viewBox.width,o=a.height||e.viewBox.height,c=false,h=NaN,f=NaN;if(0===l&&0===o)({width:l,height:o}=A(e.element)),a.width=l,a.height=o,c=true;const u=l/o,d=l/t,g=o/r,p=R(s,"width"),m=R(s,"height");if(c)h=l,f=o;else{if(k.svg(s))try{h=s.width.baseVal.value,f=s.height.baseVal.value}catch(e){}if(!h&&!f)h=parseFloat(p),f=parseFloat(m)}const v=si(p),y=si(m),S=h/t,b=f/r;let T=v&&y;if(h>=t&&f>=r)n.unit=Math.min(S,b),T=false;else if(d!==g||c)n.unit=Math.min(d,g);if(v||y){if(h&&f){const{align:e,meetOrSlice:i}=s.preserveAspectRatio.baseVal;if(S===b){if(T)n.unit*=S;if(n.align=SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,t>r)n.alignX=true;else n.alignY=true}else{switch(i){case SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET:if(b<S){if(T)if(r>=t&&r>=o)n.unit=b;else n.unit*=b;n.alignX=true}else{if(T)if(t>=r&&t>=l)n.unit=S;else n.unit*=S;n.alignY=true}break;case SVGPreserveAspectRatio.SVG_MEETORSLICE_SLICE:if(b>S){if(T)if(r>=t&&r>=o)n.unit=b;else n.unit*=b;n.alignX=true,n.alignY=r>o}else{if(T)if(t>=r&&t>=l)n.unit=S;else n.unit*=S;n.alignX=t>l,n.alignY=true}break}n.align=e}n.meetOrSlice=i}}else if(u>i)n.position.x=(l-o*i)/2;else if(u<i)n.position.y=(o-l*(1/i))/2}}const{parent:r,position:l,unit:o,x:c,y:h}=a;n.parent.x=c+c*(o-1),n.position.x*=a.unit,n.position.x+=l.x-r.x,n.parent.y=h+h*(o-1),n.position.y*=o,n.position.y+=l.y-r.y,n.unit*=o}}function ii(e){do{if(SvgBuild.asSvg(e)&&e.documentRoot)return e;e=e.parent}while(void 0!==e)}const si=e=>ei.test(e);class SvgContainer extends squared.lib.base.Container{constructor(e){super(),this.element=e,this.aspectRatio={x:0,y:0,width:0,height:0,position:{x:0,y:0},parent:{x:0,y:0},unit:1,meetOrSlice:SVGPreserveAspectRatio.SVG_MEETORSLICE_UNKNOWN,align:SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN,alignX:false,alignY:false},this._clipRegion=[]}add(e,t){return e.parent=this,e.viewport=t||ii(this),super.add(e)}build(e){let t,i,s=true;if(e){if(t=e.targetElement||this.element,i=e.precision,false===(e=Object.assign(Object.assign({},e),{targetElement:void 0})).initialize)s=false}else t=this.element;const n=ii(this);let a,r;if(n)if(({element:a,contentMap:r}=n),void 0===i)i=n.precision;const l=function(e){do{if(e.hasViewBox())return e;e=e.parent}while(void 0!==e)}(this),o=this.aspectRatio;let c=false;if(this.clear(),Jt(t.children,t=>{let i;if(k.svg(t))i=new squared.svg.Svg(t,false),ti(l,i,t.viewBox.baseVal,t),c=true;else if(k.g(t))i=new squared.svg.SvgG(t),ti(l,i);else if(k.use(t)){const e=E(t,a,r);if(e)if(k.symbol(e))i=new squared.svg.SvgUseSymbol(e,t),ti(l,i,e.viewBox.baseVal,e),c=true;else if(k.g(e))i=new squared.svg.SvgUseG(e,t),ti(l,i);else if(k.image(e))i=new squared.svg.SvgImage(t,e);else if(k.shape(e)){const a=null==n?void 0:n.findFill(t);if(a)i=new squared.svg.SvgUseShapePattern(e,t,a),ti(l,i);else i=new squared.svg.SvgUseShape(e,t,s)}}else if(k.image(t))i=new squared.svg.SvgImage(t);else if(k.shape(t)){const e=null==n?void 0:n.findFill(t);if(e)i=new squared.svg.SvgShapePattern(t,e),ti(l,i);else i=new squared.svg.SvgShape(t,s)}if(i)this.add(i,n),i.build(e)}),SvgBuild.asSvg(this)&&(this.documentRoot||o.meetOrSlice))if(this.documentRoot){if(o.x<0||o.y<0)this.clipViewBox(o.x,o.y,o.width,o.height,i,true)}else{const{x:e,y:t}=this.parent.aspectRatio;this.clipViewBox(e,t,this.width+e,this.height+t,i,true)}else if(c&&this.hasViewBox()&&(0!==o.x||0!==o.y)){const{left:e,top:t}=SvgBuild.getBoxRect(this.getPathAll(false)),s=this.refitX(o.x),n=this.refitY(o.y);if(e<s||t<n)this.clipViewBox(e,t,this.refitSize(o.width),this.refitSize(o.height),i)}}hasViewBox(){return SvgBuild.asSvg(this)&&(!!this.element.viewBox.baseVal||this.documentRoot)||SvgBuild.asUseSymbol(this)&&!!this.symbolElement.viewBox.baseVal}clipViewBox(e,t,i,s,n,a){if(a)if(i-=e,s-=t,SvgBuild.asSvg(this)&&this.documentRoot)e=e<0?-1*e:0,t=t<0?-1*t:0;else e*=-1,t*=-1;this.clipRegion=SvgBuild.drawRect(i,s,e,t,n)}synchronize(e){this.each(t=>t.synchronize(e))}refitX(e){const t=this.aspectRatio;return(e-t.x)*t.unit-t.parent.x+t.position.x}refitY(e){const t=this.aspectRatio;return(e-t.y)*t.unit-t.parent.y+t.position.y}refitSize(e){return e*this.aspectRatio.unit}refitPoints(e){const t=this.aspectRatio.unit,i=e.length;let s=0;while(s<i){const i=e[s++];if(i.x=this.refitX(i.x),i.y=this.refitY(i.y),void 0!==i.rx&&void 0!==i.ry)i.rx*=t,i.ry*=t}if(SvgBuild.asSvg(this)&&this.aspectRatio.meetOrSlice){const{align:t,alignX:n,alignY:a,parent:r}=this.aspectRatio,{width:l,height:o}=this,{top:c,right:h,bottom:f,left:u}=SvgBuild.minMaxPoints(e,true);let d=0,g=0;if(n)d=-1*r.x;if(a)g=-1*r.y;let p=d,m=g;const v=()=>l/2-(h+u)/2,y=()=>l-u-h+d,S=()=>o/2-(c+f)/2,b=()=>o-c-f+g;switch(t){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:if(n)p-=d;if(a)m-=g;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:if(n)p-=d;if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:if(n)p-=d;if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:if(n)p+=v();if(a)m-=g;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:if(n)p+=v();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:if(n)p+=v();if(a)m+=b();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:if(n)p+=y();if(a)m-=g;break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:if(n)p+=y();if(a)m+=S();break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMAX:if(n)p+=y();if(a)m+=b();break}s=0;while(s<i){const t=e[s++];t.x+=p,t.y+=m}}return e}getPathAll(e=true){var t;const i=[];for(const s of e?this.cascade():this.children)if(SvgBuild.isShape(s)){const e=null===(t=s.path)||void 0===t?void 0:t.value;if(e)i.push(e)}return i}set clipRegion(e){if(""!==e)this._clipRegion.push(e);else this._clipRegion.length=0}get clipRegion(){return this._clipRegion.join(";")}get requireRefit(){const e=this.aspectRatio;return 0!==e.x||0!==e.y||1!==e.unit||0!==e.position.x||0!==e.position.y||0!==e.parent.x||0!==e.parent.y}get instanceType(){return 2}}const{parseColor:ni}=squared.lib.color,{extractURL:ai}=squared.lib.css,{getNamedItem:ri}=squared.lib.dom,{cloneObject:li}=squared.lib.util;function oi(e){const t=[],i=e.getElementsByTagName("stop"),s=i.length;let n=0;while(n<s){const e=i[n++],s=ni(ri(e,"stop-color"),parseFloat(ri(e,"stop-opacity")||"1"));if(s)t.push({color:s,offset:parseFloat(ri(e,"offset"))/100})}return t}function ci(e,...t){const i={};for(let s=0;s<t.length;++s){const n=t[s],a=e[n];if(a)i[n]=a.baseVal.value,i[n+"AsString"]=a.baseVal.valueAsString}return i}function hi(e){return Object.assign({type:"linear",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:oi(e)},ci(e,"x1","x2","y1","y2"))}function fi(e){return Object.assign({type:"radial",element:e,spreadMethod:e.spreadMethod.baseVal,colorStops:oi(e)},ci(e,"cx","cy","r","fx","fy","fr"))}class Svg extends(mt(Ht(Z(Yt(SvgContainer))))){constructor(e,t=true){if(super(e),this.element=e,this.documentRoot=t,this.definitions={clipPath:new Map,pattern:new Map,gradient:new Map},t)this.viewport=this;this.init()}build(e){this.precision=null==e?void 0:e.precision,this.setRect(),super.build(e)}synchronize(e){if(!this.documentRoot&&this.animations.length>0)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}findFill(e){if("string"!=typeof e)e=ai(V(e,"fill"))||"";if(""!==e){const t=this.definitions.pattern.get(e);if(t)return t;const i=document.getElementById(e.substring(1));if(i instanceof SVGPatternElement)return i}}findFillPattern(e){if("string"!=typeof e)e=ai(V(e,"fillPattern"))||"";let t;if(""!==e)if(t=this.definitions.gradient.get(e),!t){const i=document.getElementById(e.substring(1));if(i){if(k.linearGradient(i))t=hi(i);else if(k.radialGradient(i))t=fi(i);if(t)this.definitions.gradient.set(e,t)}}return t}init(){const e=this.element;if(this.documentRoot)li(e.viewBox.baseVal,this.aspectRatio),e.querySelectorAll("set, animate, animateTransform, animateMotion").forEach(t=>{var i;const s=E(t,e);if(s)null===(i=t.parentElement)||void 0===i||i.removeChild(t),s.appendChild(t)});this.setDefinitions(e),e.querySelectorAll("defs").forEach(e=>this.setDefinitions(e))}setDefinitions(e){const t=this.definitions;e.querySelectorAll("clipPath, pattern, linearGradient, radialGradient").forEach(e=>{const i="#"+e.id.trim();if("#"!==i)if(k.clipPath(e)){if(!t.clipPath.has(i))t.clipPath.set(i,e)}else if(k.pattern(e)){if(!t.pattern.has(i))t.pattern.set(i,e)}else if(k.linearGradient(e)){if(!t.gradient.has(i))t.gradient.set(i,hi(e))}else if(k.radialGradient(e))if(!t.gradient.has(i))t.gradient.set(i,fi(e))})}set contentMap(e){this.definitions.contentMap=e}get contentMap(){return this.definitions.contentMap}get viewBox(){return this.element.viewBox.baseVal||{x:0,y:0,width:0,height:0}}get instanceType(){return 18}}class SvgElement{constructor(e){this.element=e}build(e){}synchronize(e){}get instanceType(){return 4}}const{parseColor:ui}=squared.lib.color,{extractURL:di,getFontSize:gi,hasCalc:pi,isCustomProperty:mi,isLength:vi,isPercent:yi,parseUnit:Si,parseVar:bi}=squared.lib.css,{truncate:ki}=squared.lib.math,{STRING:Ti}=squared.lib.regex,{convertCamelCase:wi,isNumber:Ai,joinArray:xi,plainMap:Ri}=squared.lib.util,Vi={polygon:/polygon\(([^)]+)\)/,inset:new RegExp(`inset\\(${Ti.LENGTH_PERCENTAGE}\\s?${Ti.LENGTH_PERCENTAGE}?\\s?${Ti.LENGTH_PERCENTAGE}?\\s?${Ti.LENGTH_PERCENTAGE}?\\)`),circle:new RegExp(`circle\\(${Ti.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Ti.LENGTH_PERCENTAGE}\\s+${Ti.LENGTH_PERCENTAGE})?\\)`),ellipse:new RegExp(`ellipse\\(${Ti.LENGTH_PERCENTAGE}\\s+${Ti.LENGTH_PERCENTAGE}(?:\\s+at\\s+${Ti.LENGTH_PERCENTAGE}\\s+${Ti.LENGTH_PERCENTAGE})?\\)`)};var Ei=e=>class extends e{setStroke(){this.setAttribute("stroke"),this.setAttribute("stroke-width")}setPaint(e,t){var i,s;this.resetPaint(),this.setAttribute("color"),this.setAttribute("fill"),this.setAttribute("fill-opacity"),this.setAttribute("fill-rule"),this.setStroke(),this.setAttribute("stroke-opacity"),this.setAttribute("stroke-linecap"),this.setAttribute("stroke-linejoin"),this.setAttribute("stroke-miterlimit"),this.setAttribute("stroke-dasharray"),this.setAttribute("stroke-dashoffset"),this.setAttribute("clip-rule");const n=this.getAttribute("clip-path");if(""!==n&&"none"!==n){const a=di(n);if(a)this.clipPath=a;else if(null==e?void 0:e.length)for(const a in Vi){const r=Vi[a].exec(n);if(r){const{top:n,right:l,bottom:o,left:c}=SvgBuild.getBoxRect(e),h=l-c,f=o-n;switch(a){case"inset":{let e=0,s=this.convertLength(r[1],f),a=0,u=0;if(r[4])e=c+this.convertLength(r[4],h),a=l-this.convertLength(r[2],h),u=o-this.convertLength(r[3],f);else if(r[2])e=this.convertLength(r[2],h),a=l-e,u=o-(r[3]?this.convertLength(r[3],f):s),e+=c;else e=c+s,a=l-s,u=o-s;s+=n;const d=[{x:e,y:s},{x:a,y:s},{x:a,y:u},{x:e,y:u}];null===(i=this.parent)||void 0===i||i.refitPoints(d),this.clipPath=SvgBuild.drawPolygon(d,t);break}case"polygon":{const e=Ri(r[1].split(","),e=>{let t=c,i=n;return e.trim().split(" ").forEach((e,s)=>{if(0===s)t+=this.convertLength(e,h);else i+=this.convertLength(e,f)}),{x:t,y:i}});null===(s=this.parent)||void 0===s||s.refitPoints(e),this.clipPath=SvgBuild.drawPolygon(e,t);break}default:if("circle"===a||"ellipse"===a){const e=this.parent,i=h<f?h:f;let s,l;if("circle"===a)s=this.convertLength(r[1],i),l=s;else s=this.convertLength(r[1],h),l=this.convertLength(r[2],f);let o=c,u=n;const d=r.length;if(d>=4)o+=this.convertLength(r[d-2],i),u+=this.convertLength(r[d-1],i);if(e)o=e.refitX(o),u=e.refitX(u),s=e.refitSize(s),l=e.refitSize(l);this.clipPath=SvgBuild.drawEllipse(o,u,s,l,t)}break}break}}}}setAttribute(e){const t=this.element;let i=this.getAttribute(e);if(e=wi(e),""!==i){if(pi(i))i=x(t,e,i)||getComputedStyle(t)[e];else if(mi(i))i=bi(t,i)||getComputedStyle(t)[e];switch(e){case"strokeDasharray":i="none"!==i?xi(i.replace(/[,\s]+/g,",").split(","),e=>this.convertLength(e).toString(),", ",false):"";break;case"strokeDashoffset":case"strokeWidth":i=this.convertLength(i).toString();break;case"fill":case"stroke":{const s=di(i);if(s)this[e+"Pattern"]=s;else{let s;switch(i){case"none":case"transparent":case"rgba(0, 0, 0, 0)":this[e]="none";break;case"currentcolor":case"currentColor":s=ui(this.color||R(t,"color",true));break;default:s=ui(i);break}if(s)this[e]=s.value}return}}this[e]=i}}getAttribute(e){let t=R(this.element,e);if(""===t){if(this.patternParent)switch(e){case"fill-opacity":case"stroke-opacity":break;default:return t}let i=this.useParent||this.parent;while(void 0!==i){if(t=R(SvgBuild.isUse(i)?i.useElement:i.element,e),""!==t)break;i=i.parent}}return t}convertLength(e,t){if(Ai(e))return parseFloat(e);else if(vi(e))return Si(e,gi(this.element));else if(yi(e))return Math.round(("number"==typeof t?t:this.element.getBoundingClientRect()[t||"width"])*parseFloat(e)/100);return 0}resetPaint(){this.fill="black",this.fillPattern="",this.fillOpacity="1",this.fillRule="nonzero",this.stroke="",this.strokeWidth="1",this.strokePattern="",this.strokeOpacity="1",this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeMiterlimit="4",this.strokeDasharray="",this.strokeDashoffset="0",this.color="",this.clipPath="",this.clipRule=""}set strokeWidth(e){this._strokeWidth=e}get strokeWidth(){var e;const t=this.stroke;if(""!==t&&"none"!==t){const t=this._strokeWidth;if(""!==t)return(null===(e=this.parent)||void 0===e?void 0:e.requireRefit)?ki(this.parent.refitSize(parseFloat(t))):t}return""}};class SvgG extends(Ei(Yt(SvgContainer))){constructor(e){super(e),this.element=e}build(e){super.build(e),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}get instanceType(){return 34}}const{resolvePath:_i}=squared.lib.util;class SvgImage extends(Ht(Z(Yt(SvgElement)))){constructor(e,t){if(super(e),this.element=e,this.imageElement=null,t)this.imageElement=t,this.rectElement=t}build(){this.setRect()}extract(e){let{x:t,y:i,width:s,height:n,parent:a}=this;const r=e?SvgBuild.filterTransforms(this.transforms,e):this.transforms,l=r.length;if(l>0){r.reverse();let e=0;while(e<l){const a=r[e++],l=a.matrix,o=t;t=T.applyX(l,o,i),i=T.applyY(l,o,i);let c=this.rotateAngle;switch(a.type){case SVGTransform.SVG_TRANSFORM_SCALE:s*=l.a,n*=l.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(0!==a.angle){if(l.a<0)t+=l.a*s;if(l.c<0)t+=l.c*s;if(l.b<0)i+=l.b*n;if(l.d<0)i+=l.d*n;if(c)c+=a.angle;else c=a.angle}break}this.rotateAngle=c}this.transformed=r}if(a){if(this.imageElement){const e=this.element;t+=e.x.baseVal.value,i+=e.y.baseVal.value}t=a.refitX(t),i=a.refitY(i),s=a.refitSize(s),n=a.refitSize(n);do{if(SvgBuild.asSvg(a)||SvgBuild.isUse(a)){const e=a.x,s=a.y;if(a=a.parent,a){if(0!==e)t+=a.refitX(e);if(0!==s)i+=a.refitY(s)}}else a=a.parent}while(void 0!==a)}this.setBaseValue("x",t),this.setBaseValue("y",i),this.setBaseValue("width",s),this.setBaseValue("height",n)}set x(e){super.x=e}get x(){var e;return super.x||(null===(e=this.imageElement)||void 0===e?void 0:e.x.baseVal.value)||0}set y(e){super.y=e}get y(){var e;return super.y||(null===(e=this.imageElement)||void 0===e?void 0:e.y.baseVal.value)||0}set width(e){super.width=e}get width(){var e;return super.width||(null===(e=this.imageElement)||void 0===e?void 0:e.width.baseVal.value)||0}set height(e){super.height=e}get height(){var e;return super.height||(null===(e=this.imageElement)||void 0===e?void 0:e.height.baseVal.value)||0}get href(){const e=this.imageElement||this.element;return k.image(e)?_i(e.href.baseVal):""}get transforms(){const e=this._transforms;if(void 0===e){if(this._transforms=super.transforms,this.imageElement)this._transforms=this._transforms.concat(this.getTransforms(this.imageElement));return this._transforms}return e}get animations(){const e=this._animations;if(void 0===e){if(this._animations=super.animations,this.imageElement)this._animations=this._animations.concat(this.getAnimations(this.imageElement));return this._animations}return e}get instanceType(){return 8196}}const{getNamedItem:Pi}=squared.lib.dom,{equal:Ni,lessEqual:Mi,multipleOf:Bi,offsetAngleX:Gi,offsetAngleY:Ci,relativeAngle:Fi,truncateFraction:Oi}=squared.lib.math,{cloneArray:Li,convertInt:Ii,convertFloat:qi}=squared.lib.util;function Xi(e,t,i,s){const n=e[0],a=e[e.length-1];if(void 0!==i)switch(t){case"x":i-=n.start.x;break;case"x1":case"cx":return n.start.x=i,void(n.coordinates[0]=i);case"x2":return a.end.x=i,void(a.coordinates[0]=i)}if(void 0!==s)switch(t){case"y":s-=n.start.y;break;case"y1":case"cy":return n.start.y=s,void(n.coordinates[1]=s);case"y2":return a.end.y=s,void(a.coordinates[1]=s)}const r=e.length;for(let t=0;t<r;++t){const n=e[t],{coordinates:a,value:r}=n,l=a.length;for(let e=0,t=0;e<l;e+=2,++t){if(void 0!==i){if(!n.relative)a[e]+=i;r[t].x+=i}if(void 0!==s){if(!n.relative)a[e+1]+=s;r[t].y+=s}}}}function zi(e,t,i){const s=e.length;for(let n=0;n<s;++n){const s=e[n];if("A"===s.key.toUpperCase()){if(void 0!==t){const i=t-s.radiusX,a=2*t*(s.coordinates[0]<0?-1:1);if(s.radiusX=t,s.coordinates[0]=a,s.start.x=a,s.end.x=a,1===n){const t=e[0];t.coordinates[0]-=i,t.start.x-=i,t.end.x-=i}}if(void 0!==i)s.radiusY=i}}}function Di(e,t,i,s){const n=e.get("stroke-dashoffset",i,s);return n?parseFloat(n):t}function Ui(e,t,i,s){const n=e.get("stroke-dasharray",i,s);return n?SvgBuild.parseCoordinates(n):t}const Wi=e=>e?e.start+" "+e.end:"1 1";class SvgPath extends(Ei(Z(SvgElement))){constructor(e){super(e),this.element=e,this.name="",this.value="",this.baseValue="",this.init()}static extrapolate(e,t,i,s,n,a){const r=null==n?void 0:n.parent,l=!!s||!!(null==r?void 0:r.requireRefit),o=[];let c;const h=i.length;for(let f=0;f<h;++f){if("d"===e)o[f]=i[f];else if("points"===e){const e=SvgBuild.convertPoints(SvgBuild.parseCoordinates(i[f]));if(e.length>0)o[f]=n&&k.polygon(n.element)?SvgBuild.drawPolygon(e,a):SvgBuild.drawPolyline(e,a)}else if(t){if(!c)c=SvgBuild.getPathCommands(t);const s=parseFloat(i[f]);if(!isNaN(s)){const t=f<h-1?Li(c,[],true):c;switch(e){case"x":case"x1":case"x2":case"cx":Xi(t,e,s);break;case"y":case"y1":case"y2":case"cy":Xi(t,e,void 0,s);break;case"r":zi(t,s,s);break;case"rx":zi(t,s);break;case"ry":zi(t,void 0,s);break;case"width":for(const e of[1,2]){const i=t[e];switch(i.key){case"m":case"l":case"h":i.coordinates[0]=s*(i.coordinates[0]<0?-1:1);break;case"M":case"L":case"H":i.coordinates[0]=t[0].end.x+s;break}}break;case"height":for(const e of[2,3]){const i=t[e];switch(i.key){case"m":case"l":case"v":i.coordinates[1]=s*(i.coordinates[1]<0?-1:1);break;case"M":case"L":case"V":i.coordinates[1]=t[0].end.y+s;break}}break;default:o[f]="";continue}o[f]=SvgBuild.drawPath(t,a)}}if(o[f]){if(l)o[f]=SvgBuild.transformRefit(o[f],{transforms:s,parent:n,container:r,precision:a})}else o[f]=""}return o}build(e){var t;let i;if(null==e?void 0:e.transforms)i=SvgBuild.filterTransforms(e.transforms,null===(t=e.exclude)||void 0===t?void 0:t[this.element.tagName]);this.draw(i,e)}draw(e,t){let i,s;if(t)({residualHandler:i,precision:s}=t);const n=this.element,a=this.parent,r=this.patternParent,l=true===(null==a?void 0:a.requireRefit),o=2===(null==r?void 0:r.patternContentUnits);let c;if(this.transformed=void 0,k.path(n)){if(c=this.getBaseValue("d"),(null==e?void 0:e.length)||l||o){const t=SvgBuild.getPathCommands(c);if(t.length>0){let h=SvgBuild.getPathPoints(t);if(h.length>0){if(o)r.patternRefitPoints(h);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length>0)h=SvgBuild.applyTransforms(e,h,w.origin(this.element)),this.transformed=e}if(this.baseValue=SvgBuild.drawPath(SvgBuild.syncPathPoints(l?Li(t,[],true):t,l?Li(h,[],true):h,!!this.transformed),s),l)a.refitPoints(h),c=SvgBuild.drawPath(SvgBuild.syncPathPoints(t,h,!!this.transformed),s);else c=this.baseValue}}}if(""===this.baseValue)this.baseValue=c}else if(k.line(n)){let t=[{x:this.getBaseValue("x1"),y:this.getBaseValue("y1")},{x:this.getBaseValue("x2"),y:this.getBaseValue("y2")}];if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length)t=SvgBuild.applyTransforms(e,t,w.origin(this.element)),this.transformed=e}const h=()=>SvgBuild.drawPolyline(t,s);if(this.baseValue=h(),l)a.refitPoints(t),c=h();else c=this.baseValue}else if(k.circle(n)||k.ellipse(n)){const t=this.getBaseValue("cx"),h=this.getBaseValue("cy");let f,u;if(k.ellipse(n))f=this.getBaseValue("rx"),u=this.getBaseValue("ry");else f=this.getBaseValue("r"),u=f;let d=[{x:t,y:h,rx:f,ry:u}];if(o)r.patternRefitPoints(d);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e,f,u);if(e.length>0)d=SvgBuild.applyTransforms(e,d,w.origin(this.element)),this.transformed=e}const g=d[0],p=()=>SvgBuild.drawEllipse(g.x,g.y,g.rx,g.ry,s);if(this.baseValue=p(),l)a.refitPoints(d),c=p();else c=this.baseValue}else if(k.rect(n)){let t=this.getBaseValue("x"),h=this.getBaseValue("y"),f=this.getBaseValue("width"),u=this.getBaseValue("height");if(l||(null==e?void 0:e.length)){let d=[{x:t,y:h},{x:t+f,y:h},{x:t+f,y:h+u},{x:t,y:h+u}];if(o)r.patternRefitPoints(d);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length>0)d=SvgBuild.applyTransforms(e,d,w.origin(this.element)),this.transformed=e}if(this.baseValue=SvgBuild.drawPolygon(d,s),l)a.refitPoints(d),c=SvgBuild.drawPolygon(d,s);else c=this.baseValue}else{if(o)t=r.patternRefitX(t),h=r.patternRefitY(h),f=r.patternRefitX(f),u=r.patternRefitY(u);c=SvgBuild.drawRect(f,u,t,h,s),this.baseValue=c}}else if(k.polygon(n)||k.polyline(n)){let t=this.getBaseValue("points");if(o)r.patternRefitPoints(t);if(null==e?void 0:e.length){if("function"==typeof i)[this.transformResidual,e]=i.call(this,n,e);if(e.length>0)t=SvgBuild.applyTransforms(e,t,w.origin(this.element)),this.transformed=e}const h=()=>k.polygon(n)?SvgBuild.drawPolygon(t,s):SvgBuild.drawPolyline(t,s);if(this.baseValue=h(),l){if(!this.transformed)t=SvgBuild.clonePoints(t);a.refitPoints(t),c=h()}else c=this.baseValue}else c="";return this.value=c,this.setPaint([c],s),c}extendLength(e,t){if(""!==this.value)switch(this.element.tagName){case"path":case"line":case"polyline":{const i=SvgBuild.getPathCommands(this.value),s=i.length;if(s>0){const n=i[0],a=n.start,r=i[s-1],l=r.end,o=r.key.toUpperCase(),{leading:c,trailing:h}=e;let f=false;if("Z"!==o&&(a.x!==l.x||a.y!==l.y)){if(c>0){let e;if(n.value.length>1)e=n.value[1];else if(s>1)e=i[1].start;if(e){const t=n.coordinates;if(e.x===a.x)t[1]+=a.y>e.y?c:-c,f=true;else if(e.y===a.y)t[0]+=a.x>e.x?c:-c,f=true;else{const i=Fi(e,a);t[0]-=Gi(i,c),t[1]-=Ci(i,c),f=true}}}switch(o){case"M":case"L":if(h>0){let e;if(1===s){const t=n.value;if(t.length>1)e=t[t.length-2]}else{const t=r.value;if(t.length>1)e=t[t.length-2];else e=i[i.length-2].end}if(e){const t=r.coordinates;if(e.x===l.x)t[1]+=l.y>e.y?h:-h,f=true;else if(e.y===l.y)t[0]+=l.x>e.x?h:-h,f=true;else{const i=Fi(e,l);t[0]+=Gi(i,h),t[1]+=Ci(i,h),f=true}}}break;case"H":case"V":{const e=r.coordinates,t="H"===o?0:1;e[t]+=(c+h)*(e[t]>=0?1:-1),f=true;break}}}if(f)return e.leading=c,e.trailing=h,e.path=SvgBuild.drawPath(i,t),e;break}}}}flattenStrokeDash(e,t,i,s,n){if(!s)s=i;let a,r,l,o,c,h=0,f=0;const u=e=>a[e%r];if(n)({dashArray:a,dashArrayTotal:l,extendedLength:o,startIndex:f}=n),r=a.length,n.items=[],n.leading=0;else{r=e.length,a=e.slice(0);const c=Bi([2,r]);l=0;for(let t=0;t<c;++t){const i=e[t%r];if(l+=i,t>=r)a.push(i)}if(r=c,t>0){let e=u(0);while(t-e>=0)t-=e,e=u(++f);f%=r}else if(t<0){a.reverse();while(t<0)t+=u(f++);f=r-f%r,a.reverse()}o=s,n={dashArray:a,dashArrayTotal:l,items:[],leading:0,trailing:0,startIndex:f,extendedLength:o,lengthRatio:i/(s||i)}}for(let e=0,i=0;;e+=i,++f){let s,a;if(i=u(f),e<t)n.leading=t-e,s=0,a=i-n.leading;else s=e-t,a=i;const r=Oi(s/o);if(c=Oi(r+a/o),f%2==0){if(r<1)n.items.push({start:r,end:Math.min(c,1),length:i}),h+=i}else h+=i;if(c>=1)break}n.trailing=Oi((c-1)*o);while(h%l!=0){const e=u(++f);n.trailing+=e,h+=e}if(0===n.items.length)n.items.push({start:1,end:1});else n.leadingOffset=Oi(n.items[0].start*o),n.leading*=n.lengthRatio,n.trailing*=n.lengthRatio;return n}extractStrokeDash(e,t){const i=Ii(this.strokeWidth);let s,n="",a="";if(i>0){let r=SvgBuild.parseCoordinates(this.strokeDasharray);if(r.length>0){const l=this.totalLength,o=this.pathLength||l,c=[];let h,f=Ii(this.strokeDashoffset),u=0;const d=(e,t,i,s=0)=>{const n=this.flattenStrokeDash(e,t,l,o);if(0===c.length)h=n;return u=Math.max(u,n.items.length),c.push({items:n.items,delay:i,duration:s}),n.items};if(s=d(r,f,0),e){const g=e.slice(0).sort((e,t)=>{if(e.attributeName.startsWith("stroke-dash")&&t.attributeName.startsWith("stroke-dash"))if(e.delay!==t.delay)return e.delay<t.delay?-1:1;else if(SvgBuild.asSet(e)&&SvgBuild.asAnimate(t)||!e.animationElement&&t.animationElement)return-1;else if(SvgBuild.asAnimate(e)&&SvgBuild.asSet(t)||e.animationElement&&!t.animationElement)return 1;return 0}),p=new SvgAnimationIntervalMap(g,"stroke-dasharray","stroke-dashoffset");let m=[],v=false,y=e=>{let t=f;const i=g.length;let s=e;while(s<i){const e=g[s++];if("stroke-dasharray"===e.attributeName){const i=p.get("stroke-dashoffset",e.delay);if(i)t=parseFloat(i);for(const i of SvgBuild.asAnimate(e)?p.evaluateStart(e):[e.to])u=Math.max(u,this.flattenStrokeDash(SvgBuild.parseCoordinates(i),t,l,o).items.length)}}};if(g.length>1)for(let e=0;e<g.length;++e){const t=g[e];if(!p.has(t.attributeName,t.delay,t))g.splice(e--,1)}for(let e=0;e<g.length;++e){const S=g[e];if(S.setterType){const e=(e,t)=>{d(e,t,S.delay,S.fillReplace&&S.duration>0?S.duration:0),v=true};switch(S.attributeName){case"stroke-dasharray":r=SvgBuild.parseCoordinates(S.to),e(r,Di(p,f,S.delay));continue;case"stroke-dashoffset":f=Ii(S.to),e(Ui(p,r,S.delay),f);continue}}else if(SvgBuild.asAnimate(S)&&S.playable)switch(p.evaluateStart(S),S.attributeName){case"stroke-dasharray":{if(y)y(e),y=void 0;const t=Di(p,f,S.delay),i=this.flattenStrokeDash(Ui(p,r,S.delay),t,l,o).items,s=[],n=[];let a=0;while(a<u){const e=new SvgAnimate(this.element);e.id=a,e.baseValue=Wi(i[a]),e.attributeName="stroke-dasharray",e.delay=S.delay,e.duration=S.duration,e.iterationCount=S.iterationCount,e.fillMode=S.fillMode,n[a++]=[],s.push(e)}const c=S.values;for(a=0;a<c.length;++a){const e=this.flattenStrokeDash(SvgBuild.parseCoordinates(c[a]),t,l,o).items;let i=0;while(i<u)n[i].push(Wi(e[i++]))}const{keyTimes:h,keySplines:d}=S,g=S.timingFunction;a=0;while(a<u){const e=s[a];if(e.values=n[a++],e.keyTimes=h,d)e.keySplines=d;else if(g)e.timingFunction=g}if(S.fillReplace){const e=S.getTotalDuration(),t=this.flattenStrokeDash(Ui(p,r,e),Di(p,f,e),l,o).items;a=0;while(a<u)s[a].replaceValue=Wi(t[a++])}m=m.concat(s),v=true;continue}case"stroke-dashoffset":{const e=S.duration,r=parseFloat(S.values[0]);let d,g=0,m=0,y=l,b=1;if(f!==r&&0===S.delay&&!S.fillReplace)h=this.flattenStrokeDash(h.dashArray,r,l,o),s=h.items,c[0].items=s,u=Math.max(u,h.items.length),f=r;if(h.leading>0||h.trailing>0)if(this.extendLength(h,t),h.path){const e=SvgBuild.getBoxRect([this.value]);if(y=Oi(N(h.path)),b=y/l,h.extendedLength=this.pathLength,h.extendedLength>0)h.extendedLength*=b;else h.extendedLength=y;s=this.flattenStrokeDash(h.dashArray,0,l,o,h).items,c[0].items=s,u=Math.max(u,s.length);const t=Math.ceil(i/2);n=h.path,a=SvgBuild.drawRect(e.right-e.left,e.bottom-e.top+2*t,e.left,e.top-t)}if(S.fillReplace&&-1!==S.iterationCount){const e=qi(p.get(S.attributeName,S.getTotalDuration()));if(e!==f){let t=Math.abs(e-f)%y/y;if(e>f)t=1-t;d=t.toString()}}const k=S.keyTimes,T=S.values,w=[],A=[],x=k.length;for(let t=0;t<x;++t){const i=0===t?f:parseFloat(T[t-1]),s=parseFloat(T[t]),n=Math.abs(s-i),a=k[t];if(0===n){if(t>0){g=a,A.push(g);const e=w.length;if(e>0)w.push(w[e-1]),m=parseFloat(w[e-1]);else w.push("0"),m=0}continue}const r=s>i,l=t>0?(a-k[t-1])*e:0,o=n*h.lengthRatio;let c=o/y,u=o,d=0;const p=()=>{const e=r?"1":"0";if(!(t>0&&w[w.length-1]===e))A.push(0===g?0:Oi(g)),w.push(e)},v=(e,t=false)=>{if(d=(u-e)/y,t){const e=Oi(d);if(r){if(e>0)d=1-d}else if(0===e)d=1}},S=()=>{g=a,A.push(g);const e=Oi(d);w.push(e.toString()),m=e>0&&e<1?d:0},b=t=>t/o*l/e;if(0===t){if(u%=y,v(0),r)d=1-d;S()}else{if(m>0){const e=r?m:1-m,t=Oi(e*y);if(Mi(u,t)){if(v(0),r)d=m-d;else d+=m;S();continue}else w.push(r?"0":"1"),g+=b(t),A.push(Oi(g)),c=Oi(c-e),u=Oi(u-t)}if(Ni(u,y))u=y;if(u>y){c=Math.floor(c);const e=c*y;if(e===u)--c;v(e,true)}else c=0,v(0,true);while(c>0)p(),w.push(r?"0":"1"),g+=b(y),A.push(Oi(g)),--c;p(),S()}}S.baseValue="0",S.replaceValue=d,S.values=w,S.keyTimes=A;const R=S.timingFunction;if(R)S.keySplines=void 0,S.timingFunction=R;v=true;break}}m.push(S)}if(v){const t=c.length;let i=0;while(i<t){const{delay:e,duration:n,items:a}=c[i++];if(a===s){let e=a.length-1;while(++e<u)a.push({start:1,end:1})}else{const i=t>2?this.flattenStrokeDash(Ui(p,r,e-1),Di(p,f,e-1),l,o).items:s;let c=0;while(c<u){const t=new SvgAnimation(this.element);t.id=c,t.attributeName="stroke-dasharray",t.baseValue=Wi(i[c]),t.delay=e,t.duration=n,t.fillFreeze=0===n,t.to=Wi(a[c++]),m.push(t)}}}e=m}}}}return[e,s,n,a]}init(){const e=this.element;if(k.path(e))this.setBaseValue("d");else if(k.line(e))this.setBaseValue("x1"),this.setBaseValue("y1"),this.setBaseValue("x2"),this.setBaseValue("y2");else if(k.rect(e))this.setBaseValue("x"),this.setBaseValue("y"),this.setBaseValue("width"),this.setBaseValue("height");else if(k.circle(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("r");else if(k.ellipse(e))this.setBaseValue("cx"),this.setBaseValue("cy"),this.setBaseValue("rx"),this.setBaseValue("ry");else if(k.polygon(e)||k.polyline(e))this.setBaseValue("points",SvgBuild.clonePoints(e.points))}get transforms(){var e;return null!==(e=this._transforms)&&void 0!==e?e:this._transforms=SvgBuild.filterTransforms(w.parse(this.element)||SvgBuild.convertTransforms(this.element.transform.baseVal))}get pathLength(){return qi(Pi(this.element,"pathLength"))}get totalLength(){return this.element.getTotalLength()}get instanceType(){return 16388}}class SvgPattern extends(Yt(SvgContainer)){constructor(e,t){super(e),this.element=e,this.patternElement=t}build(e){super.build(Object.assign(Object.assign({},e),{targetElement:this.patternElement,initialize:false}))}get animations(){return[]}get instanceType(){return 258}}class SvgShape extends(mt(Yt(SvgElement))){constructor(e,t=true){if(super(e),this.element=e,t)this.setPath()}setPath(){this.path=new SvgPath(this.element)}build(e){const t=this.path;if(t)t.parent=this.parent,t.build(Object.assign(Object.assign({},e),{transforms:this.transforms}))}synchronize(e){if(this.animations.length>0){const t=this.path;if(t){const i=null==e?void 0:e.element;if(i)this.animateSequentially(this.getAnimateShape(i),void 0,t,e);else this.animateSequentially(this.getAnimateShape(this.element),this.getAnimateTransform(e),t,e)}}}set path(e){if(this._path=e,e)e.name=this.name}get path(){return this._path}get instanceType(){return 2052}}const{isPercent:Yi}=squared.lib.css,{getNamedItem:$i}=squared.lib.dom,ji=e=>Yi(e)?parseFloat(e)/100:parseFloat(e);class SvgShapePattern extends(Ei(Z(Yt(SvgContainer)))){constructor(e,t){super(e),this.element=e,this.patternElement=t,this.patternUnits="userSpaceOnUse"===$i(this.patternElement,"patternUnits")?1:2,this.patternContentUnits="objectBoundingBox"===$i(this.patternElement,"patternContentUnits")?2:1}build(e){const t=this.element,i=new SvgPath(t);i.build(Object.assign({},e));const s=i.value;if(s){const n=null==e?void 0:e.precision;if(this.clipRegion=s,i.clipPath)this.clipRegion=i.clipPath;const a=[s];this.setPaint(a,n),this.drawRegion=SvgBuild.getBoxRect(a);const{drawRegion:r,fillOpacity:l,patternWidth:o,patternHeight:c,tileWidth:h,tileHeight:f}=this,u=2===this.patternUnits;let d=this.offsetX%h,g=this.offsetY%f,p=0,m=0,v=r.right,y=r.bottom;if(u)p=r.left,m=r.top,v-=p,y-=m;if(0!==d)d=h-d,v+=h;if(0!==g)g=f-g,y+=f;let S=0;while(y>0){const i=this.patternElement,s=2===this.patternContentUnits,a=m+S++*f-g;let r=v,u=0;do{const g=p+u++*h-d,m=new SvgPattern(t,i);m.build(Object.assign({},e)),m.cascade(t=>{if(SvgBuild.isShape(t)){t.setPath();const i=t.path;if(i){if(i.patternParent=this,s)i.refitBaseValue(g/o,a/c,n);else i.refitBaseValue(g,a,n);i.build(Object.assign(Object.assign({},e),{transforms:t.transforms})),i.fillOpacity=(parseFloat(i.fillOpacity)*parseFloat(l)).toString(),i.clipPath=SvgBuild.drawRect(h,f,g,a,n)+(""!==i.clipPath?";"+i.clipPath:"")}}}),this.add(m),r-=h}while(r>0);y-=f}if(""!==this.stroke&&parseFloat(this.strokeWidth)>0){i.fill="",i.fillOpacity="0",i.stroke=this.stroke,i.strokeWidth=this.strokeWidth;const e=new SvgShape(t,false);e.path=i,this.add(e)}}}patternRefitX(e){return this.drawRegion?e*this.patternWidth:e}patternRefitY(e){return this.drawRegion?e*this.patternHeight:e}patternRefitPoints(e){if(this.drawRegion){const t=this.patternWidth,i=this.patternHeight,s=e.length;let n=0;while(n<s){const s=e[n++];if(s.x*=t,s.y*=i,void 0!==s.rx&&void 0!==s.ry)if(s.rx===s.ry){const e=Math.min(t,i);s.rx*=e,s.ry*=e}else s.rx*=t,s.ry*=i}}return e}get patternWidth(){const e=this.drawRegion;return e?e.right-e.left:0}get patternHeight(){const e=this.drawRegion;return e?e.bottom-e.top:0}get transforms(){if(void 0===this._transforms){this._transforms=super.transforms;const e=SvgBuild.convertTransforms(this.patternElement.patternTransform.baseVal),t=e.length;if(t>0){const i=w.rotateOrigin(this.patternElement,"patternTransform"),s=this.patternWidth/2,n=this.patternHeight/2;let a=0;while(a<t){const t=e[a++];switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(i.length){const e=i.shift();if(e.angle===t.angle){t.origin={x:s+e.x,y:n+e.y};break}}if(t.origin)break;default:t.origin={x:s,y:n};break}}this._transforms=this._transforms.concat(SvgBuild.filterTransforms(e))}}return this._transforms}get offsetX(){const e=this.patternElement.x.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get offsetY(){const e=this.patternElement.y.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get tileWidth(){const e=this.patternElement.width.baseVal;return 2===this.patternUnits?this.patternWidth*ji(e.valueAsString):e.value}get tileHeight(){const e=this.patternElement.height.baseVal;return 2===this.patternUnits?this.patternHeight*ji(e.valueAsString):e.value}get instanceType(){return 514}}class SvgUseG extends(Ht(Z(SvgG))){constructor(e,t){super(e),this.element=e,this.useElement=t,this.useParent=this,this.rectElement=t}build(e){this.setRect(),super.build(e)}get instanceType(){return 115}}class SvgUseShape extends(Ei(Ht(Z(SvgShape)))){constructor(e,t,i=true){if(super(e,false),this.element=e,this.useElement=t,this.useParent=this,this.rectElement=t,i)this.setPath()}setPath(){const e=new SvgPath(this.element);e.useParent=this,this.path=e}build(e){super.build(e),this.setPaint(this.path&&[this.path.value],null==e?void 0:e.precision)}synchronize(e){if(e=Object.assign(Object.assign({},e),{element:this.element}),this.animations.length>0)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get transforms(){var e;return null!==(e=this._transforms)&&void 0!==e?e:this._transforms=this.getTransforms(this.useElement).concat(super.transforms)}get animations(){var e;return null!==(e=this._animations)&&void 0!==e?e:this._animations=this.getAnimations(this.useElement).concat(super.animations)}get instanceType(){return 6149}}class SvgUseShapePattern extends(mt(Ht(SvgShapePattern))){constructor(e,t,i){super(e,i),this.element=e,this.useElement=t,this.useParent=this,this.rectElement=t}synchronize(e){const t=this.animations.filter(e=>"x"===e.attributeName||"y"===e.attributeName||void 0===this.verifyBaseValue(e.attributeName,0)),i=this.getAnimateTransform(e);if(t.length>0||i.length>0)this.animateSequentially(this.getAnimateViewRect(t),i,void 0,e);super.synchronize(e)}get instanceType(){return 1539}}class SvgUseSymbol extends(Ei(mt(Ht(Z(Yt(SvgContainer)))))){constructor(e,t){super(t),this.symbolElement=e,this.useElement=t,this.useParent=this,this.rectElement=t}build(e){this.setRect(),super.build(Object.assign(Object.assign({},e),{targetElement:this.symbolElement})),this.setPaint(this.getPathAll(),null==e?void 0:e.precision)}synchronize(e){if(this.animations.length>0)this.animateSequentially(this.getAnimateViewRect(),this.getAnimateTransform(e),void 0,e);super.synchronize(e)}get viewBox(){return this.symbolElement.viewBox.baseVal||{x:0,y:0,width:0,height:0}}get instanceType(){return 131}}const Ki={constant:le,util:M};e.Svg=Svg,e.SvgAnimate=SvgAnimate,e.SvgAnimateMotion=SvgAnimateMotion,e.SvgAnimateTransform=SvgAnimateTransform,e.SvgAnimation=SvgAnimation,e.SvgAnimationIntervalMap=SvgAnimationIntervalMap,e.SvgBaseVal=Z,e.SvgBuild=SvgBuild,e.SvgContainer=SvgContainer,e.SvgElement=SvgElement,e.SvgG=SvgG,e.SvgImage=SvgImage,e.SvgPaint=Ei,e.SvgPath=SvgPath,e.SvgPattern=SvgPattern,e.SvgShape=SvgShape,e.SvgShapePattern=SvgShapePattern,e.SvgSynchronize=mt,e.SvgUseG=SvgUseG,e.SvgUseShape=SvgUseShape,e.SvgUseShapePattern=SvgUseShapePattern,e.SvgUseSymbol=SvgUseSymbol,e.SvgView=Yt,e.SvgViewRect=Ht,e.lib=Ki,Object.defineProperty(e,"__esModule",{value:true})}));
