var android=function(){"use strict";const e=(e,t)=>e.element===t||e.elementId===t||e.controlId===t;class Application extends squared.base.ApplicationUI{constructor(){super(...arguments),this.systemName="android"}resolveTarget(t,i){if(i){for(const a of this.getProcessingCache(t))if(e(a,i))return a;for(const[a,n]of this.session.active.entries())if(a!==t)for(const t of n.cache)if(e(t,i))return t}}set viewModel(e){this._viewModel=e}get viewModel(){return this._viewModel}}var t;!function(e){e[e.RADIO=1]="RADIO",e[e.CHECKBOX=2]="CHECKBOX",e[e.SELECT=3]="SELECT",e[e.SVG=4]="SVG",e[e.IMAGE=5]="IMAGE",e[e.BUTTON=6]="BUTTON",e[e.PROGRESS=7]="PROGRESS",e[e.RANGE=8]="RANGE",e[e.EDIT=9]="EDIT",e[e.TEXT=10]="TEXT",e[e.INLINE=11]="INLINE",e[e.LINE=12]="LINE",e[e.SPACE=13]="SPACE",e[e.BLOCK=14]="BLOCK",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.WEBVIEW=20]="WEBVIEW",e[e.VIDEOVIEW=21]="VIDEOVIEW",e[e.UNKNOWN=22]="UNKNOWN"}(t||(t={}));var i=Object.freeze({__proto__:null,get CONTAINER_NODE(){return t}});const a={EXTERNAL:"android.external",SUBSTITUTE:"android.substitute",DELEGATE_BACKGROUND:"android.delegate.background",DELEGATE_MAXWIDTHHEIGHT:"android.delegate.max-width-height",DELEGATE_NEGATIVEX:"android.delegate.negative-x",DELEGATE_PERCENT:"android.delegate.percent",DELEGATE_POSITIVEX:"android.delegate.positive-x",DELEGATE_RADIOGROUP:"android.delegate.radiogroup",DELEGATE_SCROLLBAR:"android.delegate.scrollbar",DELEGATE_VERTICALALIGN:"android.delegate.verticalalign",CONSTRAINT_GUIDELINE:"android.constraint.guideline",RESOURCE_INCLUDES:"android.resource.includes",RESOURCE_BACKGROUND:"android.resource.background",RESOURCE_SVG:"android.resource.svg",RESOURCE_STRINGS:"android.resource.strings",RESOURCE_FONTS:"android.resource.fonts",RESOURCE_DIMENS:"android.resource.dimens",RESOURCE_DATA:"android.resource.data",RESOURCE_STYLES:"android.resource.styles"},n={RADIO:"RadioButton",CHECKBOX:"CheckBox",EDIT_LIST:"AutoCompleteTextView",SELECT:"Spinner",EDIT:"EditText",SVG:"ImageView",IMAGE:"ImageView",BUTTON:"Button",RANGE:"SeekBar",METER:"ProgressBar",PROGRESS:"ProgressBar",TEXT:"TextView",LINE:"View",SPACE:"Space",FRAME:"FrameLayout",LINEAR:"LinearLayout",GRID:"GridLayout",RELATIVE:"RelativeLayout",WEBVIEW:"WebView",VIDEOVIEW:"VideoView",RADIOGROUP:"RadioGroup",HORIZONTAL_SCROLL:"HorizontalScrollView",VERTICAL_SCROLL:"android.support.v4.widget.NestedScrollView",CONSTRAINT:"android.support.constraint.ConstraintLayout",GUIDELINE:"android.support.constraint.Guideline",BARRIER:"android.support.constraint.Barrier"},o={VERTICAL_SCROLL:"androidx.core.widget.NestedScrollView",CONSTRAINT:"androidx.constraintlayout.widget.ConstraintLayout",GUIDELINE:"androidx.constraintlayout.widget.Guideline",BARRIER:"androidx.constraintlayout.widget.Barrier"},r={DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},s={DRAWER:"androidx.drawerlayout.widget.DrawerLayout",NAVIGATION_VIEW:"com.google.android.material.navigation.NavigationView",COORDINATOR:"androidx.coordinatorlayout.widget.CoordinatorLayout",APPBAR:"com.google.android.material.appbar.AppBarLayout",COLLAPSING_TOOLBAR:"com.google.android.material.appbar.CollapsingToolbarLayout",TOOLBAR:"androidx.appcompat.widget.Toolbar",FLOATING_ACTION_BUTTON:"com.google.android.material.floatingactionbutton.FloatingActionButton",BOTTOM_NAVIGATION:"com.google.android.material.bottomnavigation.BottomNavigationView"},l={PLAINTEXT:t.TEXT,HR:t.LINE,SVG:t.SVG,IMG:t.IMAGE,CANVAS:t.IMAGE,BUTTON:t.BUTTON,SELECT:t.SELECT,TEXTAREA:t.EDIT,METER:t.PROGRESS,PROGRESS:t.PROGRESS,AUDIO:t.VIDEOVIEW,VIDEO:t.VIDEOVIEW,IFRAME:t.WEBVIEW,INPUT_RANGE:t.RANGE,INPUT_TEXT:t.EDIT,INPUT_PASSWORD:t.EDIT,INPUT_NUMBER:t.EDIT,INPUT_EMAIL:t.EDIT,INPUT_SEARCH:t.EDIT,INPUT_URL:t.EDIT,INPUT_DATE:t.EDIT,INPUT_TEL:t.EDIT,INPUT_TIME:t.EDIT,INPUT_WEEK:t.EDIT,INPUT_MONTH:t.EDIT,INPUT_BUTTON:t.BUTTON,INPUT_FILE:t.BUTTON,INPUT_IMAGE:t.BUTTON,INPUT_COLOR:t.BUTTON,INPUT_SUBMIT:t.BUTTON,INPUT_RESET:t.BUTTON,INPUT_CHECKBOX:t.CHECKBOX,INPUT_RADIO:t.RADIO,INPUT_DATETIME_LOCAL:t.EDIT},c={relativeParent:{left:"layout_alignParentLeft",top:"layout_alignParentTop",right:"layout_alignParentRight",bottom:"layout_alignParentBottom",centerHorizontal:"layout_centerHorizontal",centerVertical:"layout_centerVertical"},relative:{left:"layout_alignLeft",top:"layout_alignTop",right:"layout_alignRight",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",leftRight:"layout_toRightOf",rightLeft:"layout_toLeftOf",topBottom:"layout_below",bottomTop:"layout_above"},constraint:{left:"layout_constraintLeft_toLeftOf",top:"layout_constraintTop_toTopOf",right:"layout_constraintRight_toRightOf",bottom:"layout_constraintBottom_toBottomOf",leftRight:"layout_constraintLeft_toRightOf",rightLeft:"layout_constraintRight_toLeftOf",baseline:"layout_constraintBaseline_toBaselineOf",topBottom:"layout_constraintTop_toBottomOf",bottomTop:"layout_constraintBottom_toTopOf"}},d={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",aapt:"http://schemas.android.com/aapt",tools:"http://schemas.android.com/tools"},h={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},f={left:"start",right:"end",paddingLeft:"paddingStart",paddingRight:"paddingEnd",layout_marginLeft:"layout_marginStart",layout_marginRight:"layout_marginEnd",layout_alignParentLeft:"layout_alignParentStart",layout_alignParentRight:"layout_alignParentEnd",layout_alignLeft:"layout_alignStart",layout_alignRight:"layout_alignEnd",layout_toLeftOf:"layout_toStartOf",layout_toRightOf:"layout_toEndOf",layout_constraintLeft_toLeftOf:"layout_constraintStart_toStartOf",layout_constraintRight_toRightOf:"layout_constraintEnd_toEndOf",layout_constraintLeft_toRightOf:"layout_constraintStart_toEndOf",layout_constraintRight_toLeftOf:"layout_constraintEnd_toStartOf"},u=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"];var p=Object.freeze({__proto__:null,EXT_ANDROID:a,CONTAINER_ANDROID:n,CONTAINER_ANDROID_X:o,SUPPORT_ANDROID:r,SUPPORT_ANDROID_X:s,ELEMENT_ANDROID:l,LAYOUT_ANDROID:c,XMLNS_ANDROID:d,STRING_ANDROID:h,LOCALIZE_ANDROID:f,RESERVED_JAVA:u});const{findColorShade:g,parseColor:m}=squared.lib.color,{extractURL:b,getSrcSet:y}=squared.lib.css,{FILE:S}=squared.lib.regex,{fromLastIndexOf:T,hasMimeType:w,isNumber:v,isPlainObject:E,isString:x,resolvePath:A,safeNestedArray:_,spliceArray:R,trimString:I}=squared.lib.util,N=squared.base.ResourceUI.STORED;let C={};function k(e,t){var i;for(const a in e)if(E(e[a]))k(e,t);else{const n=null===(i=e[a])||void 0===i?void 0:i.toString();if(n)switch(a){case"text":if(!n.startsWith("@string/"))e[a]=Resource.addString(n,"",t);break;case"src":case"srcCompat":if(S.PROTOCOL.test(n)){const t=Resource.addImage({mdpi:n});if(""!==t)e[a]="@drawable/"+t}break;default:{const t=m(n);if(t){const i=Resource.addColor(t);if(""!==i)e[a]="@color/"+i}}}}}class Resource extends squared.base.ResourceUI{constructor(e,t){super(),this.application=e,this.cache=t,N.styles=new Map,N.themes=new Map,N.dimens=new Map,N.drawables=new Map,N.animators=new Map;const i=this.controllerSettings.mimeType.image;if("*"!==i)this._imageFormat=R(i.slice(0),e=>"image/svg+xml"===e)}static formatOptions(e,t){for(const i in e){const a=e[i];if(E(a))k(a,t)}return e}static formatName(e){if(/^\d/.test(e))e="__"+e;return e.replace(/[^\w]+/g,"_")}static addTheme(e){const t=N.themes,{items:i,output:a}=e;let n="res/values",o="themes.xml",r=e.name,s="";if(a){if(a.path)n=I(a.path.trim().replace(/\\/g,"/"),"/");if(a.file)o=I(a.file.trim().replace(/\\/g,"/"),"/")}const l=n+"/"+o,c=t.get(l)||new Map;if(""===r||"."===r.charAt(0)){e:for(const e of t.values())for(const t of e.values())if(t.name){s=t.name;break e}if(""===s)return false}else s=r;r=s+("."===r.charAt(0)?r:""),e.name=r,Resource.formatOptions(i);const d=c.get(r);if(d){const e=d.items;for(const t in i)e[t]=i[t]}else c.set(r,e);return t.set(l,c),true}static addString(e,t,i){if(""!==e){const a=v(e);if(!a||i){const i=N.strings;for(const[t,a]of i.entries())if(a===e)return"@string/"+t;const n=I((t||(e.length>64?e.substring(0,64):e)).replace(/(\\[nt]|<\/?[a-z]+>|&#?[A-Za-z\d]{2,};)/g,"_").replace(/[^A-Za-z\d]+/g,"_"),"_").split(/_+/);if(n.length>1){if(n.length>4)n.length=4;t=n.join("_")}else t=n[0];if(!(t=t.toLowerCase()))t="__symbol"+ ++Resource.SYMBOL_COUNTER;else if(a||/^\d/.test(t)||u.includes(t))t="__"+t;if(i.has(t))t=Resource.generateId("string",t);return i.set(t,e),"@string/"+t}}return e}static addImage(e,t="",i){const a=e.mdpi;if(a){if(1===Object.keys(e).length){const e=C[a];if(e)return e}const n=T(a,"/"),o=this.getExtension(n),r=o.length;if(!i||0===r||w(i,o)){const i=Resource.insertStoredAsset("images",Resource.formatName(t+n.substring(0,n.length-(r>0?r+1:0))).toLowerCase(),e);return C[a]=i,i}}return""}static addColor(e,t){if("string"==typeof e)e=m(e,1,t);if(e&&(!e.transparent||t)){const t=e.opacity<1?e.valueAsARGB:e.value;let i=N.colors.get(t);if(i)return i;const a=g(e.value);if(a)return i=t===a.value?a.key:Resource.generateId("color",a.key),N.colors.set(t,i),i}return""}reset(){super.reset(),C={},Resource.UUID_COUNTER=0,Resource.SYMBOL_COUNTER=0}addImageSrc(e,t="",i){const a={};let n;if("string"==typeof e){if(n=b(e),n&&!n.startsWith("data:image/"))return this.addImageSet({mdpi:A(n)},t)}else{if(!i&&x(e.srcset))i=y(e,this._imageFormat);if(i)for(const e of i){const t=e.pixelRatio;if(t>0){const i=e.src;if(t<1)a.ldpi=i;else if(1===t){if(!n||e.actualWidth)n=i}else if(t<=1.5)a.hdpi=i;else if(t<=2)a.xhdpi=i;else if(t<=3)a.xxhdpi=i;else a.xxxhdpi=i}}if(!n)n=e.src}if(n){const e=this.application.resourceHandler.getRawData(n);if(e){if(e.base64){const i=e.filename;return this.application.resourceHandler.writeRawImage(e.mimeType,{filename:t+i,data:e.base64,encoding:"base64"}),i.substring(0,i.lastIndexOf("."))}return""}a.mdpi=n}return this.addImageSet(a,t)}addImageSet(e,t){return Resource.addImage(e,t,this._imageFormat)}writeRawImage(e,t){const i=super.writeRawImage(e,t);if(i&&this.userSettings.compressImages&&Resource.canCompressImage(t.filename||"",e))_(i,"compress").unshift({format:"png"});return i}get userSettings(){return this.application.userSettings}get randomUUID(){return"__"+(++Resource.UUID_COUNTER).toString().padStart(5,"0")}}function L(e,t,i,a=0){if(!i||i>=a)return e.attr=t,true;else return false}Resource.UUID_COUNTER=0,Resource.SYMBOL_COUNTER=0;const P={29:{android:{},assign:{}},28:{android:{allowAudioPlaybackCapture:false,enforceNavigationBarContrast:false,enforceStatusBarContrast:false,forceDarkAllowed:false,forceUriPermissions:false,foregroundServiceType:false,hasFragileUserData:false,identifier:false,inheritShowWhenLocked:false,interactiveUiTimeout:false,isLightTheme:false,isSplitRequired:false,minAspectRatio:false,nonInteractiveUiTimeout:false,opticalInsetBottom:false,opticalInsetLeft:false,opticalInsetRight:false,opticalInsetTop:false,packageType:false,requestLegacyExternalStorage:false,secureElementName:false,selectionDividerHeight:false,settingsSliceUri:false,shell:false,supportsMultipleDisplays:false,textLocale:false,useAppZygote:false,useEmbeddedDex:false,zygotePreloadName:false},assign:{}},27:{android:{accessibilityHeading:false,accessibilityPaneTitle:false,appComponentFactory:false,buttonCornerRadius:false,cantSaveState:false,dialogCornerRadius:false,fallbackLineSpacing:false,firstBaselineToTopHeight:false,fontVariationSettings:false,lastBaselineToBottomHeight:false,lineHeight:false,maxLongVersionCode:false,outlineAmbientShadowColor:false,outlineSpotShadowColor:false,screenReaderFocusable:false,textFontWeight:false,ttcIndex:false,versionCodeMajor:false,versionMajor:false,widgetFeatures:false,windowLayoutInDisplayCutoutMode:false},assign:{}},26:{android:{classLoader:false,navigationBarDividerColor:false,showWhenLocked:false,turnScreenOn:false,windowLightNavigationBar:false},assign:{}},25:{android:{fontWeight:false,justificationMode:false,layout_marginHorizontal:false,layout_marginVertical:false,paddingHorizontal:false,paddingVertical:false,tooltipText:false},assign:{}},24:{android:{colorSecondary:false,contextDescription:false,contextUri:false,roundIcon:false,shortcutDisabledMessage:false,shortcutId:false,shortcutLongLabel:false,shortcutShortLabel:false,showMetadataInPreview:false},assign:{}},23:{android:{backupInForeground:false,bitmap:false,buttonGravity:false,canControlMagnification:false,canPerformGestures:false,canRecord:false,collapseIcon:false,contentInsetEndWithActions:false,contentInsetStartWithNavigation:false,contextPopupMenuStyle:false,countDown:false,defaultHeight:false,defaultToDeviceProtectedStorage:false,defaultWidth:false,directBootAware:false,enableVrMode:false,endX:false,endY:false,externalService:false,fillType:false,forceHasOverlappingRendering:false,hotSpotX:false,hotSpotY:false,languageTag:false,level:false,listMenuViewStyle:false,maxButtonHeight:false,networkSecurityConfig:false,numberPickerStyle:false,offset:false,pointerIcon:false,popupEnterTransition:false,popupExitTransition:false,preferenceFragmentStyle:false,resizeableActivity:false,startX:false,startY:false,subMenuArrow:false,supportsLocalInteraction:false,supportsPictureInPicture:false,textAppearancePopupMenuHeader:false,tickMark:false,tickMarkTint:false,tickMarkTintMode:false,titleMargin:false,titleMarginBottom:false,titleMarginEnd:false,titleMarginStart:false,titleMarginTop:false,tunerCount:false,use32bitAbi:false,version:false,windowBackgroundFallback:false},assign:{}},22:{android:{allowUndo:false,autoVerify:false,breakStrategy:false,colorBackgroundFloating:false,contextClickable:false,drawableTint:false,drawableTintMode:false,end:e=>L(e,"right"),extractNativeLibs:false,fingerprintAuthDrawable:false,fraction:false,fullBackupContent:false,hyphenationFrequency:false,lockTaskMode:false,logoDescription:false,numbersInnerTextColor:false,scrollIndicators:false,showForAllUsers:false,start:e=>L(e,"left"),subtitleTextColor:false,supportsAssist:false,supportsLaunchVoiceAssistFromKeyguard:false,thumbPosition:false,titleTextColor:false,trackTint:false,trackTintMode:false,usesCleartextTraffic:false,windowLightStatusBar:false},assign:{}},21:{android:{accessibilityTraversalAfter:false,accessibilityTraversalBefore:false,collapseContentDescription:false,dialogPreferredPadding:false,resizeClip:false,revisionCode:false,searchHintIcon:false},assign:{}},20:{android:{actionBarPopupTheme:false,actionBarTheme:false,actionModeFindDrawable:false,actionModeShareDrawable:false,actionModeWebSearchDrawable:false,actionOverflowMenuStyle:false,amPmBackgroundColor:false,amPmTextColor:false,ambientShadowAlpha:false,autoRemoveFromRecents:false,backgroundTint:false,backgroundTintMode:false,banner:false,buttonBarNegativeButtonStyle:false,buttonBarNeutralButtonStyle:false,buttonBarPositiveButtonStyle:false,buttonTint:false,buttonTintMode:false,calendarTextColor:false,checkMarkTint:false,checkMarkTintMode:false,closeIcon:false,colorAccent:false,colorButtonNormal:false,colorControlActivated:false,colorControlHighlight:false,colorControlNormal:false,colorEdgeEffect:false,colorPrimary:false,colorPrimaryDark:false,commitIcon:false,contentAgeHint:false,contentInsetEnd:false,contentInsetLeft:false,contentInsetRight:false,contentInsetStart:false,controlX1:false,controlX2:false,controlY1:false,controlY2:false,country:false,datePickerDialogTheme:false,datePickerMode:false,dayOfWeekBackground:false,dayOfWeekTextAppearance:false,documentLaunchMode:false,elegantTextHeight:false,elevation:false,excludeClass:false,excludeId:false,excludeName:false,fastScrollStyle:false,fillAlpha:false,fillColor:false,fontFeatureSettings:false,foregroundTint:false,foregroundTintMode:false,fragmentAllowEnterTransitionOverlap:false,fragmentAllowReturnTransitionOverlap:false,fragmentEnterTransition:false,fragmentExitTransition:false,fragmentReenterTransition:false,fragmentReturnTransition:false,fragmentSharedElementEnterTransition:false,fragmentSharedElementReturnTransition:false,fromId:false,fullBackupOnly:false,goIcon:false,headerAmPmTextAppearance:false,headerDayOfMonthTextAppearance:false,headerMonthTextAppearance:false,headerTimeTextAppearance:false,headerYearTextAppearance:false,hideOnContentScroll:false,indeterminateTint:false,indeterminateTintMode:false,inset:false,isGame:false,launchTaskBehindSourceAnimation:false,launchTaskBehindTargetAnimation:false,layout_columnWeight:false,layout_rowWeight:false,letterSpacing:false,matchOrder:false,maxRecentsv:false,maximumAngle:false,minimumHorizontalAngle:false,minimumVerticalAngle:false,multiArch:false,navigationBarColor:false,navigationContentDescription:false,navigationIcon:false,nestedScrollingEnabled:false,numbersBackgroundColor:false,numbersSelectorColor:false,numbersTextColor:false,outlineProvider:false,overlapAnchor:false,paddingMode:false,pathData:false,patternPathData:false,persistableMode:false,popupElevation:false,popupTheme:false,progressBackgroundTint:false,progressBackgroundTintMode:false,progressTint:false,progressTintMode:false,propertyXName:false,propertyYName:false,queryBackground:false,recognitionService:false,relinquishTaskIdentity:false,reparent:false,reparentWithOverlay:false,restrictionType:false,resumeWhilePausing:false,reversible:false,searchIcon:false,searchViewStyle:false,secondaryProgressTint:false,secondaryProgressTintMode:false,selectableItemBackgroundBorderless:false,sessionService:false,setupActivity:false,showText:false,slideEdge:false,splitTrack:false,spotShadowAlpha:false,src:(e,t,i)=>{if(i.svgElement)e.obj="app",e.attr="srcCompat";return true},stackViewStyle:false,stateListAnimator:false,statusBarColor:false,strokeAlpha:false,strokeColor:false,strokeLineCap:false,strokeLineJoin:false,strokeMiterLimit:false,strokeWidth:false,submitBackground:false,subtitleTextAppearance:false,suggestionRowLayout:false,switchStyle:false,targetName:false,textAppearanceListItemSecondary:false,thumbTint:false,thumbTintMode:false,tileModeX:false,tileModeY:false,timePickerDialogTheme:false,timePickerMode:false,timePickerStyle:false,tintMode:false,titleTextAppearance:false,toId:false,toolbarStyle:false,touchscreenBlocksFocus:false,transitionGroup:false,transitionName:false,transitionVisibilityMode:false,translateX:false,translateY:false,translationZ:false,trimPathEnd:false,trimPathOffset:false,trimPathStart:false,viewportHeight:false,viewportWidth:false,voiceIcon:false,windowActivityTransitions:false,windowAllowEnterTransitionOverlap:false,windowAllowReturnTransitionOverlap:false,windowClipToOutline:false,windowContentTransitionManager:false,windowContentTransitions:false,windowDrawsSystemBarBackgrounds:false,windowElevation:false,windowEnterTransition:false,windowExitTransition:false,windowReenterTransition:false,windowReturnTransition:false,windowSharedElementEnterTransition:false,windowSharedElementExitTransition:false,windowSharedElementReenterTransition:false,windowSharedElementReturnTransition:false,windowSharedElementsUseOverlay:false,windowTransitionBackgroundFadeDuration:false,yearListItemTextAppearance:false,yearListSelectorColor:false},assign:{}},19:{android:{allowEmbedded:false,windowSwipeToDismiss:false},assign:{}},18:{android:{accessibilityLiveRegion:false,addPrintersActivity:false,advancedPrintOptionsActivity:false,apduServiceBanner:false,autoMirrored:false,category:false,fadingMode:false,fromScene:false,isAsciiCapable:false,keySet:false,requireDeviceUnlock:false,ssp:false,sspPattern:false,sspPrefix:false,startDelay:false,supportsSwitchingToNextInputMethod:false,targetId:false,toScene:false,transition:false,transitionOrdering:false,vendor:false,windowTranslucentNavigation:false,windowTranslucentStatus:false},assign:{}},17:{android:{canRequestEnhancedWebAccessibility:(e,t)=>t<26,canRequestFilterKeyEvents:false,canRequestTouchExplorationMode:false,childIndicatorEnd:false,childIndicatorStart:false,indicatorEnd:false,indicatorStart:false,layoutMode:false,mipMap:false,mirrorForRtl:false,requiredAccountType:false,requiredForAllUsers:false,restrictedAccountType:false,windowOverscan:false},assign:{}},16:{android:{checkedTextViewStyle:false,format12Hour:false,format24Hour:false,initialKeyguardLayout:false,labelFor:false,layoutDirection:false,layout_alignEnd:e=>L(e,"layout_alignRight"),layout_alignParentEnd:e=>L(e,"layout_alignParentRight"),layout_alignParentStart:e=>L(e,"layout_alignParentLeft"),layout_alignStart:e=>L(e,"layout_alignLeft"),layout_marginEnd:e=>L(e,"layout_marginRight"),layout_marginStart:e=>L(e,"layout_marginLeft"),layout_toEndOf:e=>L(e,"layout_toRightOf"),layout_toStartOf:e=>L(e,"layout_toLeftOf"),listPreferredItemPaddingEnd:e=>L(e,"listPreferredItemPaddingRight"),listPreferredItemPaddingStart:e=>L(e,"listPreferredItemPaddingLeft"),paddingEnd:e=>L(e,h.PADDING_RIGHT),paddingStart:e=>L(e,h.PADDING_LEFT),permissionFlags:false,permissionGroupFlags:false,presentationTheme:false,showOnLockScreen:false,singleUser:false,subtypeId:false,supportsRtl:false,textAlignment:false,textDirection:false,timeZone:false,widgetCategory:false},assign:{}},15:{android:{fontFamily:false,importantForAccessibility:false,isolatedProcess:false,keyboardLayout:false,mediaRouteButtonStyle:false,mediaRouteTypes:false,parentActivityName:false},assign:{}},14:{android:{},assign:{}},0:{android:{},assign:{Button:{android:{textAllCaps:"false"}}}}},O={android:{amPmBackgroundColor:(e,t)=>L(e,"headerBackground",t,23),amPmTextColor:(e,t)=>L(e,"headerTextColor",t,23),animationResolution:(e,t)=>t<16,canRequestEnhancedWebAccessibility:(e,t)=>t<26,dayOfWeekBackground:(e,t)=>t<23,dayOfWeekTextAppearance:(e,t)=>t<23,directionDescriptions:(e,t)=>t<23,headerAmPmTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerDayOfMonthTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerMonthTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerTimeTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),headerYearTextAppearance:(e,t)=>L(e,"headerTextColor",t,23),showOnLockScreen:(e,t)=>L(e,"showForAllUsers",t,23),targetDescriptions:(e,t)=>t<23,yearListItemTextAppearance:(e,t)=>L(e,"yearListTextColor",t,23),yearListSelectorColor:(e,t)=>t<23}};var W=Object.freeze({__proto__:null,API_ANDROID:P,DEPRECATED_ANDROID:O,getValue:function(e,t,i,a){var n,o;for(const r of[P[e],P[0]]){const e=null===(o=null===(n=r.assign[t])||void 0===n?void 0:n[i])||void 0===o?void 0:o[a];if(e)return e}return""}});const{truncate:D}=squared.lib.math,{capitalize:B,joinArray:M,isPlainObject:H}=squared.lib.util,{BOX_STANDARD:G}=squared.base.lib.enumeration;function X(e,t,i=3){if(0===e)return 0;else if(0===t)return 1;return parseFloat(D(Math.max(e/(e+t),0),i))}function V(e,t,i,a){const n=t[e],o=true===n[">>"];let r="",s="",l=i.length;if(void 0===a)r+='<?xml version="1.0" encoding="utf-8"?>\n',a=0;else s+="\t".repeat(a);for(let t=0;t<l;++t){const l=i[t],c=n["#"]&&l[n["#"]],d=!o&&!c,h=n["@"],f=n[">"];let u=false;if(r+=s+"<"+e,h){const e=h.length;let t=0;while(t<e){const e=h[t++],i=l[e];if(i)r+=` ${(n["^"]?n["^"]+":":"")+e}="${i}"`}}if(f){let i="";const n=a+(o?t:0)+1;for(const e in f){const t=l[e];if(Array.isArray(t))i+=V(e,f,t,n);else if(H(t))i+=V(e,f,[t],n)}if(""!==i){if(r+=">\n"+i,d)r+=s+`</${e}>\n`}else r+=d?" />\n":">\n";u=true}else if(n["~"]){if(r+=">"+l.innerText,d)r+=`</${e}>\n`;u=true}else if(d)r+=" />\n";if(c){if(!u)r+=">\n";if(r+=c,!o)r+=s+`</${e}>\n`}if(o)s+="\t"}if(o)while(--l>=0)s=s.substring(1),r+=s+`</${e}>\n`;return r}function z(e,t,i=3){if("string"==typeof e)e=parseFloat(e);return!t?Math.round(e)+"dp":D(e,i)+"sp"}function F(e){return e.replace(/^@\+?id\//,"")}function U(e){switch(e){case"left":case"start":case"right":case"end":case"center_horizontal":return true}return false}function q(e){switch(e){case"top":case"bottom":case"center_vertical":return true}return false}function Y(e,t){let i;for(const a in e)if(a.startsWith(t)){if(!i)i={};i[B(a.substring(t.length),false)]=e[a]}return i}function j(e,t,i){if(i>0){if(e.documentBody)switch(t){case 16:if(0===e.getBox(1)[0])i-=e.marginTop;break;case 32:i-=e.marginRight;break;case 64:if(0===e.getBox(4)[0])i-=e.marginBottom;break;case 128:i-=e.marginLeft;break}if(0===e.getBox(t)[0])switch(t){case 16:i+=e.borderTopWidth-e.paddingTop;break;case 32:i+=e.borderRightWidth-e.paddingRight;break;case 64:i+=e.borderBottomWidth-e.paddingBottom;break;case 128:i+=e.borderLeftWidth-e.paddingLeft;break}return Math.max(i,0)}else if(i<0){switch(t){case 16:i+=e.marginTop;break;case 32:i+=e.marginRight;break;case 64:i+=e.marginBottom;break;case 128:i+=e.marginLeft;break}return i}return 0}function $(e){const t={android:{}};if(e){if(e.android)Object.assign(t.android,e.android);if(e.app){if(!t.app)t.app={};Object.assign(t.app,e.app)}}return t}function K(e){const t={output:{path:"res/values",file:""},name:"",parent:"",items:{}};if(H(e))for(const i in t)if(typeof e[i]==typeof t[i])t[i]=e[i];return t}function Z(e,t=4,i){if(t>0)if(i)return M(e.split("\n"),e=>{const i=/^(\t+)(.*)$/.exec(e);return i?" ".repeat(t*i[1].length)+i[2]:e});else return e.replace(/\t/g," ".repeat(t));return e}function J(e,t){const i=[],a=(e=e.replace(/&nbsp;/g,"&#160;").replace(/&(?!#?[A-Za-z\d]{2,};)/g,"&amp;")).length;for(let n=0;n<a;++n)switch(e.charAt(n)){case"'":i.push({i:n,text:"\\'"});break;case'"':i.push({i:n,text:"&quot;"});break;case"<":i.push({i:n,text:"&lt;"});break;case">":i.push({i:n,text:"&gt;"});break;case"\t":if(t)i.push({i:n,text:"&#160;".repeat(t)});break;case"":i.push({i:n,text:" "});break;case" ":i.push({i:n,text:"&#160;"});break}if(i.length>0){const t=e.split("");let a=0;while(a<i.length){const e=i[a++];t[e.i]=e.text}return t.join("")}return e}function Q(e,t,i){return t&&i>=17&&f[e]||e}function ee(e){return d[e]?`xmlns:${e}="${d[e]}"`:""}function te(e){let t="";for(const i in d)if(e.includes(i+":"))t+="\n\t"+ee(i);return t}var ie=Object.freeze({__proto__:null,applyTemplate:V,convertLength:z,getDocumentId:F,isHorizontalAlign:U,isVerticalAlign:q,getDataSet:Y,getHorizontalBias:function(e){const t=e.documentParent.box;return X(Math.max(0,e.actualRect("left","bounds")-t.left),Math.max(0,t.right-e.actualRect("right","bounds")),e.localSettings.floatPrecision)},getVerticalBias:function(e){const t=e.documentParent.box;return X(Math.max(0,e.actualRect("top","bounds")-t.top),Math.max(0,t.bottom-e.actualRect("bottom","bounds")),e.localSettings.floatPrecision)},adjustAbsolutePaddingOffset:j,createViewAttribute:$,createStyleAttribute:K,replaceTab:Z,replaceCharacterData:J,localizeString:Q,getXmlNs:ee,getRootNs:te});const{CSS_PROPERTIES:ae,CSS_UNIT:ne,formatPX:oe,getBackgroundPosition:re,isLength:se,isPercent:le,newBoxModel:ce,parseTransform:de}=squared.lib.css,{createElement:he,getNamedItem:fe}=squared.lib.dom,{clamp:ue,truncate:pe}=squared.lib.math,{actualTextRangeRect:ge}=squared.lib.session,{capitalize:me,convertFloat:be,convertInt:ye,convertWord:Se,fromLastIndexOf:Te,hasKeys:we,isNumber:ve,isString:Ee,replaceMap:xe}=squared.lib.util,{EXT_NAME:Ae}=squared.base.lib.constant,{BOX_STANDARD:_e,NODE_ALIGNMENT:Re,NODE_PROCEDURE:Ie}=squared.base.lib.enumeration,Ne=squared.base.ResourceUI,Ce=ae.margin.value,ke=ae.padding.value,{constraint:Le,relative:Pe,relativeParent:Oe}=c;function We(e,t){switch(e){case"left":case"start":return!t?e:"";case"center":return"center_horizontal";case"justify":case"initial":case"inherit":return""}return e}function De(e,t){const i=t.indexOf(e+"_horizontal"),a=t.indexOf(e+"_vertical");if(-1!==i&&-1!==a){if(t.splice(Math.min(i,a),1),t.splice(Math.max(i,a)-1,1),!t.includes(e))t.push(e);return true}else if(t.includes(e)){if(-1!==i)return t.splice(i,1),true;if(-1!==a)return t.splice(a,1),true}return false}function Be(e,t){if(t.horizontal&&(!e.blockWidth||e.hasWidth||e.hasPX("maxWidth")||e.innerMostWrapped.has("width",{type:2,not:"100%"}))){const i=(e.blockWidth||!e.pageFlow)&&!e.outerWrapper?"gravity":"layout_gravity";return e.mergeGravity(i,t.leftRight?"center_horizontal":t.left?"right":"left"),true}return false}function Me(e,t,i){const a=Xe(e,t);if(e.api>=28)e.android("lineHeight",oe(t),i);else if(a>0)e.android("lineSpacingExtra",oe(a),i);else return;const n=Math.round(a);if(n>0)if(e.modifyBox(e.inline?1:16,n),!(e.block&&!e.floating))e.modifyBox(e.inline?4:64,Math.floor(a))}function He(e,t,i,a,n){const o=e.cssInitial("lineHeight");if(!(e.imageOrSvgElement||e.renderChildren.length>0||0===e.actualHeight||"initial"===o))if(e.multiline)Me(e,t,false);else{const r=e.height;if(t===r)e.mergeGravity("gravity","center_vertical",false);else{const s=(s,l=false)=>{let c=Math.round(s);if(c>0){const d=(i||r>t)&&(e.styleText||l)&&!e.inline&&!(e.inputElement&&!se(o,true));if(a)if(d){if(c>0)e.modifyBox(16,c)}else if(i||!e.baselineAltered)if(c-=e.paddingTop,c>0)e.modifyBox(1,c);if(n)if(s=Math.floor(s),d){if(s>0)e.modifyBox(64,s)}else if((s-=e.paddingBottom)>0)e.modifyBox(4,s)}};if(e.textElement)s(Xe(e,t));else if(r>0){const i=t/2-e.paddingTop;if(i>0)e.modifyBox(16,i)}else if(e.inputElement){const i=he("div",{parent:document.body,style:Object.assign(Object.assign({},e.textStyle),{visibility:"hidden"})});i.innerText="AgjpyZ";const a=ge(i).height;document.body.removeChild(i);let n=1;switch(e.tagName){case"SELECT":n=e.toElementInt("size",1);break;case"TEXTAREA":n=e.toElementInt("rows",1);break}s((t-a*Math.max(n,1))/2,true)}else s((t-e.bounds.height)/2)}}}function Ge(e,t){if("0px"===t){const t=e.renderParent;return!!t&&(t.layoutConstraint||t.layoutGrid)}return false}function Xe(e,t){let i=NaN;if(e.styleText){const t=e.cssTryAll({display:"inline-block",height:"auto","max-height":"none","min-height":"auto","line-height":"normal","white-space":"nowrap"});if(t)i=ge(e.element).height,e.cssFinally(t)}else if(e.plainText){const t=e.bounds;i=t.height/(t.numberOfLines||1)}return(t-(!isNaN(i)?i:e.boundingClientRect.height))/2}function Ve(e,t){if(!e.hasPX(t?"width":"height",{percent:false})){const i=e.cssInitial(t?"minWidth":"minHeight",{modified:true});if(se(i,true)&&parseFloat(i)>0&&"100%"!==i)if(t){if(je(e))if(e.setLayoutWidth("0px",false),e.flexibleWidth)e.app("layout_constraintWidth_min",oe(e.parseWidth(i)+e.contentBoxWidth)),e.css("minWidth","auto")}else if($e(e))if(e.setLayoutHeight("0px",false),e.flexibleHeight)e.app("layout_constraintHeight_min",oe(e.parseHeight(i)+e.contentBoxHeight)),e.css(t?"minWidth":"minHeight","auto")}if(t||!e.support.maxDimension){const i=e.cssInitial(t?"maxWidth":"maxHeight",{modified:true});if(se(i,true)&&"100%"!==i)if(t){if(je(e)){const t=e.parseWidth(i);if(t>e.width||e.percentWidth>0)e.setLayoutWidth("0px"),e.app("layout_constraintWidth_max",oe(t+(e.contentBox?e.contentBoxWidth:0))),e.css("maxWidth","auto")}}else if($e(e)){const t=e.parseHeight(i);if(t>e.height||e.percentHeight>0)e.setLayoutHeight("0px"),e.app("layout_constraintHeight_max",oe(t+(e.contentBox?e.contentBoxHeight:0))),e.css("maxHeight","auto")}}}function ze(e,t,i,a){if(t<1&&!isNaN(a)&&e.pageFlow){const n=e.actualParent||e.documentParent;let o,r;if(i){const t=n.box.width;o=!n.gridElement?e.contentBoxWidth/t:0,r=(Math.max(0===e.getBox(8)[0]?e.marginLeft:0,0)+(0===e.getBox(2)[0]?e.marginRight:0))/t}else{const t=n.box.height;o=!n.gridElement?e.contentBoxHeight/t:0,r=(Math.max(0===e.getBox(1)[0]?e.marginTop:0,0)+(0===e.getBox(4)[0]?e.marginBottom:0))/t}if(1===a&&t+r>=1)t=1-r;else{if(o>0)if(a<o)o=Math.max(a,0),a=0;else a-=o;if(0===a)o-=r;else a=Math.max(a-r,0);t=Math.min(t+o,1)}}let n=e.outerMostWrapper;if(n!==e&&n.css(i?"width":"height")!==e.css(i?"width":"height"))n=e;if(1===t&&!e.hasPX(i?"maxWidth":"maxHeight")){if(Fe(n,i?ot(n,n.renderParent):"match_parent",i,false),e!==n)Fe(e,i?ot(e,e.renderParent):"match_parent",i,false)}else if(n.app(i?"layout_constraintWidth_percent":"layout_constraintHeight_percent",pe(t,e.localSettings.floatPrecision)),Fe(n,"0px",i,false),e!==n)Fe(e,"0px",i,false);return a}function Fe(e,t,i,a){if(i)e.setLayoutWidth(t,a);else e.setLayoutHeight(t,a)}function Ue(e,t,i){const a=t?e.percentWidth:e.percentHeight;return a>0?ze(e,a,t,i):i}function qe(e,t=1){const i=e.percentWidth;if(i>0)if(e.renderParent.hasPX("width",{percent:false})&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutWidth(oe(e.actualWidth));else e.setLayoutWidth(ot(e,e.renderParent),false);else if(!e.inputElement)return Ue(e,true,t);return t}function Ye(e,t=1){const i=e.percentHeight;if(i>0)if(e.renderParent.hasPX("height",{percent:false})&&!(e.actualParent||e.documentParent).layoutElement)if(i<1)e.setLayoutHeight(oe(e.actualHeight));else e.setLayoutHeight("match_parent",false);else if(!e.inputElement)return Ue(e,false,t);return t}function je(e){if(e.documentRoot&&(e.hasWidth||e.blockStatic||e.blockWidth))return true;let i=e.renderParent,a=0;while(void 0!==i){if(!i.inlineWidth&&(i.hasWidth||parseInt(i.layoutWidth)>0||i.of(t.CONSTRAINT,32)||i.documentRoot&&(i.blockWidth||i.blockStatic)))return true;else if(i.flexibleWidth){if(++a>1)return false}else if(i.inlineWidth||i.naturalElement&&i.inlineVertical)return false;i=i.renderParent}return false}function $e(e){var t;if(e.documentRoot&&e.hasHeight)return true;const i=e.renderParent;return!!i&&(i.hasHeight||i.layoutConstraint&&i.blockHeight)||true===(null===(t=e.absoluteParent)||void 0===t?void 0:t.hasHeight)}function Ke(e,t){const i=e.anchorChain("left").shift(),a=e.anchorChain("right").shift(),n=e.anchorChain("top").shift(),o=e.anchorChain("bottom").shift();if(i&&a)i.anchor("rightLeft",a.documentId,true),a.anchor("leftRight",i.documentId,true);else if(i){if(i.anchorDelete("rightLeft"),e.alignParent("right"))i.anchor("right",t),Ze(e,i)}else if(a)if(a.anchorDelete("leftRight"),e.alignParent("left"))a.anchor("left",t),Ze(e,a);if(n&&o)n.anchor("bottomTop",o.documentId,true),o.anchor("topBottom",n.documentId,true);else if(n){if(n.anchorDelete("bottomTop"),e.alignParent("bottom"))n.anchor("bottom",t),Je(e,n)}else if(o)if(o.anchorDelete("topBottom"),e.alignParent("top"))o.anchor("top",t),Je(e,o)}function Ze(e,t){t.app("layout_constraintHorizontal_bias",e.app("layout_constraintHorizontal_bias")),t.app("layout_constraintHorizontal_chainStyle",e.app("layout_constraintHorizontal_chainStyle"))}function Je(e,t){t.app("layout_constraintVertical_bias",e.app("layout_constraintVertical_bias")),t.app("layout_constraintVertical_chainStyle",e.app("layout_constraintVertical_chainStyle"))}function Qe(e,t){t.anchorClear();for(const[i,a]of e.namespaces())for(const e in a){switch(e){case"layout_width":case"layout_height":continue;default:if(e.includes("margin"))continue;break}if(e.startsWith("layout_"))t.attr(i,e,a[e],true)}}function et(e,t){const i=nt(e,t);if(i&&i.length>1){let a=false;if(De("center",i))a=true;if(De("fill",i))a=true;if(a)e.android(t,i.join("|"))}}function tt(e,t,i,a,n){if(i>0)return e.app(t?"layout_constraintHorizontal_weight":"layout_constraintVertical_weight",pe(i,e.localSettings.floatPrecision)),true;else if(a){if(n)if(n>1)a/=n;else if(n>0)a*=1-n;e.app(t?"layout_constraintWidth_min":"layout_constraintHeight_min",oe(a))}return false}function it(e,t,i){if(t)for(const a in t){const n=t[a];for(const t in n)e.attr(a,t,n[t],i)}}function at(e,i,a,o,r){let s=0,l=0,c=0,d=0;for(let t=0;t<4;++t){const n=i[t];let h=0===a[n]?e[n]:0;if(0!==h)if(r)switch(t){case 1:if(e.inline){const t=e.documentParent.box.right,i=e.bounds.right;if(Math.floor(i)>t){if(!e.onlyChild&&!e.alignParent("left"))e.setSingleLine(true);continue}else if(i+h>t)h=ue(t-i,0,h)}break;case 2:if(h<0&&e.pageFlow&&!e.blockStatic)h=0;break}else switch(t){case 0:h=e.actualPadding(n,h);break;case 2:if(e.hasPX("height",{percent:false,initial:true})&&(!e.layoutElement&&(e.layoutVertical||e.layoutFrame)||!e.pageFlow)||e.documentParent.gridElement&&e.hasPX("height",{percent:false}))continue;else if(e.floatContainer){let t=-1/0;const i=e.naturalChildren,a=i.length;let n=0;while(n<a){const e=i[n++];if(e.floating)t=Math.max(e.bounds.bottom,t)}h=ue(e.bounds.bottom-t,0,h)}else h=e.actualPadding(n,h);break}if(o)h+=o[n];switch(t){case 0:s=h;break;case 1:l=h;break;case 2:c=h;break;case 3:d=h;break}}if(r){if(e.floating){let t=e.renderParent.renderChildren.find(e=>!e.floating);if(t){const i=Math.floor(e.bounds.top);let a;while(Math.floor(t.bounds.top)===i){a=t;const e=t.innerWrapped;if(e)t=e;else break}if(a){const[e,t]=a.getBox(1);s+=(0===e?a.marginTop:0)+t}}}if(e.positionStatic&&!e.blockWidth&&(d<0||l<0))switch(e.cssAscend("textAlign")){case"center":if(d<l)l+=Math.abs(d),l/=2,d=0;else d+=Math.abs(l),d/=2,l=0;break;case"right":case"end":if(d<0)d=0;break}if("PICTURE"===e.tagName)c+=4,l+=4;switch(e.controlName){case n.RADIO:case n.CHECKBOX:s=Math.max(s-4,0),c=Math.max(c-4,0);break;case n.SELECT:s=Math.max(s-2,0),c=Math.max(c-2,0);break}if(s<0)if(!e.pageFlow){if(c>=0&&e.leftTopAxis&&(e.hasPX("top")||!e.hasPX("bottom"))&&e.translateY(s))s=0}else if(e.blockDimension&&!e.inputElement&&e.translateY(s)){for(const t of e.anchorChain("bottom"))t.translateY(s);s=0}if(c<0)if(!e.pageFlow){if(s>=0&&e.leftTopAxis&&e.hasPX("bottom")&&!e.hasPX("top")&&e.translateY(-c))c=0}else if(e.blockDimension&&!e.inputElement&&e.renderParent.layoutConstraint){for(const t of e.anchorChain("bottom"))t.translateY(-c);c=0}if(d<0)if(!e.pageFlow){if(l>=0&&e.leftTopAxis&&(e.hasPX("left")||!e.hasPX("right"))&&e.translateX(d))d=0}else if("right"===e.float){d=Math.min(-d,-e.bounds.width);for(const t of e.anchorChain("left"))t.translateX(-d);d=0}else if(e.blockDimension&&e.translateX(d)){for(const t of e.anchorChain("right"))t.translateX(d);d=0}if(l<0)if(!e.pageFlow){if(d>=0&&e.leftTopAxis&&e.hasPX("right")&&!e.hasPX("left")&&e.translateX(-l))l=0}else if(e.rightAligned){if(e.translateX(-l))l=0}else if(e.blockDimension&&e.renderParent.layoutConstraint){for(const t of e.anchorChain("right"))t.translateX(l);l=0}}else if(e.visibleStyle.borderWidth&&!e.is(t.LINE))s+=e.borderTopWidth,c+=e.borderBottomWidth,l+=e.borderRightWidth,d+=e.borderLeftWidth;if(0!==s||0!==d||0!==c||0!==l){let t=0,i=0;if((!r||!e.renderParent.layoutGrid)&&e.api>=26)if(s===l&&l===c&&c===d)return void e.android(r?h.MARGIN:h.PADDING,oe(s));else{if(d===l)t=d;if(s===c)i=s}if(0!==t)e.android(r?h.MARGIN_HORIZONTAL:h.PADDING_HORIZONTAL,oe(t));else{if(0!==d)e.android(e.localizeString(r?h.MARGIN_LEFT:h.PADDING_LEFT),oe(d));if(0!==l)e.android(e.localizeString(r?h.MARGIN_RIGHT:h.PADDING_RIGHT),oe(l))}if(0!==i)e.android(r?h.MARGIN_VERTICAL:h.PADDING_VERTICAL,oe(i));else{if(0!==s)e.android(r?h.MARGIN_TOP:h.PADDING_TOP,oe(s));if(0!==c)e.android(r?h.MARGIN_BOTTOM:h.PADDING_BOTTOM,oe(c))}}}function nt(e,t,i){const a=e.android(t);if(""!==a){const e=a.split("|");if(i){if(e.includes(i))return;e.push(i)}return e}else if(i)e.android(t,i)}const ot=(e,t)=>t.layoutConstraint&&!t.flexibleWidth&&(!t.inlineWidth||e.renderChildren.length>0)&&!e.onlyChild&&!(t.documentRoot&&e.blockStatic)&&(e.alignParent("left")&&e.alignParent("right")&&!e.textElement&&!e.inputElement&&!e.controlElement||e.hasPX("minWidth")&&(t.inlineWidth||""===t.layoutWidth&&!t.blockStatic&&!t.hasPX("width"))||e.alignSibling("leftRight")||e.alignSibling("rightLeft"))?"0px":"match_parent",rt=e=>0===e.bounds.width&&0===e.contentBoxWidth&&e.textEmpty&&0===e.marginLeft&&0===e.marginRight&&!e.visibleStyle.background,st=e=>0===e.bounds.height&&0===e.contentBoxHeight&&(0===e.marginTop&&0===e.marginBottom||"hidden"===e.css("overflow")),lt=e=>0===e.renderChildren.length&&!e.multiline&&!isNaN(e.lineHeight)&&!e.has("lineHeight");var ct=e=>{var i;return(i=class View extends e{constructor(){super(...arguments),this.api=29,this.renderChildren=[],this.constraint={horizontal:false,vertical:false,current:{}},this._namespaces={android:{},app:{}},this._containerType=0,this._controlName="",this._boxAdjustment=ce(),this._boxReset=ce(),this._positioned=false}static setConstraintDimension(e,t=NaN){if(t=qe(e,t),Ye(e,1),!e.inputElement)Ve(e,true),Ve(e,false);return t}static setFlexDimension(e,t,i=NaN){const{grow:a,basis:n,shrink:o}=e.flexbox,r="width"===t;if(se(n))tt(e,r,a,e.parseUnit(n,{dimension:t}),o),Fe(e,"0px",r,true);else if("0%"!==n&&le(n)){tt(e,r,a);const t=parseFloat(n)/100;if(r)ze(e,t,true,NaN);else ze(e,t,false,NaN)}else{let n=false;if(e.hasFlex(r?"row":"column"))if(n=tt(e,r,a,e.hasPX(t,{percent:false})?r?e.actualWidth:e.actualHeight:0,o),n)Fe(e,"0px",r,true);if(!n)if(r)i=qe(e,i);else Ye(e,0)}if(o>1)e.app(r?"layout_constrainedWidth":"layout_constrainedHeight","true");if(r)Ye(e);if(!e.inputElement&&!e.imageOrSvgElement)Ve(e,true),Ve(e,false);return i}static availablePercent(e,t,i){const a="width"===t;let n=1,o=false;const r=e.length;let s=0;while(s<r){let r=e[s++];if(r=r.innerMostWrapped,r.pageFlow){if(o=true,r.hasPX(t,{initial:true})){const e=r.cssInitial(t);if(le(e)){n-=parseFloat(e)/100;continue}else if(se(e)){if(a)n-=Math.max(r.actualWidth+r.marginLeft+r.marginRight,0)/i;else n-=Math.max(r.actualHeight+r.marginTop+r.marginBottom,0)/i;continue}}n-=r.linear[t]/i}}return o?Math.max(0,n):1}static getControlName(e,i=29){const a=t[e];return i>=29&&o[a]||n[a]||""}setControlType(e,i){if(this.controlName=e,i)this._containerType=i;else if(0===this._containerType)this._containerType=t.UNKNOWN}setExclusions(){if(super.setExclusions(),!this.hasProcedure(Ie.LOCALIZATION))this.localSettings.supportRTL=false}setLayout(){if(this.plainText)return this.setLayoutWidth("wrap_content",false),void this.setLayoutHeight("wrap_content",false);switch(this.css("visibility")){case"visible":break;case"hidden":this.hide({hidden:true});break;case"collapse":this.hide({collapse:true});break}const e=this.actualParent||this.documentParent,i=this.renderParent,a=!i.inlineWidth,n=!i.inlineHeight,o=this.support.maxDimension;let{layoutWidth:r,layoutHeight:s}=this;if(""===r){if(this.hasPX("width")&&(!this.inlineStatic||""===this.cssInitial("width"))){const t=this.css("width");let n=-1;if(le(t)){const s=()=>"100%"===t&&a&&(o||!this.hasPX("maxWidth"));if(this.inputElement)if(s())r=ot(this,i);else n=this.actualWidth;else if(i.layoutConstraint)if(a)if(s())r=ot(this,i);else View.setConstraintDimension(this,1),r=this.layoutWidth;else n=this.actualWidth;else if(i.layoutGrid)r="0px",this.android("layout_columnWeight",pe(parseFloat(t)/100,this.localSettings.floatPrecision));else if(this.imageElement)if(s())r=ot(this,i);else n=this.bounds.width;else if("100%"===t){if(!o&&this.hasPX("maxWidth")){const t=this.css("maxWidth"),o=this.parseWidth(t),s=this.absoluteParent||e;if("100%"===t)if(a&&Math.ceil(o)>=s.box.width)r=ot(this,i);else n=Math.min(this.actualWidth,o);else if(o>0)if(this.blockDimension)n=Math.min(this.actualWidth,o);else r=Math.floor(o)<s.box.width?"wrap_content":ot(this,i)}if(""===r&&(this.documentRoot||a))r=ot(this,i)}else n=this.actualWidth}else if(se(t))n=this.actualWidth;if(-1!==n)r=oe(n)}else if(this.length>0)switch(this.cssInitial("width")){case"max-content":case"fit-content":this.renderEach(e=>{if(!e.hasPX("width")&&!e.hasPX("maxWidth"))e.setLayoutWidth("wrap_content")}),r="wrap_content";break;case"min-content":{const e=[];let t=0;this.renderEach(i=>{if(!i.textElement||i.hasPX("width"))t=Math.max(i.actualWidth,t);else if(t=Math.max(i.width,t),i.support.maxDimension)e.push(i)});const i=e.length;if(i>0&&t>0){const a=oe(t);let n=0;while(n<i){const t=e[n++];if(!t.hasPX("maxWidth"))t.css("maxWidth",a)}}r="wrap_content";break}}if(""===r)if(this.textElement&&this.textEmpty&&this.inlineFlow&&!this.visibleStyle.backgroundImage)r=oe(this.actualWidth);else if(this.imageElement&&this.hasHeight)r="wrap_content";else if(a&&(this.nodeGroup&&(i.layoutFrame&&(this.hasAlign(256)||this.hasAlign(1024))||this.hasAlign(16384))||e.flexElement&&this.some(e=>e.multiline,{cascade:true})||this.layoutGrid&&this.some(e=>e.flexibleWidth)))r=ot(this,i);else if(!this.imageElement&&!this.inputElement&&!this.controlElement){const t=t=>{var a;if(e.pageFlow||!this.some(e=>e.textElement)){if(this.styleText){if((null===(a=this.textBounds)||void 0===a?void 0:a.numberOfLines)>1){if(t)r="match_parent";return}else if(this.cssTry("display","inline-block")){const t=Math.ceil(ge(this.element).width);return r=t>=e.box.width?"wrap_content":"match_parent",void this.cssFinally("display")}}r=ot(this,i)}};if(i.layoutGrid){if(this.blockStatic&&"1"===i.android("columnCount"))r=ot(this,i)}else if(this.blockStatic){if(this.documentRoot)r="match_parent";else if(!e.layoutElement)if(this.nodeGroup||i.hasWidth||this.hasAlign(32)||this.rootElement)r=ot(this,i);else t(true);else if(a&&(e.gridElement&&!i.layoutElement||e.flexElement&&this.layoutVertical&&this.some(e=>e.textElement&&e.multiline)))r=ot(this,i)}else if(this.floating&&this.block&&!this.rightAligned&&this.alignParent("left")&&this.alignParent("right"))r="match_parent";else if(this.naturalElement&&this.inlineStatic&&!this.blockDimension&&this.some(e=>e.naturalElement&&e.blockStatic)&&!e.layoutElement&&(i.layoutVertical||!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft")))t(false)}this.setLayoutWidth(r||"wrap_content")}if(""===s){if(this.hasPX("height")&&(!this.inlineStatic||""===this.cssInitial("height"))){const a=this.css("height");let r=-1;if(le(a)){if(this.inputElement)r=this.bounds.height;else if(this.imageElement)if("100%"===a&&n)s="match_parent";else r=this.bounds.height;else if("100%"===a){if(!o){const t=this.css("maxHeight"),i=this.parseHeight(t),a=this.absoluteParent||e;if("100%"===t)if(n||Math.ceil(i)>=a.box.height)s="match_parent";else r=Math.min(this.actualHeight,i);else if(i>0)if(this.blockDimension)r=Math.min(this.actualHeight,i);else s=Math.floor(i)<a.box.height?"wrap_content":"match_parent";else if(n)s="match_parent"}if(""===s)if(!this.pageFlow){if("fixed"===this.css("position"))s="match_parent";else if(i.layoutConstraint&&(this.hasPX("top")||this.hasPX("bottom")))s="0px"}else if(this.documentRoot||n&&this.onlyChild)s="match_parent"}if(""===s&&this.hasHeight)r=this.actualHeight}else if(se(a))r=this.actualHeight;if(-1!==r){if(this.is(t.LINE)&&"HR"!==this.tagName&&this.hasPX("height",{initial:true}))r+=this.borderTopWidth+this.borderBottomWidth;if(this.styleText&&this.multiline&&!this.overflowY&&!this.hasPX("minHeight")&&!e.layoutElement)this.android("minHeight",oe(r)),s="wrap_content";else s=oe(r)}}if(""===s)if(this.textElement&&this.textEmpty&&!this.visibleStyle.backgroundImage){if(i.layoutConstraint&&!this.floating&&this.alignParent("top")&&this.actualHeight>=(this.absoluteParent||e).box.height)s="0px",this.anchor("bottom","parent");else if(this.naturalChild&&!this.pseudoElement)s=oe(this.actualHeight)}else if(this.imageElement&&this.hasWidth)s="wrap_content";else if("table-cell"===this.display&&e.hasHeight)s="match_parent";this.setLayoutHeight(s||"wrap_content")}else if("0px"===s&&i.inlineHeight&&!(this.alignParent("top")&&this.alignParent("bottom"))&&""===i.android("minHeight")&&!e.layoutElement&&e===this.absoluteParent)this.setLayoutHeight("wrap_content");if(this.hasPX("minWidth")&&(!this.hasFlex("row")||e.flexElement&&!this.flexibleWidth)){const e=this.css("minWidth");if("100%"===e&&this.inlineWidth)this.setLayoutWidth(ot(this,i));else this.android("minWidth",oe(this.parseWidth(e)+(this.contentBox?this.contentBoxWidth:0)),false)}if(this.hasPX("minHeight")&&"table-cell"!==this.display&&(!this.hasFlex("column")||e.flexElement&&!this.flexibleHeight)){const e=this.css("minHeight");if("100%"===e&&n&&this.inlineHeight)this.setLayoutHeight("match_parent");else this.android("minHeight",oe(this.parseHeight(e)+(this.contentBox?this.contentBoxHeight:0)),false)}if(o){const e=this.css("maxWidth");let t=this.css("maxHeight"),o=-1;if(se(e,true))if("100%"===e){if(!this.hasPX("width",{initial:true}))if(this.svgElement)o=this.bounds.width;else if(this.imageElement){if(o=this.toElementInt("naturalWidth"),o>this.documentParent.actualWidth)this.setLayoutWidth(ot(this,i)),this.setLayoutHeight("wrap_content"),o=-1,t=""}else if(a)this.setLayoutWidth(ot(this,i))}else o=this.parseWidth(e);else if(!this.pageFlow&&this.multiline&&this.inlineWidth&&!this.preserveWhiteSpace&&(this.ascend({condition:e=>e.hasPX("width")}).length>0||!this.textContent.includes("\n")))o=this.actualWidth;if(o>=0)this.android("maxWidth",oe(o),false);if(se(t,true)){let e=-1;if("100%"===t&&!this.svgElement){if(!this.hasPX("height",{initial:true}))if(n)this.setLayoutHeight("match_parent");else e=this.imageElement?this.toElementInt("naturalHeight"):this.parseHeight(t)}else e=this.parseHeight(t);if(e>=0)if(this.android("maxHeight",oe(e)),this.flexibleHeight)this.setLayoutHeight("wrap_content")}}}setAlignment(){const e=this.outerMostWrapper,t=this.renderParent,i=e.renderParent||t,a=this.autoMargin;let n=We(this.cssInitial("textAlign",{modified:true}),false),o=We(this.cssAscend("textAlign"),true);if(this.nodeGroup&&""===n&&!this.hasAlign(256)){const e=this.actualParent;if(e)n=We(e.cssInitial("textAlign",{modified:true}),false)}if(this.pageFlow){let r="";if(this.inlineVertical&&(i.layoutFrame||i.layoutGrid)||"table-cell"===this.display){const t="table-cell"===this.display?"gravity":"layout_gravity";switch(this.cssInitial("verticalAlign",{modified:true})){case"top":e.mergeGravity(t,"top");break;case"middle":e.mergeGravity(t,"center_vertical");break;case"bottom":e.mergeGravity(t,"bottom");break}}if(!this.blockWidth){if(i.layoutVertical||this.documentRoot&&(this.layoutVertical||this.layoutFrame))if(this.floating)e.mergeGravity("layout_gravity",this.float);else if(!Be(e,a)&&""!==n&&this.hasWidth&&!this.blockStatic&&!this.inputElement&&"table"!==this.display)e.mergeGravity("layout_gravity",n,false);if(this.rightAligned)r="right";else if(this.nodeGroup)if(this.renderChildren.every(e=>e.rightAligned))r="right";else if(this.hasAlign(256)&&!this.renderChildren.some(e=>e.rightAligned))r="left"}else if(this.rightAligned&&e.nodeGroup&&e.layoutVertical)e.renderEach(e=>{if(e.rightAligned)e.mergeGravity("layout_gravity","right")});if(t.layoutFrame){if(!Be(this,a)){if(!this.innerWrapped){if(this.floating)r=this.float;if(""!==r&&!t.naturalElement&&(t.inlineWidth||!t.documentRoot&&this.onlyChild))t.mergeGravity("layout_gravity",r),r=""}if(this.centerAligned)this.mergeGravity("layout_gravity",We("center",false));else if(this.rightAligned&&t.blockWidth)this.mergeGravity("layout_gravity","right")}if(this.onlyChild&&"table-cell"===e.documentParent.display){let t;switch(e.documentParent.css("verticalAlign")){case"top":t="top";break;case"bottom":t="bottom";break;default:t="center_vertical";break}this.mergeGravity("layout_gravity",t)}}if(""!==r)if(this.blockWidth){if(""===n||"right"===r)n=r}else(e.blockWidth&&this!==e?this:e).mergeGravity("layout_gravity",r);else if(Be(e.inlineWidth?e:this,a)&&""!==n)o=""}if(""!==o&&this.blockStatic&&!this.centerAligned&&!this.rightAligned)e.mergeGravity("layout_gravity","left",false);if(!(this.layoutConstraint||this.layoutFrame||this.layoutElement||this.layoutGrid))if(""!==n){if(!this.imageOrSvgElement)this.mergeGravity("gravity",n)}else if(""!==o&&!this.inputElement)if(this.imageOrSvgElement){if(this.pageFlow)this.mergeGravity("layout_gravity",o)}else if(!this.nodeGroup||!this.hasAlign(256))this.mergeGravity("gravity",o);if(this.textElement&&this.layoutElement){switch(this.css("justifyContent")){case"center":case"space-around":case"space-evenly":this.mergeGravity("gravity","center_horizontal");break;case"flex-end":this.mergeGravity("gravity","right");break}switch(this.css("alignItems")){case"center":this.mergeGravity("gravity","center_vertical");break;case"flex-end":this.mergeGravity("gravity","bottom");break}}if(a.vertical&&(t.layoutFrame||t.layoutVertical&&t.layoutLinear))e.mergeGravity("layout_gravity",a.topBottom?"center_vertical":a.top?"bottom":"top")}setBoxSpacing(){at(this,Ce,this._boxReset,this._boxAdjustment,true),at(this,ke,this._boxReset,this._boxAdjustment,false)}apply(e){for(const t in e){const i=e[t];switch(typeof i){case"object":if(i)for(const e in i)this.attr(t,e,i[e]);break;case"string":case"number":case"boolean":this.attr("_",t,i.toString());break}}}clone(e,t){let i,a;if(t)({attributes:i,position:a}=t);const n=new View(!isNaN(e)?e:this.id,this.sessionId,this.element||void 0);if(void 0!==e)n.setControlType(this.controlName,this.containerType);else n.controlId=this.controlId,n.controlName=this.controlName,n.containerType=this.containerType;if(this.cloneBase(n),false!==i){Object.assign(n.unsafe("boxReset"),this._boxReset),Object.assign(n.unsafe("boxAdjustment"),this._boxAdjustment);for(const e in this._namespaces){const t=this._namespaces[e];for(const i in t)n.attr(e,i,"id"===i&&"android"===e?n.documentId:t[i])}}if(false!==a){n.anchorClear();const e=this.documentId;if(n.anchor("left",e))n.setBox(8,{reset:1,adjustment:0});if(n.anchor("top",e))n.setBox(1,{reset:1,adjustment:0})}return n.saveAsInitial(),n}extractAttributes(e){if("rtl"===this.dir&&!this.imageOrSvgElement)if(this.textElement)this.android("textDirection","rtl");else if(this.renderChildren.length>0)this.android("layoutDirection","rtl");if(this.styleElement||this.hasAlign(8192)){const e=Y(this.dataset,"android");if(e)for(const t in e){const i="attr"===t?"android":/^attr[A-Z]/.test(t)?me(t.substring(4),false):"";if(""!==i)for(const a of e[t].split(";")){const[e,t]=a.split("::");if(t)this.attr(i,e,t)}}if(!this.svgElement){const e=this.css("opacity");if("1"!==e&&ve(e))this.android("alpha",e)}}const t="\n"+"\t".repeat(e),i=this.combine();let a="";const n=i.length;let o=0;while(o<n)a+=t+i[o++];return a}alignParent(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){const i=Le[e];if(i)return"parent"===t.app(this.localizeString(i))}else if(i.layoutRelative){const i=Oe[e];if(i)return"true"===t.android(this.localizeString(i))}else if(i.layoutLinear){const a=i.renderChildren;if(i.layoutVertical)switch(e){case"top":return t===a[0];case"bottom":return t===a[a.length-1]}else switch(e){case"left":case"start":return t===a[0];case"right":case"end":return t===a[a.length-1]}}return false}alignSibling(e,t){const i=this.anchorTarget,a=i.renderParent;if(a)if(t){if(a.layoutConstraint){const a=Le[e];if(a)i.app(this.localizeString(a),t)}else if(a.layoutRelative){const a=Pe[e];if(a)i.android(this.localizeString(a),t)}}else if(a.layoutConstraint){const t=Le[e];if(t){const e=i.app(this.localizeString(t));return"parent"!==e&&e!==a.documentId?e:""}}else if(a.layoutRelative){const t=Pe[e];if(t)return i.android(this.localizeString(t))}return""}actualRect(e,t="linear"){let i=this[t][e];if(this.positionRelative&&this.floating)switch(e){case"top":if(this.hasPX("top"))i+=this.top;else i-=this.bottom;break;case"bottom":if(!this.hasPX("top"))i-=this.bottom;else i+=this.top;break;case"left":if(this.hasPX("left"))i+=this.left;else i-=this.right;break;case"right":if(!this.hasPX("left"))i-=this.right;else i+=this.left;break}if(this.inputElement){const a=this.companion;if((null==a?void 0:a.labelFor)===this&&!a.visible){const n=a[t][e];switch(e){case"top":case"left":return Math.min(n,i);case"right":case"bottom":return Math.max(n,i)}}}return i}translateX(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=ye(i.android("translationX"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const e=a.box,t=this.linear;if(t.left+s<e.left)s=Math.max(t.left-e.left,0);else if(t.right+s>e.right)s=Math.max(e.right-t.right,0)}if(0!==s)i.android("translationX",oe(s));else i.delete("android","translationX");return true}return false}translateY(e,t){const i=this.anchorTarget,a=i.renderParent;if(null==a?void 0:a.layoutConstraint){let n,o,r;if(t)({oppose:n,accumulate:o,contain:r}=t);let s=ye(i.android("translationY"));if(false===n&&(s>0&&e<0||s<0&&e>0))return false;else if(false!==o)s+=e;if(r){const e=a.box,t=this.linear;if(t.top+s<e.top)s=Math.max(t.top-e.top,0);else if(t.bottom+s>e.bottom)s=Math.max(e.bottom-t.bottom,0)}if(0!==s)i.android("translationY",oe(s));else i.delete("android","translationY");return true}return false}localizeString(e){return Q(e,this.localSettings.supportRTL,this.api)}removeTry(e){if(e&&!e.beforeReplace){const t=e.replaceWith||e.alignSiblings;if(t)e.beforeReplace=()=>this.anchorClear(t)}return super.removeTry(e)}hasFlex(e){const t=this.actualParent;if(true===(null==t?void 0:t.flexdata[e])){if("column"===e&&!t.hasHeight){const e=t.actualParent;if(e){if(e.flexElement&&!e.flexdata.column){if(!e.hasHeight){let i=0,a=0;for(const n of e){const e=(n.data(Ae.FLEXBOX,"boundsData")||n.bounds).height;if(e>i)i=e;if(n===t)if(a=e,a<i)break}if(a>=i)return false}}else if(!e.gridElement)return false}else return false}return this.flexbox.grow>0||1!==this.flexbox.shrink}return false}hide(e){if(e)if(e.hidden)return void this.android("visibility","invisible");else if(e.collapse)return void this.android("visibility","gone");super.hide(e)}android(e,t,i=true){if(t){if(""!==(t=this.attr("android",e,t,i)))return t}else if(""===t)return this.delete("android",e),"";return this._namespaces.android[e]||""}app(e,t,i=true){if(t){if(""!==(t=this.attr("app",e,t,i)))return t}else if(""===t)return this.delete("app",e),"";return this._namespaces.app[e]||""}formatted(e,t=true){const i=/^(?:([a-z]+):)?(\w+)="((?:@\+?[a-z]+\/)?.+)"$/.exec(e);if(i)this.attr(i[1]||"_",i[2],i[3],t)}anchor(e,t="",i){const a=this.anchorTarget,n=a.renderParent;if(n&&a.documentId!==t)if(n.layoutConstraint){if(""===t||void 0===a.constraint.current[e]||i){const n="parent"===t;if(void 0===i&&""!==t)i=n;const o=Le[e];if(o){let r=false;switch(a.app(this.localizeString(o),t,i),e){case"left":case"right":if(n)a.constraint.horizontal=true;case"leftRight":case"rightLeft":r=true;break;case"top":case"bottom":case"baseline":if(n)a.constraint.vertical=true;break}return a.constraint.current[e]={documentId:t,horizontal:r},true}}}else if(n.layoutRelative){const n="true"===t;if(void 0===i&&""!==t)i=n;const o=(n?Oe:Pe)[e];if(o)return a.android(this.localizeString(o),t,i),true}return false}anchorParent(e,t,i="",a){const n=this.anchorTarget,o=n.renderParent;if(o){const r="horizontal"===e;if(o.layoutConstraint){if(a||!n.constraint[e]){if(r)n.anchor("left","parent",a),n.anchor("right","parent",a),n.constraint.horizontal=true;else n.anchor("top","parent",a),n.anchor("bottom","parent",a),n.constraint.vertical=true;if(void 0!==t)n.anchorStyle(e,t,i,a);return true}}else if(o.layoutRelative)return n.anchor(r?"centerHorizontal":"centerVertical","true",a),true}return false}anchorStyle(e,t,i,a=true){const n=this.anchorTarget;if("horizontal"===e){if(n.app("layout_constraintHorizontal_bias",t.toString(),a),i)n.app("layout_constraintHorizontal_chainStyle",i,a)}else if(n.app("layout_constraintVertical_bias",t.toString(),a),i)n.app("layout_constraintVertical_chainStyle",i,a)}anchorChain(e){const t=[],i=this.anchorTarget,a=i.renderParent;if(a&&(a.layoutConstraint||a.layoutRelative)){let n,o;switch(e){case"top":n="topBottom",o="bottomTop";break;case"right":n="rightLeft",o="leftRight";break;case"bottom":n="bottomTop",o="topBottom";break;case"left":n="leftRight",o="rightLeft";break}const r=a.renderChildren;let s=i;do{const e=s.alignSibling(n);if(""!==e){const i=r.find(t=>t.documentId===e);if((null==i?void 0:i.alignSibling(o))===s.documentId)t.push(i),s=i;else break}else break}while(true)}return t}anchorDelete(...e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint)t.delete("app",...xe(e,e=>this.localizeString(Le[e])));else if(i.layoutRelative){const i=[];let a=0;while(a<e.length){const t=e[a++];let n=Pe[t];if(n)i.push(this.localizeString(n));if(n=Oe[t],n)i.push(this.localizeString(n))}t.delete("android",...i)}}anchorClear(e){const t=this.anchorTarget,i=t.renderParent;if(i)if(i.layoutConstraint){if(true===e)Ke(t,"parent");else if(e)Qe(t,e);t.anchorDelete(...Object.keys(Le)),t.delete("app","layout_constraintHorizontal_bias","layout_constraintHorizontal_chainStyle","layout_constraintVertical_bias","layout_constraintVertical_chainStyle")}else if(i.layoutRelative){if(true===e)Ke(t,"true");else if(e)Qe(t,e);t.anchorDelete(...Object.keys(Oe)),t.anchorDelete(...Object.keys(Pe))}}supported(e,t={}){var i;if("function"==typeof O.android[e]){const i=O.android[e](t,this.api,this);if(!i||we(t))return i}let a=this.api;while(a<=29){const n=null===(i=P[a++])||void 0===i?void 0:i.android[e];switch(typeof n){case"boolean":return n;case"function":return n(t,this.api,this)}}return true}combine(...e){const t=0===e.length,i=[];let a=false,n="";for(const o in this._namespaces)if(t||e.includes(o)){const e=this._namespaces[o];let t=o+":";switch(o){case"android":if(this.api<29)for(let a in e)if("id"===a)n=e[a];else{const n={};let o=e[a];if(!this.supported(a,n))continue;if(we(n)){if(Ee(n.attr))a=n.attr;if(Ee(n.value))o=n.value}i.push(t+`${a}="${o}"`)}else for(const a in e)if("id"===a)n=e[a];else i.push(t+`${a}="${e[a]}"`);a=true;break;case"_":t="";default:for(const a in e)i.push(t+`${a}="${e[a]}"`);break}}if(i.sort((e,t)=>e>t?1:-1),a)i.unshift(`android:id="${n||"@+id/"+this.controlId}"`);return i}mergeGravity(e,i,a=true){if("layout_gravity"===e){const e=this.renderParent;if(e)if(U(i)&&(this.blockWidth||e.inlineWidth&&this.onlyChild||!a&&this.outerWrapper&&this.hasPX("maxWidth")))return;else if(e.layoutRelative){if("center_horizontal"===i&&!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))return this.anchorDelete("left","right"),void this.anchor("centerHorizontal","true")}else if(e.layoutConstraint){if(!e.layoutHorizontal&&!this.positioned)switch(i){case"top":this.anchorStyle("vertical",0);break;case"right":case"end":if(!this.alignSibling("rightLeft"))if(this.anchor("right","parent",false),this.alignParent("left")||this.alignSibling("left"))this.anchorStyle("horizontal",1);break;case"bottom":this.anchorStyle("vertical",1);break;case"left":case"start":if(!this.alignSibling("leftRight"))if(this.anchor("left","parent",false),this.alignParent("right")||this.alignSibling("right"))this.anchorStyle("horizontal",0);break;case"center_horizontal":if(!this.alignSibling("leftRight")&&!this.alignSibling("rightLeft"))this.anchorParent("horizontal",.5);break}return}}else switch(this.tagName){case"#text":case"IMG":case"SVG":case"HR":case"VIDEO":case"AUDIO":case"OBJECT":case"EMBED":return;case"INPUT":switch(this.toElementString("type")){case"radio":case"checkbox":case"image":case"range":return}break;default:if(this.controlElement||this.is(t.TEXT)&&this.textEmpty||this.length>0&&(this.layoutFrame||this.layoutConstraint||this.layoutGrid))return;break}const n=nt(this,e,this.localizeString(i));if(n){let t="",i="",o="",r="",s=0;while(s<n.length){const e=n[s++];if(U(e)){if(""===t||a)t=e}else if(q(e)){if(""===i||a)i=e}else o+=(""!==o?"|":"")+e}if(r=""!==t&&""!==i?t+"|"+i:t||i,""!==o)r+=(""!==r?"|":"")+o;this.android(e,r)}}applyOptimizations(){var e;const{lineHeight:t,renderChildren:i,renderParent:a}=this;if(a){if(this.renderExclude){if(!(this.alignSibling("topBottom")||this.alignSibling("bottomTop")||this.alignSibling("leftRight")||this.alignSibling("rightLeft")))this.hide({remove:true});else this.hide({collapse:true});return}if(this.layoutLinear)if(this.layoutVertical){if(!a.layoutFrame&&!this.documentRoot&&i.length>0&&(this.baselineElement||!i[0].multiline&&i.every(e=>e.textElement)))this.android("baselineAlignedChildIndex","0")}else{let e=!this.baselineActive;if(i.some(e=>e.floating)&&!i.some(e=>e.imageElement&&e.baseline))this.android("baselineAligned","false"),e=false;const t=i.length;for(let a=0;a<t;++a){const n=i[a];if(n.setSingleLine(a>0&&a===t-1),e&&n.baselineElement)this.android("baselineAlignedChildIndex",a.toString()),e=false}}if(t>0){const n=this.has("lineHeight",{map:"initial"});if(this.multiline)Me(this,t,n);else if(i.length>0)if(!n&&this.layoutHorizontal&&this.alignSibling("baseline"))return;else if(this.layoutVertical||this.layoutFrame)this.renderEach(e=>{if(lt(e))He(e,e.lineHeight||t,true,true,true)});else{let a=false;const n=this.horizontalRows||[i],o=n.length;for(let i=0;i<o;++i){const r=n[i],s=n[i+1],l=!!s&&(1===s.length&&s[0].multiline||s[0].lineBreakLeading||i<o-1&&!!(null===(e=s.find(e=>e.baselineActive))||void 0===e?void 0:e.has("lineHeight"))),c=r[0],d=1===r.length,h=d&&!c.multiline,f=!d&&r.find(e=>e.baselineActive&&0===e.renderChildren.length),u=h||!a&&(i>0||1===o)||c.lineBreakLeading,p=h||!l&&(i<o-1||1===o);if(f)if(!isNaN(f.lineHeight)&&!f.has("lineHeight"))He(f,t,false,u,p);else{a=true;continue}else{const e=r.length;let i=0;while(i<e){const e=r[i++];if(lt(e))He(e,t,d,u,p)}}a=d&&c.multiline}}else if((n||0===a.lineHeight)&&this.inlineText&&!this.textEmpty)He(this,t,n,true,true)}if(et(this,"layout_gravity"),et(this,"gravity"),this.imageElement){const{layoutWidth:e,layoutHeight:t}=this;if("wrap_content"===e&&"wrap_content"!==t||"wrap_content"!==e&&"wrap_content"===t||"match_parent"===e||"match_parent"===t||"0px"===e||"0px"===t||""!==this.android("minWidth")||""!==this.android("minHeight")||""!==this.android("maxWidth")||""!==this.android("maxHeight"))this.android("adjustViewBounds","true")}if(this.has("transform")){const e=de(this.css("transform"),{accumulate:true,boundingBox:this.bounds,fontSize:this.fontSize});let t=false,i=0;while(i<e.length){const a=e[i++],[n,o,r]=a.values;switch(a.method){case"rotate":if(n===o)this.android("rotation",n.toString());else{if(0!==n)this.android("rotationX",n.toString());if(0!==o)this.android("rotationY",o.toString())}t=true;break;case"scale":if(1!==n)this.android("scaleX",n.toString());if(1!==o)this.android("scaleY",o.toString());t=true;break;case"translate":if(0!==n&&!this.translateX(n))this.android("translationX",oe(n));if(0!==o&&!this.translateY(o))this.android("translationY",oe(o));if(0!==r)this.android("translationZ",oe(r));break}}if(t&&this.has("transformOrigin")){const{left:e,top:t}=re(this.css("transformOrigin"),this.bounds,{fontSize:this.fontSize});if(0!==e)this.android("transformPivotX",oe(e));if(0!==t)this.android("transformPivotY",oe(t))}}if(this.onlyChild&&i.length>0&&this.controlName===a.controlName&&!this.visibleStyle.borderWidth&&""===this.elementId){let e=true;for(const t in this._namespaces){const i=a.unsafe("namespaces")[t];if(i){const a=this._namespaces[t];for(const t in a)if("id"!==t&&a[t]!==i[t]){e=false;break}}else{e=false;break}}if(e){const e=this.renderTemplates,t=e.length;let n=0;while(n<t){const t=e[n++];t.parent=a,t.node.renderParent=a}a.renderTemplates=e,a.renderChildren=i;const o=this._boxReset,r=this._boxAdjustment;a.modifyBox(16,(0===o.marginTop?this.marginTop:0)+(0===o.paddingTop?this.paddingTop:0)+r.marginTop+r.paddingTop),a.modifyBox(32,(0===o.marginRight?this.marginRight:0)+(0===o.paddingRight?this.paddingRight:0)+r.marginRight+r.paddingRight),a.modifyBox(64,(0===o.marginBottom?this.marginBottom:0)+(0===o.paddingBottom?this.paddingBottom:0)+r.marginBottom+r.paddingBottom),a.modifyBox(128,(0===o.marginLeft?this.marginLeft:0)+(0===o.paddingLeft?this.paddingLeft:0)+r.marginLeft+r.paddingLeft)}}}}applyCustomizations(e=true){const{tagName:t,controlName:i}=this;let a=P[0].assign;it(this,a[t],e),it(this,a[i],e);const n=P[this.api];if(n)a=n.assign,it(this,a[t],e),it(this,a[i],e)}setSingleLine(e){if(this.textElement&&this.naturalChild&&(e||!this.hasPX("width"))){const t=this.actualParent;if(!(t.preserveWhiteSpace||"CODE"===t.tagName||this.multiline&&"nowrap"!==t.css("whiteSpace")))this.android("maxLines","1");if(e&&this.textContent.trim().length>1)this.android("ellipsize","end")}}setLayoutWidth(e,t=true){this.android("layout_width",e,t)}setLayoutHeight(e,t=true){this.android("layout_height",e,t)}get controlElement(){switch(this.tagName){case"PROGRESS":case"METER":return true;case"INPUT":return"range"===this.toElementString("type")}return false}get imageElement(){switch(this.tagName){case"IMG":case"CANVAS":return true}return false}set containerType(e){this._containerType=e}get containerType(){if(0===this._containerType){const e=l[this.containerName];if(e)this._containerType=e}return this._containerType}set controlId(e){this._controlId=e}get controlId(){var e;const t=this._controlId;if(void 0===t){const t=this.controlName;if(t){let i;if(this.styleElement){const t=(null===(e=this.elementId)||void 0===e?void 0:e.trim())||fe(this.element,"name");if(""!==t)if(i=t.replace(/[^\w$\-_.]/g,"_").toLowerCase(),"parent"===i||u.includes(i))i="_"+i}return this._controlId=Se(Ne.generateId("android",i||Te(t,".").toLowerCase(),i?0:1))}else if(0===this.id)return"baseroot";else return""}return t}get documentId(){const e=this.controlId;return""!==e?"@id/"+e:""}get support(){let e=this._cached.support;if(void 0===e)if(e={positionTranslation:this.layoutConstraint,positionRelative:this.layoutRelative,maxDimension:this.textElement||this.imageOrSvgElement},0!==this.containerType)this._cached.support=e;return e}set renderExclude(e){this._cached.renderExclude=e}get renderExclude(){const e=this._cached.renderExclude;if(void 0!==e)return e;else if(this.naturalChild&&!this.plainText&&!this.rootElement)if(!this.pageFlow)return this._cached.renderExclude=rt(this)||st(this)||/^rect\(0[a-z]*,\s+0[a-z]*,\s+0[a-z]*,\s+0[a-z]*\)$/.test(this.css("clip")),this._cached.renderExclude;else if(this.styleElement&&0===this.length&&!this.imageElement&&!this.pseudoElement){const e=this.renderParent||this.parent;if(e.layoutFrame)return rt(this)||st(this);else if(e.layoutVertical)return st(this);else return rt(this)&&(e.layoutHorizontal||st(this))}return false}get baselineHeight(){var e;let t=this._cached.baselineHeight;if(void 0===t){if(this.plainText){const{height:e,numberOfLines:i}=this.bounds;t=e/(i||1)}else{if(this.multiline&&this.cssTry("white-space","nowrap"))t=this.boundingClientRect.height,this.cssFinally("white-space");else if(this.hasHeight)t=this.actualHeight;else if("PICTURE"===this.tagName)t=Math.max((null===(e=this.naturalElements.find(e=>"IMG"===e.tagName))||void 0===e?void 0:e.height)||0,this.bounds.height);else t=this.bounds.height;if(this.naturalElement&&!this.pseudoElement&&this.lineHeight>t)t=this.lineHeight;else if(this.inputElement)switch(this.controlName){case n.RADIO:case n.CHECKBOX:t+=8;break;case n.SELECT:t/=this.toElementInt("size")||1,t+=4;break;default:t+=Math.max(-1*be(this.verticalAlign),0);break}}this._cached.baselineHeight=t}return t}get innerWrapped(){return this._innerWrapped}set innerWrapped(e){if(!this.naturalChild&&e)e=e.outerMostWrapper,this._innerWrapped=e,e.outerWrapper=this}get anchorTarget(){let e=this;do{const t=e.renderParent;if(t){if(t.layoutConstraint||t.layoutRelative)return e}else break;e=e.outerWrapper}while(void 0!==e);return this}set anchored(e){this.constraint.horizontal=e,this.constraint.vertical=e}get anchored(){return this.constraint.horizontal&&this.constraint.vertical}get imageOrSvgElement(){return this.imageElement||this.svgElement}get layoutFrame(){return this._containerType===t.FRAME}get layoutLinear(){return this._containerType===t.LINEAR}get layoutGrid(){return this._containerType===t.GRID}get layoutRelative(){return this._containerType===t.RELATIVE}get layoutConstraint(){return this._containerType===t.CONSTRAINT}get layoutWidth(){return this._namespaces.android.layout_width||""}get layoutHeight(){return this._namespaces.android.layout_height||""}get inlineWidth(){return"wrap_content"===this.layoutWidth}get inlineHeight(){return"wrap_content"===this.layoutHeight}get blockWidth(){return"match_parent"===this.layoutWidth}get blockHeight(){return"match_parent"===this.layoutHeight}get flexibleWidth(){return Ge(this,this.layoutWidth)}get flexibleHeight(){return Ge(this,this.layoutHeight)}get labelFor(){return this._labelFor}set labelFor(e){if(e)e.companion=this;this._labelFor=e}set localSettings(e){if(this._localSettings)Object.assign(this._localSettings,e);else this._localSettings=Object.assign({},e)}get localSettings(){return this._localSettings}set positioned(e){this._positioned=e}get positioned(){return this._positioned||!!this.target}get target(){const e=this.dataset.androidTarget;return e?document.getElementById(e):null}}).horizontalMatchConstraint=(e,t)=>ot(e,t),i};class View extends(ct(squared.base.NodeUI)){}class ViewGroup extends(ct(squared.base.NodeGroupUI)){constructor(e,t,i){super(e,t.sessionId),this.depth=t.depth,this.containerName=t.containerName+"_GROUP",this.actualParent=t.actualParent,this.documentParent=t.documentParent;const a=i.length;let n=0;while(n<a)i[n++].parent=this}set containerType(e){this._containerType=e}get containerType(){return this._containerType}}const{PLATFORM:dt,isPlatform:ht}=squared.lib.client,{parseColor:ft}=squared.lib.color,{CSS_UNIT:ut,formatPX:pt,getSrcSet:gt,hasComputedStyle:mt,isLength:bt,isPercent:yt}=squared.lib.css,{getElementsBetweenSiblings:St,getRangeClientRect:Tt}=squared.lib.dom,{truncate:wt}=squared.lib.math,{getElementAsNode:vt,getPseudoElt:Et}=squared.lib.session,{assignEmptyValue:xt,convertFloat:At,convertWord:_t,hasBit:Rt,hasMimeType:It,isString:Nt,iterateArray:Ct,parseMimeType:kt,partitionArray:Lt,safeNestedArray:Pt,withinRange:Ot}=squared.lib.util,{APP_SECTION:Wt,BOX_STANDARD:Dt,NODE_ALIGNMENT:Bt,NODE_PROCEDURE:Mt,NODE_RESOURCE:Ht,NODE_TEMPLATE:Gt}=squared.base.lib.enumeration,Xt=squared.base.NodeUI;function Vt(e){e.sort((e,t)=>{const i=e.float,a=t.float;if("none"!==i&&"none"!==a){if(i!==a)return"left"===i?-1:1;else if("right"===i&&"right"===a)return 1}else if("none"!==i)return"left"===i?-1:1;else if("none"!==a)return"left"===a?1:-1;return 0})}function zt(e,t){const i=e.actualParent;if(e===t.actualParent)return-1;else if(i===t)return 1;const{pageFlow:a,zIndex:n}=e,{pageFlow:o,zIndex:r}=t;if(!a&&o)return n>=0?1:-1;else if(!o&&a)return r>=0?-1:1;else if(n===r)return e.childIndex<t.childIndex?-1:1;return n<r?-1:1}function Ft(e,i,a,n){let o,r=0;const s=i.length;let l=0;while(l<s){const s=i[l++];if(s.baselineAltered)continue;let c=s.baselineHeight;if(c>0||s.textElement)if(s.blockVertical&&e.blockVertical)s.anchor("bottom",e.documentId);else if(a&&s.is(t.BUTTON))s.anchor("centerVertical","true");else{const t=s.isEmpty;let i=s.imageOrSvgElement;if(!i&&!t)s.renderEach(e=>{if(fi(e))c=Math.max(e.baselineHeight,c),i=true});if(i)if(c>e.baselineHeight){if(!o||c>=r)null==o||o.anchor(ui(s),s.documentId),r=c,o=s;else s.anchor(ui(o),o.documentId);continue}else if(Ot(s.linear.top,n)){s.anchor("top","true");continue}if(t&&s.naturalChild)s.anchor("baseline",e.documentId);else if(s.baselineElement)s.anchor(i?"bottom":"baseline",e.documentId)}else if(fi(s))o=s}if(o)e.anchor(ui(o),o.documentId)}function Ut(e,t){if("left"===t.float){if(t.marginRight<0){const i=Math.abs(t.marginRight);return e.modifyBox(8,t.actualWidth+(t.hasWidth?t.paddingLeft+t.borderLeftWidth:0)-i),e.anchor("left",t.documentId),t.setBox(2,{reset:1}),true}}else if("right"===e.float&&t.marginLeft<0){const i=Math.abs(t.marginLeft),a=t.actualWidth;if(i<a)e.modifyBox(2,a-i);return e.anchor("right",t.documentId),t.setBox(8,{reset:1}),true}return false}function qt(e){return e.filter(e=>(e.baseline||bt(e.verticalAlign,true))&&("TEXTAREA"===e.tagName||"SELECT"===e.tagName&&e.toElementInt("size")>1)||"text-bottom"===e.verticalAlign&&"INPUT_IMAGE"!==e.containerName).sort((e,t)=>{if(e.baselineHeight===t.baselineHeight)return"SELECT"===e.tagName?1:0;else return e.baselineHeight>t.baselineHeight?-1:1})}function Yt(e){if("BR"===e.tagName)return true;else if(mt(e)){const t=getComputedStyle(e),i=t.getPropertyValue("position");if(!("absolute"===i||"fixed"===i)){const e=t.getPropertyValue("display"),i="none"!==t.getPropertyValue("float");switch(e){case"block":case"flex":case"grid":return!i||pi(t)}return(e.startsWith("inline-")||"table"===e)&&pi(t)}}return false}function jt(e){const t=e.element;if(t.readOnly)e.android("focusable","false");if(t.disabled)e.android("enabled","false")}function $t(e,t,i){if(e.css("width",pt(t),true),i&&i.width>0&&i.height>0){const a=i.height*(t/i.width);e.css("height",pt(a),true)}}function Kt(e,t){if(-1!==t.minLength)e.android("minLength",t.minLength.toString());if(t.maxLength>0)e.android("maxLength",t.maxLength.toString())}function Zt(e,t){if(t.min)e.android("min",t.min);if(t.max)e.android("max",t.max)}function Jt(e,t){if(e.naturalChild)return t.has(e);else if(e.nodeGroup)return e.some(e=>e.naturalChild&&t.has(e),{cascade:true});else return t.has(e.innerMostWrapped)}function Qt(e,t){const i=e.parent;if(i.flexElement&&("baseline"===i.css("alignItems")||e.some(e=>"baseline"===e.flexbox.alignSelf)))return false;const a=e.length>1;return e.some(t=>a&&(t.rightAligned||t.centerAligned)&&e.singleRowAligned||t.percentWidth>0&&t.percentWidth<1||t.hasPX("maxWidth"))&&(!t||e.every(e=>e.marginTop>=0))}function ei(e,t){if(e.leftTopAxis){const i=e.absoluteParent;if(i.documentBody)switch(t){case"top":if(0===i.getBox(1)[0])return i.marginTop;break;case"left":return i.marginLeft}}return 0}function ti(e){const{centerAligned:t,rightAligned:i}=e;e.css("display","inline-block",true),e.setCacheValue("centerAligned",t),e.setCacheValue("rightAligned",i)}function ii(e){e.addAlign(8),e.removeAlign(1)}function ai(e,t,i,a,n,o){e.anchor(n,a,true),e.setBox(t?8:1,{reset:1,adjustment:o}),e.constraint[i]=true}function ni(e){return Lt(e,e=>"right"===e.float||true===e.autoMargin.left)}function oi(e,t,i,a,n,o){let r=0,s=n+e.marginLeft;if(a&&!o.items.includes(a))s+=a.linear.width;if(!a||!e.plainText||i||!o.items.includes(a)||o.clearMap.has(e))s+=t.width;if(e.marginRight<0)s+=e.marginRight;if(r=o.boxWidth,0!==o.textIndent)if(o.textIndent<0){if(o.rowLength<=1)r+=o.textIndent}else if(o.textIndent>0&&1===o.rowLength)r-=o.textIndent;if(e.styleElement&&e.inlineStatic)s-=e.contentBoxWidth;return r=Math.ceil(r),Math.floor(s)>r}function ri(e,t){return t.anchorParent("vertical",0),t.setBox(1,{reset:1,adjustment:Math.max(t.bounds.top-e.box.top,Math.min(-1*At(t.verticalAlign),0))}),t.baselineAltered=true,false}function si(e){return Qt(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative||!e.pageFlow&&e.autoPosition)?t.RELATIVE:t.LINEAR}function li(e){return Qt(e,true)?t.CONSTRAINT:e.some(e=>e.positionRelative)?t.RELATIVE:t.LINEAR}function ci(e){const i=e.node,a=i.element,n=("OBJECT"===a.tagName?a.data:a.src).trim(),o=a.type||kt(n);if(o.startsWith("image/"))i.setCacheValue("tagName","IMG"),i.setCacheValue("imageElement",true),a.src=n,e.setContainerType(t.IMAGE);else if(o.startsWith("video/"))i.setCacheValue("tagName","VIDEO"),a.src=n,e.setContainerType(t.VIDEOVIEW);else if(o.startsWith("audio/"))i.setCacheValue("tagName","AUDIO"),a.src=n,e.setContainerType(t.VIDEOVIEW);else e.setContainerType(t.TEXT)}const di=(e=false)=>e?["right","left","rightLeft","leftRight"]:["left","right","leftRight","rightLeft"],hi=(e,t,i,a,n)=>t.floating&&t.alignParent(t.float)&&(i||Math.floor(a+(e.hasWidth?e.actualWidth:0))<n.boxWidth),fi=e=>e.imageOrSvgElement&&e.baseline,ui=e=>e.imageOrSvgElement?"baseline":"bottom",pi=e=>("100%"===e.getPropertyValue("width")||"100%"===e.getPropertyValue("minWidth"))&&"none"===e.getPropertyValue("max-width"),gi=(e,t)=>function(e,t){const i=e.depth,a=t.depth;if(i===a){const i=e.actualParent,a=t.actualParent;if(e===a)return-1;else if(i===t)return 1;else if(i&&a)if(i===a)return zt(e,t);else if(i.actualParent===a.actualParent)return zt(i,a);return e.id<t.id?-1:1}return i<a?-1:1}(e.node.innerMostWrapped,t.node.innerMostWrapped),mi=(e,t)=>zt(e.node.innerMostWrapped,t.node.innerMostWrapped),bi=(e,t,i=true)=>t.size>0&&e.some((e,a)=>(a>0||!i)&&t.has(e)),yi=e=>e.plainText&&Resource.hasLineBreak(e,false,true)||e.preserveWhiteSpace&&/^\s*\n+/.test(e.textContent),Si=e=>Math.max(e.actualHeight,e.lineHeight),Ti=(e,t,i)=>e.containerType===t&&e.length===i&&(0===e.alignmentType||e.hasAlign(1));function wi(e,t){const i=e.renderParent;if(i.overflowY)return i.box.width;else{const a=e.actualParent;if(a)if(e.naturalElement&&e.inlineStatic&&a.blockStatic&&a===i)return a.box.width-(e.linear.left-a.box.left);else if(a.floatContainer){const{containerType:i,alignmentType:n}=this.containerTypeVerticalMargin;if(e.ascend({condition:e=>e.of(i,n),including:a,attr:"renderParent"}).length>0){const{left:i,right:n,width:o}=e.box;let r=0,s=0;const l=a.naturalChildren,c=l.length;let d=0;while(d<c){const a=l[d++];if(a.floating){const o=a.linear;if(!t.includes(a)&&e.intersectY(o))if("left"===a.float){if(Math.floor(o.right)>i)r=Math.max(r,o.right-i)}else if(n>Math.ceil(o.left))s=Math.max(s,n-o.left)}}return o-(r+s)}}}}function vi(e){if(e.centerAligned)e.anchorParent("horizontal",.5);else{const t=e.autoMargin;if(t.horizontal)e.anchorParent("horizontal",t.left?1:t.leftRight?.5:0);else{const t=e.rightAligned;if(t)e.anchor("right","parent"),e.anchorStyle("horizontal",1);else e.anchor("left","parent"),e.anchorStyle("horizontal",0);if(e.blockStatic||e.percentWidth>0||e.block&&e.multiline&&e.floating)e.anchor(t?"left":"right","parent")}}}function Ei(e,t=true,i){const a=e.autoMargin;let n=t?0:NaN;if(e.floating)n=0;else if(a.vertical)n=a.top?1:a.topBottom?.5:0;else if(e.imageOrSvgElement||e.inlineVertical)switch(e.verticalAlign){case"baseline":n=t?0:1;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else{const t=e.actualParent;if("table-cell"===(null==t?void 0:t.display))switch(t.verticalAlign){case"middle":n=.5;break;case"bottom":n=1;break;default:n=0;break}else switch(e.display){case"inline-flex":case"inline-grid":case"inline-table":case"table-cell":n=0;break}}if(!isNaN(n))if(i)e.app("layout_constraintVertical_bias",n.toString(),false),e.delete("layout_constraintVertical_chainStyle");else e.anchorStyle("vertical",n,t?"":"packed",false)}class Controller extends squared.base.ControllerUI{constructor(e){super(),this.application=e,this.localSettings={layout:{pathName:"res/layout",fileExtension:"xml",baseTemplate:'<?xml version="1.0" encoding="utf-8"?>\n'},directory:{string:"res/values",font:"res/font",image:"res/drawable",video:"res/raw",audio:"res/raw"},svg:{enabled:false},style:{inputBorderColor:"rgb(0, 0, 0)",inputBackgroundColor:ht(2)?"rgb(255, 255, 255)":"rgb(221, 221, 221)",inputColorBorderColor:"rgb(119, 119, 199)",meterForegroundColor:"rgb(99, 206, 68)",meterBackgroundColor:"rgb(237, 237, 237)",progressForegroundColor:"rgb(138, 180, 248)",progressBackgroundColor:"rgb(237, 237, 237)"},mimeType:{font:["font/ttf","font/otf"],image:["image/jpeg","image/png","image/gif","image/bmp","image/webp","image/svg+xml","image/heic","image/heif","image/x-icon"],audio:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","audio/aac","audio/flac","audio/gsm","audio/midi","audio/mpeg","audio/wav","audio/ogg"],video:["video/3gpp","video/mp4","video/mp2t","video/x-matroska","video/webm"]},unsupported:{cascade:new Set(["IMG","INPUT","SELECT","TEXTAREA","PROGRESS","METER","HR","IFRAME","VIDEO","AUDIO","OBJECT","svg"]),tagName:new Set(["HEAD","TITLE","META","BASE","SCRIPT","STYLE","LINK","OPTION","INPUT:hidden","COLGROUP","MAP","AREA","SOURCE","TEMPLATE","DATALIST","PARAM","TRACK"]),excluded:new Set(["BR","WBR"])},precision:{standardFloat:3},deviations:{textMarginBoundarySize:8,subscriptBottomOffset:.35,superscriptTopOffset:.35,legendBottomOffset:.25}}}static anchorPosition(e,t,i,a=true){const[n,o,r,s,l,c,d,h]=i?["horizontal","width","left","right",8,2,128,32]:["vertical","height","top","bottom",1,4,16,64],f=e.autoMargin,u=e.hasPX(o),p={},g=e.hasPX(r),m=e.hasPX(s);if(u&&f[n])if(g&&f[s])if(a)e.anchor(r,"parent"),e.modifyBox(l,e[r]);else p[r]=e[r];else if(m&&f[r])if(a)e.anchor(s,"parent"),e.modifyBox(c,e[s]);else p[s]=e[s];else if(a)e.anchorParent(n,.5),e.modifyBox(l,e[r]),e.modifyBox(c,e[s]);else p[r]=e[r],p[s]=e[s];else{if("100%"===e.css(o)||"100%"===e.css(i?"minWidth":"minHeight")){const o=g?j(t,d,e[r]):void 0,f=m?j(t,h,e[s]):void 0;if(a){if(e.anchorParent(n),i)e.setLayoutWidth(View.horizontalMatchConstraint(e,t));else e.setLayoutHeight("0px");if(o)e.modifyBox(l,o);if(f)e.modifyBox(c,f)}else p[r]=o,p[s]=f}else{let b=0;if(g){const i=j(t,d,e[r]);if(a)e.anchor(r,"parent"),e.modifyBox(l,i),++b;else p[r]=i}if(m)if(!g||!u){const i=j(t,h,e[s]);if(a)e.anchor(s,"parent"),e.modifyBox(c,i),++b;else p[s]=i}if(a)switch(b){case 0:if(i)if(e.centerAligned)e.anchorParent("horizontal",.5);else if(e.rightAligned)if(e.blockStatic)e.anchorParent("horizontal",1);else e.anchor("right","parent");break;case 2:if(!(u||true===f[n]&&true!==f[r]&&true!==f[s])){if(i)e.setLayoutWidth(View.horizontalMatchConstraint(e,t));else e.setLayoutHeight("0px");if(t.innerMostWrapped.documentBody){const e={type:3,not:"100%"};do{if(!t.has(o,e)&&!t.has(i?"maxWidth":"maxHeight",e)){if(i)t.setLayoutWidth("match_parent",t.inlineWidth);else t.setLayoutHeight("match_parent",t.inlineWidth);t=t.outerWrapper}else break}while(void 0!==t)}}break}}}return p}init(){const e=this.userSettings,t=160/e.resolutionDPI;this._targetAPI=e.targetAPI||29,this._screenDimension={width:e.resolutionScreenWidth*t,height:e.resolutionScreenHeight*t},this._defaultViewSettings={systemName:this.application.systemName,screenDimension:this._screenDimension,supportRTL:e.supportRTL,floatPrecision:this.localSettings.precision.standardFloat},super.init()}optimize(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.applyOptimizations(),t.hasProcedure(Mt.CUSTOMIZATION))t.applyCustomizations(this.userSettings.customizationsOverwritePrivilege);const a=t.target;if(a){const e=t.outerMostWrapper;if(t!==e&&a===e.target)continue;const i=this.application.resolveTarget(t.sessionId,a);if(i){const e=t.removeTry({alignSiblings:true});if(e){const a=i.renderChildren,n=Pt(i,"renderTemplates"),o=parseInt(t.dataset.androidTargetIndex);if(!isNaN(o)&&o>=0&&o<a.length)a.splice(o,0,t),n.splice(o,0,e);else a.push(t),n.push(e);t.renderParent=i}}}}}finalize(e){const t=this.userSettings.insertSpaces;for(const i of e)i.content=Z(i.content.replace("{#0}",te(i.content)),t)}processUnknownParent(e){const i=e.node,a=i.tagName;if("OBJECT"===a||"EMBED"===a)ci(e);else if(e.some(e=>!e.pageFlow&&!e.autoPosition))e.setContainerType(t.CONSTRAINT,17);else if(e.length<=1){const a=i.item(0);if(a){if(a.plainText)a.hide(),i.clear(),i.inlineText=true,i.textContent=a.textContent,e.setContainerType(t.TEXT,512);else if(a.percentWidth>0&&a.percentWidth<1)e.setContainerType(t.CONSTRAINT,16384);else if(a.autoMargin.leftRight||a.autoMargin.left||a.hasPX("maxWidth")&&!a.support.maxDimension&&!a.inputElement)e.setContainerType(t.CONSTRAINT);else if(a.baselineElement)if(e.parent.flexElement&&"baseline"===i.flexbox.alignSelf)e.setContainerType(t.LINEAR,4);else e.setContainerType(li(e),8);else e.setContainerType(t.FRAME);e.addAlign(2048)}else return this.processUnknownChild(e)}else if(Resource.hasLineBreak(i,true))e.setContainerType(li(e),9);else if(this.checkConstraintFloat(e))if(e.setContainerType(t.CONSTRAINT),e.every(e=>e.floating))e.addAlign(256);else if(e.linearY)e.addAlign(8);else if(e.some(e=>e.floating||e.rightAligned)&&e.singleRowAligned)e.addAlign(4);else e.addAlign(e.some(e=>e.blockStatic)?8:512),e.addAlign(1);else if(e.linearX||e.singleRowAligned){if(this.checkFrameHorizontal(e))e.addRender(256),e.addRender(4);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR),e.floated.size>0)Vt(e.children)}else e.setContainerType(Qt(e,false)?t.CONSTRAINT:t.RELATIVE);e.addAlign(4)}else if(e.linearY)e.setContainerType(si(e),8|(i.rootElement||e.some((t,i)=>t.inlineFlow&&e.item(i+1).inlineFlow,{end:e.length-1})?1:0));else if(e.every(e=>e.inlineFlow))if(this.checkFrameHorizontal(e))e.addRender(256),e.addRender(4);else e.setContainerType(si(e),9);else{const i=e.children,a=e.parent.floatContainer?this.application.clearMap:void 0;if(e.some((e,t)=>e.alignedVertically(t>0?i.slice(0,t):void 0,a)>0))e.setContainerType(si(e),9);else e.setContainerType(t.CONSTRAINT,1)}return{layout:e}}processUnknownChild(e){const i=e.node,a=i.visibleStyle.background;if("OBJECT"===i.tagName)ci(e);else if(i.inlineText&&(a||!i.textEmpty))e.setContainerType(t.TEXT);else if(i.blockStatic&&0===i.naturalChildren.length&&(a||i.contentBoxHeight>0))e.setContainerType(t.FRAME);else if(0===i.bounds.height&&i.naturalChild&&0===i.naturalElements.length&&""===i.elementId&&0===i.marginTop&&0===i.marginRight&&0===i.marginBottom&&0===i.marginLeft&&!a&&!i.rootElement&&!i.use)return i.hide(),{layout:e,next:true};else switch(i.tagName){case"LI":case"OUTPUT":e.setContainerType(t.TEXT);break;default:if(""!==i.textContent&&(a||!i.pageFlow||i.pseudoElement&&"::after"===Et(i.element,i.sessionId)))e.setContainerType(t.TEXT),i.inlineText=true;else e.setContainerType(t.FRAME),i.exclude({resource:Ht.VALUE_STRING})}return{layout:e}}processTraverseHorizontal(e,i){const a=e.parent;if(1===e.floated.size&&e.every(e=>e.floating))if(Ti(a,t.CONSTRAINT,e.length))return a.addAlign(256),void a.removeAlign(1);else e.node=this.createNodeGroup(e.node,e.children,a),e.setContainerType(t.CONSTRAINT,256);else if(this.checkFrameHorizontal(e))e.node=this.createNodeGroup(e.node,e.children,a),e.addRender(256),e.addRender(4);else if(e.length!==i.length||a.hasAlign(8))e.node=this.createNodeGroup(e.node,e.children,a),this.processLayoutHorizontal(e);else{if(!a.hasAlign(512))a.addAlign(4);a.removeAlign(1)}return e}processTraverseVertical(e){const i=e.parent,a=this.application.clearMap,n=e.floated.size,o=e.length;if(e.some((e,t)=>e.lineBreakTrailing&&t<o-1)){if(!i.hasAlign(8)){const t=si(e);if(Ti(i,t,o))return void ii(i);else{if(i.layoutConstraint)if(i.addAlign(8),!i.hasAlign(16))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,9)}}}else if(1===n&&e.every((e,t)=>0===t||t===o-1||a.has(e)))if(e.same(e=>e.float))if(Ti(i,t.CONSTRAINT,o))return void ii(i);else e.node=this.createLayoutGroup(e),e.setContainerType(t.CONSTRAINT,256);else if(bi(e,a)||this.checkFrameHorizontal(e))e.node=this.createLayoutGroup(e),e.addRender(256),e.addRender(4);else{const t=li(e);if(Ti(i,t,o))return void ii(i);else{if(i.layoutConstraint)if(i.addAlign(8),!i.hasAlign(16))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,8)}}else if(n)if(bi(e,a))e.node=this.createLayoutGroup(e),e.addRender(256),e.addRender(8);else if(e.item(0).floating)e.node=this.createLayoutGroup(e),e.addRender(256),e.addRender(4);if(!i.hasAlign(8)){const t=li(e);if(Ti(i,t,o))return void ii(i);else{if(i.layoutConstraint)if(i.addAlign(8),!i.hasAlign(16))return;e.node=this.createLayoutGroup(e),e.setContainerType(t,8)}}return e}processLayoutHorizontal(e){if(this.checkConstraintFloat(e))e.setContainerType(t.CONSTRAINT,e.every(e=>e.floating)?256:512);else if(this.checkConstraintHorizontal(e))e.setContainerType(t.CONSTRAINT,4);else if(this.checkLinearHorizontal(e)){if(e.setContainerType(t.LINEAR,4),e.floated.size>0)Vt(e.children)}else e.setContainerType(t.RELATIVE,4);return e}sortRenderPosition(e,t){var i;if(e.layoutRelative){if(t.some(e=>0!==e.node.zIndex))t.sort(mi)}else if(e.layoutConstraint)if(t.some(e=>0!==e.node.zIndex||!e.node.pageFlow)){const a=e.innerMostWrapped,n=[],o=[];let r=[],s=t.length,l=0;while(l<s){const e=t[l++],i=e.node.innerMostWrapped;if(i.pageFlow||i.actualParent===i.documentParent||i===a)r.push(e),n.push(i);else o.push(e)}if(r.sort(mi),s=o.length,s>0){const e=new Map,t=[],a=[];l=0;while(l<s){const r=o[l++],s=r.node.innerMostWrapped,c=s.ascend({condition:e=>n.includes(e),error:e=>e.rootElement})[0];if(c)(null===(i=e.get(c))||void 0===i?void 0:i.push(r))||e.set(c,[r]);else if(s.zIndex<0)a.push(r);else t.push(r)}for(const[i,n]of e.entries()){n.sort(mi);const e=r.findIndex(e=>e.node.innerMostWrapped===i);if(-1!==e)r.splice(e+1,0,...n);else{const e=n.length;l=0;while(l<e){const e=n[l++];if(e.node.innerMostWrapped.zIndex<0)a.push(e);else t.push(e)}}}if(a.length>0)a.sort(gi),r=a.concat(r);if(t.length>0)t.sort(gi),r=r.concat(t)}return r}return t}checkFrameHorizontal(e){switch(e.floated.size){case 1:if("center"===e.node.cssAscend("textAlign")&&e.some(e=>!e.block&&!e.floating))return true;else if(e.floated.has("right")){let t=0,i=false;for(const a of e)if(!a.floating){if(a.multiline)i=true;++t}else if(i)return false;return t>0&&!e.singleRowAligned}else if(e.item(0).floating)return e.linearY||e.some(e=>e.block&&!e.floating||!e.inlineFlow,{start:1});break;case 2:return true}return false}checkConstraintFloat(e){if(e.length>1){const t=this.application.clearMap;let i=true,a=true;for(const n of e)if(!t.has(n)){const e=n.inputElement||n.controlElement;if(i&&!(n.floating||n.autoMargin.horizontal||n.inlineDimension&&!e||n.imageOrSvgElement||n.marginTop<0))i=false;if(a&&0===n.percentWidth)a=false;if(!i&&!a)return false}return true}return false}checkConstraintHorizontal(e){if(e.length>1&&e.singleRowAligned){switch(e.floated.size){case 1:if(bi(e,this.application.clearMap))return false;else{let t=false,i=false;for(const a of e){const{float:e,autoMargin:n}=a;if("left"===e||n.right)if(t=true,i)return false;if("right"===e||n.left)if(i=true,t)return false}}break;case 2:return false}return e.some(t=>t.blockVertical||t.percentWidth>0&&t.percentWidth<1&&!t.inputElement&&!t.controlElement||t.marginTop<0||"bottom"===t.verticalAlign&&!e.parent.hasHeight)}return false}checkLinearHorizontal(e){const t=e.floated,i=t.size;if((0===i||1===i&&t.has("left"))&&0===e.node.lineHeight&&e.singleRowAligned){const{fontSize:t,lineHeight:i}=e.item(0),a=e.parent.actualBoxWidth();let n=0;for(const o of e){if(!(o.naturalChild&&o.isEmpty&&!o.inputElement&&!o.controlElement&&!o.positionRelative&&o.baseline&&!o.blockVertical&&0===o.zIndex&&o.lineHeight===i&&o.fontSize===t))return false;else n+=o.linear.width;if(n>=a)return false}return true}return false}setConstraints(e){e.each(e=>{const t=e.renderChildren,i=t.length;if(i>0&&e.hasProcedure(Mt.CONSTRAINT))if(e.hasAlign(2)){if(e.layoutConstraint&&!e.layoutElement)this.evaluateAnchors(t)}else if(e.layoutRelative)this.processRelativeHorizontal(e,t);else if(e.layoutConstraint){const a=new Array(i);let n=0,o=0;while(n<i){const i=t[n++];if(!i.positioned)if(i.pageFlow||i.autoPosition)a[o++]=i;else{const t=i.constraint;if(i.outerWrapper===e){if(!t.horizontal)i.anchorParent("horizontal",0);if(!t.vertical)i.anchorParent("vertical",0)}else{if(i.leftTopAxis){if(!t.horizontal)Controller.anchorPosition(i,e,true);if(!t.vertical)Controller.anchorPosition(i,e,false)}if(!t.horizontal)this.addGuideline(i,e,{orientation:"horizontal"});if(!t.vertical)this.addGuideline(i,e,{orientation:"vertical"});i.positioned=true}}}if(o>0){if(a.length=o,e.layoutHorizontal)this.processConstraintHorizontal(e,a);else if(o>1)this.processConstraintChain(e,a);else{const e=a[0];if(!e.constraint.horizontal)vi(e);if(!e.constraint.vertical)e.anchorParent("vertical"),Ei(e);View.setConstraintDimension(e,1)}this.evaluateAnchors(a)}}})}renderNodeGroup(e){const{node:i,containerType:a}=e;switch(a){case t.FRAME:case t.RELATIVE:case t.CONSTRAINT:break;case t.LINEAR:{const t=$();t.android.orientation=Rt(e.alignmentType,8)?"vertical":"horizontal",i.apply(t);break}case t.GRID:{const t=$(),a=t.android;if(e.rowCount)a.rowCount=e.rowCount.toString();a.columnCount=e.columnCount?e.columnCount.toString():"1",i.apply(t);break}default:return e.isEmpty?this.renderNode(e):void 0}return i.setControlType(View.getControlName(a,i.api),a),i.addAlign(e.alignmentType),i.render(e.parent),{type:1,node:i,controlName:i.controlName}}renderNode(e){var i;let{parent:a,containerType:o}=e;const r=e.node;let s=View.getControlName(o,r.api);switch(r.tagName){case"IMG":case"CANVAS":{const i=r.element;let l;if("PICTURE"===r.actualParent.tagName){const e=this.localSettings.mimeType.image;if(l=gt(i,"*"===e?void 0:e),l){const e=l[0],t=e.actualWidth;if(t)$t(r,t,this.application.resourceHandler.getImage(i.src));else{const t=this.application.resourceHandler.getImage(e.src);if(t)$t(r,t.width,t)}}}else{let e;switch(r.css("objectFit")){case"fill":e="fitXY";break;case"contain":e="centerInside";break;case"cover":e="centerCrop";break;case"scale-down":e="fitCenter";break;case"none":e="center";break}if(e)r.android("scaleType",e)}if(r.baseline)if(r.android("baselineAlignBottom","true"),r.marginBottom>0&&a.layoutLinear&&a.layoutHorizontal)r.mergeGravity("layout_gravity","bottom");if(r.hasResource(Ht.IMAGE_SOURCE)){let e;if("CANVAS"===r.tagName){const t=i.toDataURL();if(t)r.setControlType(s,o),e="canvas_"+_t(r.controlId,true),this.application.resourceHandler.writeRawImage("image/png",{filename:e+".png",data:t,encoding:"base64"})}else e=this.application.resourceHandler.addImageSrc(i,"",l);if(e)r.android("src","@drawable/"+e)}if(!r.pageFlow&&a===r.absoluteParent&&(r.left<0&&"hidden"===a.css("overflowX")||r.top<0&&"hidden"===a.css("overflowY"))){const i=this.application.createNode(r.sessionId,{parent:a,innerWrap:r});if(i.setControlType(n.FRAME,t.FRAME),i.inherit(r,"base"),i.cssCopy(r,"position","zIndex"),i.exclude({resource:Ht.ALL,procedure:Mt.ALL}),i.autoPosition=false,r.percentWidth>0&&a.layoutConstraint&&(a.blockStatic||a.hasWidth))i.app("layout_constraintWidth_percent",wt(r.percentWidth,r.localSettings.floatPrecision)),i.setLayoutHeight("0px");else if(r.hasPX("width"))i.setLayoutWidth(pt(r.actualWidth));else i.setLayoutWidth("wrap_content");if(r.percentHeight>0&&a.layoutConstraint)i.app("layout_constraintHeight_percent",wt(r.percentHeight,r.localSettings.floatPrecision)),i.setLayoutHeight("0px");else if(r.hasPX("height"))i.setLayoutHeight(pt(r.actualHeight));else i.setLayoutHeight("wrap_content");i.render(a),i.saveAsInitial(),r.modifyBox(1,r.top),r.modifyBox(8,r.left),this.application.addLayoutTemplate(a,i,{type:1,node:i,controlName:n.FRAME}),a=i,e.parent=i}break}case"INPUT":{const e=r.element;switch(e.type){case"radio":case"checkbox":if(e.checked)r.android("checked","true");break;case"text":r.android("inputType","text");break;case"password":r.android("inputType","textPassword");break;case"number":case"range":r.android("inputType","number"),r.android("progress",e.value),Zt(r,e);break;case"time":r.android("inputType","time"),Zt(r,e);break;case"date":r.android("inputType","date"),Zt(r,e);break;case"datetime-local":r.android("inputType","datetime"),Zt(r,e);break;case"email":r.android("inputType","textEmailAddress"),Kt(r,e);break;case"tel":r.android("inputType","phone"),Kt(r,e);break;case"url":r.android("inputType","textUri"),Kt(r,e);break;case"week":case"month":case"search":r.android("inputType","text"),Kt(r,e);break;case"image":case"color":if(!r.hasWidth)r.css("width",pt(r.bounds.width));break}break}case"BUTTON":for(const e of r.naturalChildren)if(!e.pageFlow||!e.textElement)e.android("elevation","2px");break;case"TEXTAREA":{const{cols:e,maxLength:t,rows:i}=r.element;switch(r.android("minLines",i>0?i.toString():"2"),r.css("verticalAlign")){case"middle":r.mergeGravity("gravity","center_vertical");break;case"bottom":r.mergeGravity("gravity","bottom");break;default:r.mergeGravity("gravity","top");break}if(t>0)r.android("maxLength",t.toString());if(!r.hasWidth&&e>0)r.css("width",pt(8*e));if(!r.hasHeight)r.css("height",pt(r.bounds.height));if(r.android("scrollbars","vertical"),r.android("inputType","textMultiLine"),r.overflowX)r.android("scrollHorizontally","true");break}case"LEGEND":{if(!r.hasWidth)r.css("minWidth",pt(r.actualWidth)),ti(r);const e=r.actualHeight*this.localSettings.deviations.legendBottomOffset;r.modifyBox(4,e),r.linear.bottom+=e;break}case"METER":case"PROGRESS":{const{min:e,max:t,value:i}=r.element;let a,n;if("METER"===r.tagName){if(({meterForegroundColor:a,meterBackgroundColor:n}=this.localSettings.style),t){if(i)r.android("progress",Math.round(i/t*100).toString());if(100===t)r.android("min",e.toString()),r.android("max",t.toString())}}else{if(({progressForegroundColor:a,progressBackgroundColor:n}=this.localSettings.style),i)r.android("progress",i.toString());if(t)r.android("max",t.toString())}if(!r.hasWidth)r.css("width",pt(r.bounds.width));if(!r.hasHeight)r.css("height",pt(r.bounds.height));r.android("progressTint","@color/"+Resource.addColor(a)),r.android("progressBackgroundTint","@color/"+Resource.addColor(n)),r.attr("_","style","@android:style/Widget.ProgressBar.Horizontal"),r.exclude({resource:Ht.BOX_STYLE|Ht.FONT_STYLE});break}case"AUDIO":case"VIDEO":{const i=this.localSettings.mimeType.video,a=r.element;let n,l=a.src.trim();if(It(i,l))n=kt(l);else l="",Ct(a.children,e=>{if("SOURCE"===e.tagName)if(It(i,e.src))return l=e.src.trim(),n=kt(l),true;else if(n=e.type.trim().toLowerCase(),i.includes(n))return l=e.src,true});if(!r.hasPX("width"))r.css("width",pt(r.actualWidth),true);if(!r.hasPX("height"))r.css("height",pt(r.actualHeight),true);if(r.inline)ti(r);if(""!==l){if(this.application.resourceHandler.addVideo(l,n),r.inlineText=false,r.exclude({resource:Ht.FONT_STYLE}),Nt(a.poster))Resource.addImage({mdpi:a.poster.trim()})}else if(Nt(a.poster)){r.setCacheValue("tagName","IMG"),l=a.src,a.src=a.poster.trim(),e.containerType=t.IMAGE;const i=this.renderNode(e);return a.src=l,i}else o=t.TEXT,s=View.getControlName(o,r.api),e.containerType=o,r.inlineText=true}}switch(s){case n.TEXT:{let e="";if(r.overflowX)e+="horizontal";if(r.overflowY)e+=(""!==e?"|":"")+"vertical";if(""!==e)r.android("scrollbars",e);if(r.has("letterSpacing"))r.android("letterSpacing",wt(r.toFloat("letterSpacing")/r.fontSize,r.localSettings.floatPrecision));if("justify"===r.css("textAlign"))r.android("justificationMode","inter_word");if(r.has("textShadow")){const e=/((?:rgb|hsl)a?\([^)]+\)|[a-z]{4,})?\s*(-?[\d.]+[a-z]+)\s+(-?[\d.]+[a-z]+)\s*([\d.]+[a-z]+)?/.exec(r.css("textShadow"));if(e){const t=Resource.addColor(ft(e[1]||r.css("color")));if(""!==t){const i=r.localSettings.floatPrecision;r.android("shadowColor","@color/"+t),r.android("shadowDx",wt(2*r.parseWidth(e[2]),i)),r.android("shadowDy",wt(2*r.parseHeight(e[3]),i)),r.android("shadowRadius",wt(e[4]?Math.max(r.parseWidth(e[4]),0):.01,i))}}}if("nowrap"===r.css("whiteSpace"))if(r.android("maxLines","1"),"ellipsis"===r.css("textOverflow")&&"hidden"===r.css("overflow"))r.android("ellipsize","end");break}case n.BUTTON:if(!r.hasHeight)r.android("minHeight",pt(Math.ceil(r.actualHeight)));r.mergeGravity("gravity","center_vertical"),jt(r);break;case n.SELECT:case n.CHECKBOX:case n.RADIO:jt(r);break;case n.EDIT:if(!r.companion&&r.hasProcedure(Mt.ACCESSIBILITY))[r.previousSibling,r.nextSibling].some(e=>{var t;if((null==e?void 0:e.visible)&&e.pageFlow){const i=r.elementId,a=e.element,n="LABEL"===e.documentParent.tagName&&e.documentParent;if(""!==i&&i===(null===(t=a.htmlFor)||void 0===t?void 0:t.trim()))return e.android("labelFor",r.documentId),true;else if(n&&e.textElement)return n.android("labelFor",r.documentId),true}return false});if(null===(i=r.element.list)||void 0===i?void 0:i.children.length)s=n.EDIT_LIST;else if(r.api>=26)r.android("importantForAutofill","no");jt(r);case n.RANGE:if(!r.hasPX("width"))r.css("width",pt(r.bounds.width));break;case n.LINE:if(!r.hasHeight)r.setLayoutHeight(pt(r.contentBoxHeight||1));break}return r.setControlType(s,o),r.addAlign(e.alignmentType),r.render(a),{type:1,node:r,parent:a,controlName:s}}renderNodeStatic(e,t){let i=e.controlName;if(!i)if(e.controlType)i=View.getControlName(e.controlType,this.userSettings.targetAPI);else return"";const a=new View;if(this.afterInsertNode(a),a.setControlType(i),a.setLayoutWidth(e.width||"wrap_content"),a.setLayoutHeight(e.height||"wrap_content"),t)a.apply(t),t.documentId=a.documentId;return this.getEnclosingXmlTag(i,this.userSettings.showAttributes?a.extractAttributes(1):void 0,e.content)}renderSpace(e){const t=e.android;let{width:i,height:a}=e;if(i){if(yt(i))t.layout_columnWeight=wt(parseFloat(i)/100,this.localSettings.precision.standardFloat),i="0px"}else i="wrap_content";if(a){if(yt(a))t.layout_rowWeight=wt(parseFloat(a)/100,this.localSettings.precision.standardFloat),a="0px"}else a="wrap_content";if(void 0!==e.column)t.layout_column=e.column.toString();if(e.columnSpan)t.layout_columnSpan=e.columnSpan.toString();if(void 0!==e.row)t.layout_row=e.row.toString();if(e.rowSpan)t.layout_rowSpan=e.rowSpan.toString();const o={android:t,app:e.app},r=this.renderNodeStatic({controlName:n.SPACE,width:i,height:a},o);return e.documentId=o.documentId,r}addGuideline(e,t,i){this.applyGuideline(e,t,"horizontal",i),this.applyGuideline(e,t,"vertical",i)}addBarrier(e,t){const i=[];let a=e.length,r=0;while(r<a){const a=e[r++],n=a.constraint.barrier;if(!n)a.constraint.barrier={};else if(n[t])continue;i.push(a)}if(a=i.length,a>0){const e={android:{},app:{barrierDirection:t,constraint_referenced_ids:i.map(e=>F(e.anchorTarget.documentId)).join(",")}},{api:s,anchorTarget:l}=i[a-1],c=this.renderNodeStatic({controlName:s<29?n.BARRIER:o.BARRIER},e);switch(t){case"top":case"left":this.addBeforeOutsideTemplate(l.id,c,false);break;default:this.addAfterOutsideTemplate(l.id,c,false);break}const d=e.documentId;if(d){r=0;while(r<a)i[r++].constraint.barrier[t]=d;return d}}return""}evaluateAnchors(e){var t;const i=[],a=[],n=e.length;let o=0;while(o<n){const n=e[o++];if(n.constraint.horizontal)i.push(n);if(n.constraint.vertical)a.push(n);if(n.alignParent("top")||n.alignSibling("top")){let i=n;do{const a=i.alignSibling("bottomTop");if(""!==a){const t=e.find(e=>e.documentId===a);if((null==t?void 0:t.alignSibling("topBottom"))===i.documentId)if(t.alignParent("bottom"))break;else i=t;else break}else{if(i!==n&&!i.alignParent("bottom"))if(i.blockHeight)i.anchor("bottom","parent");else{const e=(null===(t=i.constraint.barrier)||void 0===t?void 0:t.bottom)||this.addBarrier([i],"bottom");if(e)i.anchor("bottomTop",e)}break}}while(true)}}o=0;while(o<n){const t=e[o++],n=t.constraint,r=n.current;if(!n.horizontal)for(const e in r){const{documentId:a,horizontal:s}=r[e];if(s&&i.some(e=>e.documentId===a)){n.horizontal=true,i.push(t),o=0;break}}if(!n.vertical)for(const e in r){const{documentId:i,horizontal:s}=r[e];if(!s&&a.some(e=>e.documentId===i)){n.vertical=true,a.push(t),o=0;break}}}}createNodeGroup(e,t,i,a){const n=new ViewGroup(this.application.nextId,e,t);if(this.afterInsertNode(n),i)i.replaceTry({child:e,replaceWith:n,notFoundAppend:true});else n.containerIndex=e.containerIndex;return this.application.getProcessingCache(e.sessionId).add(n,true===(null==a?void 0:a.delegate),true===(null==a?void 0:a.cascade)),n}createNodeWrapper(e,t,i={}){var a,n,o;const{children:r,containerType:s,alignmentType:l}=i,c=this.application.createNode(e.sessionId,{parent:t,children:r,append:true,innerWrap:e,delegate:true,cascade:true===i.cascade||!!r&&r.length>0&&!e.rootElement});if(c.inherit(e,"base","alignment"),e.documentRoot)c.documentRoot=true,e.documentRoot=false;if(c.actualParent=t.naturalElement?t:e.actualParent,s)c.setControlType(View.getControlName(s,e.api),s);if(l)c.addAlign(l);if(c.addAlign(8192),c.exclude({resource:null!==(a=i.resource)&&void 0!==a?a:Ht.BOX_STYLE|Ht.ASSET,procedure:null!==(n=i.procedure)&&void 0!==n?n:Mt.CUSTOMIZATION,section:null!==(o=i.section)&&void 0!==o?o:Wt.ALL}),c.saveAsInitial(),c.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",paddingTop:"0px",paddingRight:"0px",paddingBottom:"0px",paddingLeft:"0px",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px"}),false!==i.inheritContentBox)c.setCacheValue("contentBoxWidth",e.contentBoxWidth),c.setCacheValue("contentBoxHeight",e.contentBoxHeight);if(i.resetMargin)e.resetBox(15,c);if(i.inheritDataset&&e.naturalElement)Object.assign(c.dataset,e.dataset);if(e.documentParent.layoutElement){const t=e.namespace("android");for(const e in t)if(e.startsWith("layout_"))c.android(e,t[e]),delete t[e]}if((e.renderParent||t).layoutGrid&&"0px"===e.android("layout_width")){const t=e.android("layout_columnWeight");if(parseFloat(t)>0)e.delete("android","layout_columnWeight"),e.setLayoutWidth("match_parent"),c.android("layout_columnWeight",t),c.setLayoutWidth("0px")}if(e.renderParent&&e.removeTry({alignSiblings:true}))e.rendered=false;return c}processRelativeHorizontal(e,i){const a=[];let o,r=false,s=false;if(e.hasAlign(8)){let e;const t=i.length;let n=0;while(n<t){const t=i[n++];if(e)t.anchor("topBottom",e.documentId);else t.anchor("top","true");if(t.pageFlow)a.push([t]),e=t;else r=true}}else{const t=e.nodeGroup?e.documentParent:e,n=this.application.clearMap,s="nowrap"!==e.css("whiteSpace");let l=t.actualBoxWidth(wi.call(this,e,i)),c=0;if(e.naturalElement){if(e.blockDimension)c=e.parseUnit(e.css("textIndent"));if(e.floating){const t=e.nextSibling;if((null==t?void 0:t.floating)&&t.float!==e.float&&t.hasWidth)if(l=Math.max(l,e.actualParent.box.width-t.linear.width),!e.visibleStyle.background&&!e.hasPX("maxWidth")&&l>e.width)e.css("width",pt(l),true)}}const d={clearMap:n,textIndent:c,boxWidth:l,rowLength:0},h=ni(i);for(let t=0;t<2;++t){const i=h[t],f=i.length;if(0===f)continue;const u=1===t;let p,g,m,b,y,S=true,T=0,w=false;if(u){if((!e.naturalElement&&i[0].actualParent||e).cssAny("textAlign",{initial:true,values:["right","end"]}))g="right",S=false,i[f-1].anchor(g,"true");else g="left";if(i.some(e=>e.floating))Vt(i);m=a}else g="right",d.rowLength=0,o=[],m=o;for(let t=0;t<f;++t){const a=i[t];let o;if(u&&S){if(o="leftRight",0===t&&a.inline&&Math.abs(c)>=a.actualWidth&&"right"!==a.float&&!a.positionRelative)if(w=true,!a.floating)a.setCacheValue("float","left"),a.setCacheValue("floating",true)}else o="rightLeft";if(!a.pageFlow){if(b){const e=b.documentId;a.anchor(o,e),a.anchor("top",e)}else a.anchor(g,"true"),a.anchor("top","true");r=true;continue}let h,f=a.bounds,v=a.multiline,E=true===a.autoMargin.horizontal;if(a.styleText&&!a.hasPX("width")){const e=a.textBounds;if(e&&(e.numberOfLines>1||Math.ceil(e.width)<a.box.width))f=e}if(v&&Math.floor(f.width)<=l&&!a.hasPX("width")&&!yi(a))v=false,a.multiline=false;if(E)if(a.autoMargin.leftRight)a.anchorParent("horizontal");else a.anchor(a.autoMargin.left?"right":"left","true");if(b){h=a.inlineVertical&&b.inlineVertical&&a.previousSibling!==b?St(b.element,a.element):void 0;let i=false,r=false;if(a.textElement){let e=true;if(b.textElement)if(1===t&&a.plainText&&a.previousSibling===b&&!/^\s+/.test(a.textContent)&&!/\s+$/.test(b.textContent))r=true,e=false;else if(s&&b.multiline&&(b.bounds.width>=l||a.plainText&&Resource.hasLineBreak(b,false,true)))i=true,e=false;if(e&&s&&!hi(a,b,v,T,d))if(oi(a,f,v,p,T,d))i=true;else if("CODE"!==a.actualParent.tagName)i=v&&a.plainText||yi(a)}if(b.floating&&Ut(a,b))o="";if(i||a.nodeGroup&&!a.hasAlign(64)||Math.ceil(a.bounds.top)>=b.bounds.bottom&&(a.blockStatic||a.floating&&b.float===a.float)||!a.textElement&&oi(a,f,v,p,T,d)&&!hi(a,b,v,T,d)||!a.floating&&(b.blockStatic||a.siblingsLeading.some(e=>e.excluded&&e.blockStatic)||(null==h?void 0:h.some(e=>Yt(e))))||b.autoMargin.horizontal||n.has(a)||Resource.checkPreIndent(b)){if(n.has(a)&&!p)a.setBox(1,{reset:1});if(S){if(p&&(a.bounds.bottom<=p.bounds.bottom||w)){if(!E)a.anchor(o,p.documentId)}else{if(!E)a.anchor(g,"true");p=void 0}E=true}else{if(p&&a.linear.bottom>p.bounds.bottom)p=void 0;b.anchor(g,"true")}T=Math.min(0,i&&!b.multiline&&v&&!n.has(a)?a.linear.right-e.box.right:0),y=[a],m.push(y),d.items=y,++d.rowLength}else{if(""!==o)if(S){if(!E)a.anchor(o,b.documentId),E=true}else b.anchor(o,a.documentId);if(v&&!a.hasPX("width")&&!b.floating&&!r)a.multiline=false;y.push(a)}}else{if(S)if(!E)a.anchor(g,"true");y=[a],m.push(y),d.items=y,++d.rowLength}if("left"===a.float&&u)if(p){if(a.linear.bottom>p.linear.bottom)p=a}else p=a;if(false===(null==h?void 0:h.some(e=>!!vt(e,a.sessionId)||Yt(e)))){const e=Tt(h[0]);if(!e.numberOfLines){const t=h.length>1&&Tt(h.pop());if(!t||!t.numberOfLines)T+=t?e.left-t.right:e.width}}T+=a.marginLeft+f.width+a.marginRight,b=a}}if(c<0&&1===a.length)e.setCacheValue("paddingLeft",Math.max(0,e.paddingLeft+c))}if(a.length>1||o&&o.length>1)s=true;const l=a=>{let o=null;const r=a.length,l=1===r&&!e.hasHeight;for(let c=0,d=0;c<r;++c){const h=a[c];let f;const u=h.length;if(u>1){const a=qt(h);f=Xt.baseline(a.length>0?h.filter(e=>!a.includes(e)):h);let p=a[0],g=0,m=null;if(f&&p)if(f!==p&&f.bounds.height<p.bounds.height)f.anchor("bottom",p.documentId);else f=Xt.baseline(h),p=void 0;const b=[],y=0===c?"true":null==f?void 0:f.documentId;d=0;while(d<u){const t=h[d++];if(t===f||t===p)continue;const i=t.inlineVertical?t.css("verticalAlign"):"";if(t.controlElement){let i=t.bounds.top;if(o)i-=o.linear.bottom;else t.anchor("top","true"),i-=e.box.top;t.setBox(1,{reset:1,adjustment:i}),t.baselineAltered=true;continue}let a=false;if(t.baseline)if(t.renderChildren.length>0&&(bt(t.verticalAlign)||!t.baselineElement))a=true;else b.push(t);else switch(i){case"text-top":if(!m)m=Xt.baseline(h,true);if(m&&t!==m)t.anchor("top",m.documentId);break;case"super":if(!t.baselineAltered)t.modifyBox(1,-1*Math.floor(t.baselineHeight*this.localSettings.deviations.superscriptTopOffset));case"top":if(y&&y!==t.documentId)t.anchor("top",y);else if(f)t.anchor("top",f.documentId);break;case"middle":{const e=Math.max(t.actualHeight,t.lineHeight);if(!s){if(t.anchor("centerVertical","true"),t.imageElement)g=Math.max(e,g)}else if(f){const i=Math.max(f.actualHeight,f.lineHeight);if(e<i)t.anchor("top",f.documentId),t.setBox(1,{reset:1,adjustment:Math.round((i-e)/2)}),t.baselineAltered=true;else if(e>g)g=e}break}case"text-bottom":if(!m)m=Xt.baseline(h,true);if(m&&m!==t)t.anchor("bottom",m.documentId);else if(f)t.anchor("bottom",f.documentId);break;case"sub":if(!t.baselineAltered)t.modifyBox(1,1*Math.ceil(t.baselineHeight*this.localSettings.deviations.subscriptBottomOffset));case"bottom":if(y&&!Ot(e.bounds.height,t.bounds.height))if("true"===y&&!e.hasHeight)t.anchor("top",y),t.setBox(1,{reset:1,adjustment:t.bounds.top-e.box.top}),t.baselineAltered=true;else t.anchor("bottom",y);break;default:a=!t.baselineAltered;break}if(0===c&&a)t.anchor("top","true")}const S=b.length;if(f){if(f.baselineActive=true,S>0){if(Ft(f,b,l,e.box.top),l&&f.is(t.BUTTON))f.anchor("centerVertical","true"),f=null}else if(f.textElement)if(g>Math.max(f.actualHeight,f.lineHeight))f.anchor("centerVertical","true"),f=null;else if(f.multiline){const{left:e,height:t}=f.bounds;let i=0;while(i<u){const a=h[i++];if(a===f)break;else if(e<a.bounds.right&&t<a.bounds.height){f.anchor("bottom",a.documentId);break}}}}else if(S>0&&S<u)if(p=qt(h)[0],p){let e=0;while(e<S){const t=b[e++];if(t.baseline&&!t.multiline&&p.bounds.height>t.bounds.height)t.anchor("bottom",p.documentId)}}let T=true;d=u-1;while(d>=0){const e=h[d--];if(e.textElement)e.setSingleLine(T&&!e.rightAligned&&!e.centerAligned);T=false}if("center"===e.cssInitial("textAlign")&&r>1){const a=this.application,r=this.createNodeGroup(h[0],h,e);r.setControlType(n.RELATIVE,t.RELATIVE),r.render(e),r.anchorParent("horizontal"),r.setLayoutWidth("wrap_content"),r.setLayoutHeight("wrap_content");let s=-1;d=0;while(d<u){const e=h[d++],t=i.indexOf(e);if(-1!==t)if(-1===s)s=t;else s=Math.min(t,s);e.removeTry(),e.render(r),a.addLayoutTemplate(r,e,{type:1,node:e,controlName:e.controlName})}if(a.addLayoutTemplate(e,r,{type:1,node:r,controlName:r.controlName},s),o)r.anchor("topBottom",o.documentId);else o=r;continue}}else if(f=h[0],f.centerAligned)f.anchorParent("horizontal"),f.anchorDelete("left","right");let p=false;if(!f)f=h[0],p=true;d=0;while(d<u){const e=h[d++];if(o&&!e.alignSibling("baseline"))e.anchor("topBottom",o.documentId);if(p&&e.linear.bottom>=f.linear.bottom)f=e}o=f}};if(l(a),o)l(o);if(e.horizontalRows=o?a.concat(o):a,r)e.renderChildren.sort((e,t)=>{if(!e.pageFlow&&t.pageFlow)return 1;else if(!t.pageFlow&&e.pageFlow)return-1;return 0}),e.renderTemplates.sort((e,t)=>{const i=e.node.pageFlow,a=t.node.pageFlow;if(!i&&a)return 1;else if(!a&&i)return-1;return 0})}processConstraintHorizontal(e,t){const i=e.hasAlign(1024),[a,n,o,r]=di(i);let s,l,c,d,h,f=true,u=0,p=0;if(!i)switch(e.cssAscend("textAlign",{startSelf:true})){case"center":u=.5;break;case"right":case"end":u=1;break}if(t.some(e=>e.floating)){if(!i)switch(u){case.5:{let i;if([i,t]=Lt(t,e=>e.floating||true===e.autoMargin.horizontal),i.length>0)this.processConstraintChain(e,i);break}case 1:{let i;if([i,t]=function(e){return Lt(e,e=>"left"===e.float||true===e.autoMargin.right)}(t),i.length>0)this.processConstraintChain(e,i);break}default:{let i;if([i,t]=ni(t),i.length>0)this.processConstraintChain(e,i);break}}Vt(t)}if(!e.hasPX("width")&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent");const g=Xt.baseline(t),m=null==g?void 0:g.documentId;let b=View.availablePercent(t,"width",e.box.width);const y=t.length;for(let i=0;i<y;++i){const S=t[i];if(h){if(S.pageFlow){if(h.anchor(r,S.documentId),S.anchor(o,h.documentId),i===y-1)S.anchor(n,"parent")}else if(S.autoPosition)S.anchor(o,h.documentId)}else if(1===y)if(u=S.centerAligned?.5:S.rightAligned?1:0,S.blockStatic||.5===u)S.anchorParent("horizontal",u);else S.anchor(a,"parent"),S.anchorStyle("horizontal",0);else S.anchor(a,"parent"),S.anchorStyle("horizontal",u,Xt.justified(S.innerMostWrapped)?"spread_inside":"packed");if(S.pageFlow){if(S!==g){if(S.controlElement)f=ri(e,S);else if(S.inlineVertical){if(!c||Si(S)>Si(c))c=S;switch(S.css("verticalAlign")){case"text-top":if(void 0===s)s=Xt.baseline(t,true);if(s&&S!==s)S.anchor("top",s.documentId);else f=ri(e,S);break;case"middle":if(void 0===l)l=qt(t)[0]||null;if(l||false===(null==g?void 0:g.textElement))f=ri(e,S);else S.anchorParent("vertical",.5);break;case"text-bottom":if(void 0===s)s=Xt.baseline(t,true);if(s&&S!==s){if(void 0===l)l=qt(t)[0]||null;if(S!==l)S.anchor("bottom",s.documentId);else if(l)f=ri(e,S);break}case"bottom":if(!d){let e=0;while(e<y){const i=t[e++];if(!i.baseline&&(!d||i.linear.bottom>d.linear.bottom))d=i}}if(S===d)f=ri(e,S);else S.anchor("bottom","parent");break;case"baseline":if(!g||S.blockVertical||!S.textElement&&Si(S)>Si(g))f=ri(e,S);else S.anchor("baseline",m||"parent"),++p;break;default:f=ri(e,S);break}}else if(S.plainText)S.anchor("baseline",m||"parent"),++p;else f=ri(e,S);S.anchored=true}b=View.setConstraintDimension(S,b),h=S}else if(S.autoPosition)if(m)S.anchor("top",m);else S.anchorParent("vertical",0),S.anchored=true,f=false}if(g){if(c&&g.textElement&&Si(c)>Si(g))switch(c.verticalAlign){case"middle":g.anchorParent("vertical",.5,"",true);break;case"baseline":g.anchor("baseline",c.documentId);break;case"bottom":case"text-bottom":g.anchor("bottom",c.documentId);break;default:ri(e,g);break}else if(f&&g.baselineElement&&!g.imageOrSvgElement&&e.ascend({condition:e=>e.layoutHorizontal,error:e=>e.naturalChild&&e.layoutVertical||e.layoutGrid,attr:"renderParent"}).length>0)g.anchorParent("vertical"),g.anchor("baseline","parent");else ri(e,g);g.baselineActive=p>0,g.anchored=true}}processConstraintChain(e,t){const i=this.application.clearMap,a=e.hasAlign(256),n=t[0].actualParent||e,o=Xt.partitionRows(t,i);let r,s=[],l=false;const c=o.length;for(let t=0;t<c;++t){const d=o[t],[h,f]=Lt(d,e=>"right"===e.float||true===e.autoMargin.left);let u,p,g,m=false;const b=(o,h)=>{const f=o.length;if(0===f)return;const[b,y,S,T]=di(h),w=o[0],v=o[f-1];if(f>1){if(w.anchor(b,"parent"),h)v.anchorStyle("horizontal",1,"packed");else w.anchorStyle("horizontal",!a&&"center"===n.css("textAlign")?.5:0,1===c&&Xt.justified(w.innerMostWrapped)?"spread_inside":"packed");v.anchor(y,"parent")}else if(!w.constraint.horizontal)vi(w);let E=View.availablePercent(d,"width",e.box.width);if(1===t||l)m=!((w.floating||true!==(null==r?void 0:r.every(e=>e.floating||!e.pageFlow))||0!==i.size&&d.some(e=>Jt(e,i)))&&(w.pageFlow||w.autoPosition&&1!==f)&&true!==(null==r?void 0:r.every(e=>!e.pageFlow))),l=m;g=void 0;for(let e=0;e<f;++e){const l=o[e];if(0===t||m)if(1===c)l.anchorParent("vertical"),Ei(l,1===f,true);else l.anchor("top","parent"),l.anchorStyle("vertical",0,"packed");else if(t===c-1&&!p)l.anchor("bottom","parent");if(l.autoMargin.leftRight)l.anchorParent("horizontal");else if(f>1){const t=o[e-1],i=o[e+1];if(t)if(!t.pageFlow&&t.autoPosition){let t,i=e-2;while(i>=0)if(t=o[i--],t.pageFlow)break;else t=void 0;if(t)l.anchor(S,t.documentId);else if(!l.constraint.horizontal)l.anchor(b,"parent")}else l.anchor(S,t.documentId);if(i)l.anchor(T,i.documentId)}if(E=View.setConstraintDimension(l,E),r&&0===e){if(i.has(l)&&!l.floating)l.modifyBox(1,-r[r.length-1].bounds.height,false);if(a){let e=false,t=0;while(t<s.length)if(l.bounds.top<Math.floor(s[t++].bounds.bottom)){e=true;break}if(e){u=r[r.length-1],t=s.length-2;while(t>=0){const e=s[t--];if(e.linear.bottom>u.linear.bottom){if(h&&Math.ceil(e.linear[y])-Math.floor(n.box[y])<l.linear.width)continue;if(l.anchorDelete(b),l.anchor(S,e.documentId,true),h)l.modifyBox(2,e.marginLeft);else l.modifyBox(8,e.marginRight);if(w.delete("app","layout_constraintHorizontal_chainStyle","layout_constraintHorizontal_bias"),w.anchorDelete(T),v.anchorDelete(y),!p)p=l;break}}}}}if(!g||l.linear.height>g.linear.height)g=l}};if(b(f,false),b(h,true),a)s=s.concat(f,h);if(!m){if(r){const e=d[0],t=r.length,i=d.length;if(1===t&&1===i){const t=r[0];t.anchor("bottomTop",e.documentId),e.anchor("topBottom",t.documentId),e.app("layout_constraintVertical_bias","0")}else{if(!u||!p){u=r[0];let e=1;while(e<t){const t=r[e++];if(t.linear.bottom>u.linear.bottom)u=t}}if(!p){p=d[0];let e=p.linear.top,t=1;while(t<i){const i=d[t++],a=i.linear.top;if(a<e||a===e&&i.linear.height>p.linear.height)p=i,e=a}}const e=p.documentId;u.anchor("bottomTop",e),p.anchor("topBottom",u.documentId),Ei(p,1===t,true);const a=p.marginTop;let n=0;while(n<i){const t=d[n++];if(t!==p)Ei(t,1===i),t.anchor("top",e),t.modifyBox(1,-1*a)}}}r=d}}if(e.horizontalRows=o,!e.hasWidth&&t.some(e=>e.percentWidth>0))e.setLayoutWidth("match_parent",false)}applyGuideline(e,t,i,a){var r,s;if(e.constraint[i])return;let l,c,d;if(a)if(({orientation:l,percent:c,opposing:d}=a),l&&i!==l)return;let h=e.documentParent;if(t.nodeGroup&&!h.hasAlign(2))h=t;const f="horizontal"===i;let u,p;if(f)if(!d)u="left",p="right";else u="right",p="left";else if(!d)u="top",p="bottom";else u="bottom",p="top";const g=e.linear,m=h.box;if(!c&&!d){if(Ot(g[u],m[u]))return void e.anchor(u,"parent",true);if(e.autoPosition){const t=e.siblingsLeading,a=t.length;if(a>0&&!e.alignedVertically()){let n=a-1;while(n>=0){const a=t[n--];if(a.pageFlow){if(a.renderParent===e.renderParent)return e.anchor(f?"leftRight":"top",a.documentId,true),void(e.constraint[i]=true);break}}}}if(!e.pageFlow&&"fixed"!==e.css("position")&&!t.hasAlign(2)){const a=t=>{if(!t.pageFlow)if(f){if(t.has("right")&&!t.has("left"))return!e.has("left")&&!e.has("right")}else if(t.has("bottom")&&!t.has("top"))return!e.has("top")&&!e.has("bottom");return true},n=e.innerMostWrapped.bounds,o=t.renderChildren,r=o.length;let s=0;while(s<r){const t=o[s++];if(t===e||t.plainText||t.pseudoElement||t.rootElement||!a(t))continue;const r=t.innerMostWrapped;if(r.pageFlow||t.constraint[i]){const{linear:a,bounds:o}=r;let s,l=NaN;if(Ot(n[u],o[u]))s=u;else if(Ot(g[u],a[u]))s=u,l=(f?n.left-o.left:n.top-o.top)+ei(e,u);else if(Ot(g[u],a[p]))if(f){if(!e.hasPX("left")&&!e.hasPX("right")||!t.inlineStatic&&t.hasPX("width",{percent:false,initial:true}))s="leftRight",l=n.left-o.right}else if(!e.hasPX("top")&&!e.hasPX("bottom")||!t.inlineStatic&&t.hasPX("height",{percent:false,initial:true}))s="topBottom",l=n.top-o.bottom;if(s){if(f){if(!isNaN(l))if(e.setBox(8,{reset:1,adjustment:0}),0!==l)e.translateX(l)}else if(!isNaN(l))if(e.setBox(1,{reset:1,adjustment:0}),0!==l)e.translateY(l);return e.anchor(s,t.documentId,true),void(e.constraint[i]=true)}}}const l=f?"top":"left";let c,d;s=0;while(s<r){const t=o[s++];if(t===e||t.pageFlow||t.rootElement||!t.constraint[i]||!a(t))continue;const r=t.innerMostWrapped,h=r.bounds;if(Ot(n[l],h[l])||Ot(g[l],r.linear[l])){const a=n[u]-h[p];if(a>=0)return void ai(e,f,i,t.documentId,f?"leftRight":"topBottom",a)}else if(h[u]<=n[u])if(h[l]<=n[l])c=r;else d=r}if(!c)c=d;if(c){const t=n[u]-c.bounds[u]+ei(e,u);if(t>=0)return void ai(e,f,i,c.documentId,u,t)}}}const b=e.absoluteParent,y=e.positionStatic?e.bounds:g;let S="layout_constraintGuide_",T=0;if(!e.leftTopAxis&&h.rootElement){const t=e.renderParent;if(h.ascend({condition:e=>e===t,attr:"renderParent"}).length>0)T=f?!d?h.marginLeft:h.marginRight:!d?h.marginTop:h.marginBottom}if(c){const t=Math.abs(y[u]-m[u])/(f?m.width:m.height);S+="percent",T+=parseFloat(wt(!d?t:1-t,e.localSettings.floatPrecision))}else S+="begin",T+=y[u]-m[!d?u:p];if(!e.pageFlow){if(h.outerWrapper&&e.parent===h.outerMostWrapper)T+=h[f?!d?"paddingLeft":"paddingRight":!d?"paddingTop":"paddingBottom"];else if(b===e.documentParent){T=j(h,f?!d?128:32:!d?16:64,T)}}else if(e.inlineVertical){const t=At(e.verticalAlign);if(t<0)T+=t}if(!f&&e.marginTop<0)T-=e.marginTop,e.setBox(1,{reset:1});if(e.constraint[i]=true,T<=0)e.anchor(u,"parent",true);else if(f&&T+y.width>=m.right&&h.hasPX("width")&&!e.hasPX("right")||!f&&T+y.height>=m.bottom&&h.hasPX("height")&&!e.hasPX("bottom"))e.anchor(p,"parent",true);else{const a=t.constraint.guideline||{},l=null===(s=null===(r=a[i])||void 0===r?void 0:r[S])||void 0===s?void 0:s[u];if(l)for(const t in l)if(parseInt(l[t])===T)return e.anchor(u,t,true),void e.anchorDelete(p);const h={android:{orientation:f?"vertical":"horizontal"},app:{[S]:c?T.toString():"@dimen/"+Resource.insertStoredAsset("dimens","constraint_guideline_"+(!d?u:p),pt(T))}};this.addAfterOutsideTemplate(e.id,this.renderNodeStatic({controlName:e.api<29?n.GUIDELINE:o.GUIDELINE},h),false);const g=h.documentId;if(g)if(e.anchor(u,g,true),e.anchorDelete(p),T>0)xt(a,i,S,u,g,T.toString()),t.constraint.guideline=a}}createLayoutGroup(e){return this.createNodeGroup(e.node,e.children,e.parent)}get containerTypeHorizontal(){return{containerType:t.RELATIVE,alignmentType:4}}get containerTypeVertical(){return{containerType:t.CONSTRAINT,alignmentType:8}}get containerTypeVerticalMargin(){return{containerType:t.FRAME,alignmentType:128}}get containerTypePercent(){return{containerType:t.CONSTRAINT,alignmentType:16384}}get afterInsertNode(){return e=>{e.localSettings=this._defaultViewSettings,e.api=this._targetAPI}}get userSettings(){return this.application.userSettings}get screenDimension(){return this._screenDimension}}var xi={resources:{">":{color:{"@":["name"],"~":true}}}},Ai={resources:{">":{dimen:{"@":["name"],"~":true}}}},_i={"font-family":{"@":["xmlns:android"],">":{font:{"^":"android","@":["font","fontStyle","fontWeight"]}}}},Ri={resources:{">":{string:{"@":["name"],"~":true}}}},Ii={resources:{">":{"string-array":{"@":["name"],">":{item:{"~":true}}}}}},Ni={resources:{">":{style:{"@":["name","parent"],">":{item:{"@":["name"],"~":true}}}}}};const{fromLastIndexOf:Ci,parseMimeType:ki,plainMap:Li}=squared.lib.util,Pi=Resource.STORED;function Oi(e,t){const i=t.length;if(i>0){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e+t[n+1],filename:t[n+2],content:t[n]};return a}return t}function Wi(e,t,i,a){const n=t.length;if(n>0){i=i.toLowerCase();let o=ki(i);if(!o.startsWith("image/"))o="";const r=new Array(n/3);for(let s=0,l=0;s<n;s+=3){const n=t[s+2];let c;if(n.endsWith(".unknown"))c=(a?"png@:":"")+"image/unknown";else if(""!==o){const e=ki(n);if(e!==o&&e.startsWith("image/"))c=i+(!/[@%]/.test(i)?"@":"")+":"+e}r[l++]={pathname:e+t[s+1],filename:n,mimeType:c,compress:a&&Resource.canCompressImage(n,o)?[{format:"png"}]:void 0,uri:t[s]}}return r}return t}function Di(e,t){const i=t.length;if(i>0){const a=new Array(i/3);for(let n=0,o=0;n<i;n+=3)a[o++]={pathname:e,filename:t[n+2].toLowerCase(),mimeType:t[n+1],uri:t[n]};return a}return t}function Bi(e){return(e=e.trim().replace(/\\/g,"/"))+(!e.endsWith("/")?"/":"")}class File extends squared.base.FileUI{copyToDisk(e,t){return this.copying(Object.assign(Object.assign({},t),{assets:this.combineAssets(null==t?void 0:t.assets),directory:e}))}appendToArchive(e,t){return this.archiving(Object.assign(Object.assign({filename:this.userSettings.outputArchiveName},t),{assets:this.combineAssets(null==t?void 0:t.assets),appendTo:e}))}saveToArchive(e,t){return this.archiving(Object.assign(Object.assign({},t),{assets:this.combineAssets(null==t?void 0:t.assets),filename:e}))}resourceAllToXml(e={}){const t={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml(),anim:this.resourceAnimToXml(),drawableImage:this.resourceDrawableImageToString(),rawVideo:this.resourceRawVideoToString(),rawAudio:this.resourceRawAudioToString()};for(const e in t)if(0===t[e].length)delete t[e];if(e.directory||e.filename){const i=Bi(this.userSettings.outputDirectory);let a=[];for(const e in t)switch(e){case"drawableImage":a=a.concat(Wi(i,t[e],this.userSettings.convertImages,this.userSettings.compressImages));break;case"rawVideo":a=a.concat(Di(i+this.directory.video,t[e]));break;case"rawAudio":a=a.concat(Di(i+this.directory.audio,t[e]));break;default:a=a.concat(Oi(i,t[e]));break}if(e.assets=a.concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}resourceStringToXml(e={}){const t={string:[]},i=t.string;if(!Pi.strings.has("app_name"))i.push({name:"app_name",innerText:this.userSettings.manifestLabelAppName});for(const[e,t]of Array.from(Pi.strings.entries()).sort((e,t)=>e.toString().toLowerCase()>=t.toString().toLowerCase()?1:-1))i.push({name:e,innerText:t});return this.checkFileAssets([Z(V("resources",Ri,[t]),this.userSettings.insertSpaces,true),this.directory.string,"strings.xml"],e)}resourceStringArrayToXml(e={}){if(Pi.arrays.size>0){const t={"string-array":[]},i=t["string-array"];for(const[e,t]of Array.from(Pi.arrays.entries()).sort())i.push({name:e,item:Li(t,e=>({innerText:e}))});return this.checkFileAssets([Z(V("resources",Ii,[t]),this.userSettings.insertSpaces,true),this.directory.string,"string_arrays.xml"],e)}return[]}resourceFontToXml(e={}){var t;if(Pi.fonts.size>0){const i=this.resource,{insertSpaces:a,targetAPI:n}=this.userSettings,o=n<26?d.app:d.android,r=Bi(this.userSettings.outputDirectory),s=this.directory.font,l=[];for(const[e,c]of Array.from(Pi.fonts.entries()).sort()){const d={"xmlns:android":o,font:[]},h=d.font;for(const a in c){const[n,o,l]=a.split("|");let d=e;if("normal"===o)d+="400"===l?"_normal":"_"+c[a];else d+="_"+o+("400"!==l?c[a]:"");h.push({font:"@font/"+d,fontStyle:o,fontWeight:l});const f=null===(t=i.getFont(n,o,l))||void 0===t?void 0:t.srcUrl;if(f)this.addAsset({pathname:r+s,filename:d+"."+(Resource.getExtension(f.split("?")[0]).toLowerCase()||"ttf"),uri:f})}let f=Z(V("font-family",_i,[d]),a);if(n<26)f=f.replace(/\s+android:/g," app:");l.push(f,s,e+".xml")}return this.checkFileAssets(l,e)}return[]}resourceColorToXml(e={}){if(Pi.colors.size>0){const t={color:[]},i=t.color;for(const[e,t]of Array.from(Pi.colors.entries()).sort())i.push({name:t,innerText:e});return this.checkFileAssets([Z(V("resources",xi,[t]),this.userSettings.insertSpaces),this.directory.string,"colors.xml"],e)}return[]}resourceStyleToXml(e={}){const t=[];if(Pi.styles.size>0){const e={style:[]},i=e.style;for(const e of Array.from(Pi.styles.values()).sort((e,t)=>e.name.toString().toLowerCase()>=t.name.toString().toLowerCase()?1:-1)){const t=e.items;if(Array.isArray(t))i.push({name:e.name,parent:e.parent,item:Li(t.sort((e,t)=>e.key>=t.key?1:-1),e=>({name:e.key,innerText:e.value}))})}t.push(Z(V("resources",Ni,[e]),this.userSettings.insertSpaces),this.directory.string,"styles.xml")}if(Pi.themes.size>0){const{convertPixels:e,insertSpaces:i,manifestThemeName:a}=this.userSettings,n={};for(const[o,r]of Pi.themes.entries()){const s=/^(.+)\/(.+?\.\w+)$/.exec(o);if(s){const l={style:[]},c=l.style;for(const[e,t]of r.entries()){const i=[],r=t.items;for(const e in r)i.push({name:e,innerText:r[e]});if(!n[o]||e!==a||l.length)c.push({name:e,parent:t.parent,item:i});if(e===a)n[o]=true}const d=V("resources",Ni,[l]);t.push(Z("dp"===e?d.replace(/>(-?[\d.]+)px</g,(e,...t)=>">"+z(t[0],false)+"<"):d,i),s[1],s[2])}}}return this.checkFileAssets(t,e)}resourceDimenToXml(e={}){if(Pi.dimens.size>0){const t=this.userSettings.convertPixels,i={dimen:[]},a=i.dimen;for(const[e,i]of Array.from(Pi.dimens.entries()).sort())a.push({name:e,innerText:t?z(i,false):i});return this.checkFileAssets([Z(V("resources",Ai,[i])),this.directory.string,"dimens.xml"],e)}return[]}resourceDrawableToXml(e={}){if(Pi.drawables.size>0){const{convertPixels:t,insertSpaces:i}=this.userSettings,a=this.directory.image,n=[];for(const[e,o]of Pi.drawables.entries())n.push(Z("dp"===t?o.replace(/"(-?[\d.]+)px"/g,(e,...t)=>'"'+z(t[0],false)+'"'):o,i),a,e+".xml");return this.checkFileAssets(n,e)}return[]}resourceAnimToXml(e={}){if(Pi.animators.size>0){const t=this.userSettings.insertSpaces,i=[];for(const[e,a]of Pi.animators.entries())i.push(Z(a,t),"res/anim",e+".xml");return this.checkFileAssets(i,e)}return[]}resourceDrawableImageToString(e={}){if(Pi.images.size>0){const t=this.directory.image,i=[];for(const[e,a]of Pi.images.entries())if(Object.keys(a).length>1)for(const n in a){const o=a[n];i.push(o,t+"-"+n,e+"."+(Resource.getExtension(o).toLowerCase()||"unknown"))}else{const n=a.mdpi;if(n)i.push(n,t,e+"."+(Resource.getExtension(n).toLowerCase()||"unknown"))}if(e.directory||e.filename){if(e.assets=Wi(Bi(this.userSettings.outputDirectory),i,this.userSettings.convertImages,this.userSettings.compressImages).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return i}return[]}resourceRawVideoToString(e={}){if(Resource.ASSETS.video.size>0){const t=[];for(const e of Resource.ASSETS.video.values()){const i=e.uri;t.push(i,e.mimeType||"",Ci(i,"/","\\"))}if(e.directory||e.filename){if(e.assets=Di(Bi(this.userSettings.outputDirectory)+this.directory.video,t).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}return[]}resourceRawAudioToString(e={}){if(Resource.ASSETS.video.size>0){const t=[];for(const e of Resource.ASSETS.audio.values()){const i=e.uri;t.push(i,e.mimeType||"",Ci(i,"/","\\"))}if(e.directory||e.filename){if(e.assets=Di(Bi(this.userSettings.outputDirectory)+this.directory.audio,t).concat(e.assets||[]),e.directory)this.copying(e);if(e.filename)this.archiving(e)}return t}return[]}layoutAllToXml(e,t={}){const i=t.directory||t.filename,a={},n=[];for(let t=0;t<e.length;++t){const{content:o,filename:r,pathname:s}=e[t];if(a[r]=[o],i)n.push({pathname:s,filename:0===t?this.userSettings.outputMainFileName:r+".xml",content:o})}if(i){if(t.assets=t.assets?n.concat(t.assets):n,t.directory)this.copying(t);if(t.filename)this.archiving(t)}return a}combineAssets(e){const t=this.userSettings;let i=[];if(e){const a=e.length;let n=true,o=0;while(o<a){const i=e[o++];if(!i.uri)if(n)i.filename=t.outputMainFileName,n=false;else{const e=i.filename;if(!e.endsWith(".xml"))i.filename=e+".xml"}}i=i.concat(e)}const a=Bi(t.outputDirectory);return i.concat(Oi(a,this.resourceStringToXml()),Oi(a,this.resourceStringArrayToXml()),Oi(a,this.resourceFontToXml()),Oi(a,this.resourceColorToXml()),Oi(a,this.resourceDimenToXml()),Oi(a,this.resourceStyleToXml()),Oi(a,this.resourceDrawableToXml()),Wi(a,this.resourceDrawableImageToString(),t.convertImages,t.compressImages),Oi(a,this.resourceAnimToXml()),Di(a+this.directory.video,this.resourceRawVideoToString()),Di(a+this.directory.audio,this.resourceRawAudioToString()))}checkFileAssets(e,t){if(t.directory||t.filename){if(t.assets=Oi(Bi(this.userSettings.outputDirectory),e).concat(t.assets||[]),t.directory)this.copying(t);if(t.filename)this.archiving(t)}return e}get userSettings(){return this.resource.userSettings}}const{formatPX:Mi}=squared.lib.css,{NODE_PROCEDURE:Hi,NODE_RESOURCE:Gi}=squared.base.lib.enumeration;class Accessibility extends squared.base.extensions.Accessibility{constructor(){super(...arguments),this.eventOnly=true,this.options={displayLabel:false}}beforeBaseLayout(e){const t=this.application.getProcessingCache(e);t.each(e=>{if(e.inputElement&&e.hasProcedure(Hi.ACCESSIBILITY)){const i=e.attributes["aria-describedby"];if(i){const a=t.find(e=>e.elementId===i);if(a){const t=a.textContent.trim();if(""!==t)e.data(Resource.KEY_NAME,"titleString",t)}}switch(e.containerName){case"INPUT_RADIO":case"INPUT_CHECKBOX":if(!e.rightAligned&&!e.centerAligned){const t=e.elementId;[e.nextSibling,e.previousSibling].some(i=>{if((null==i?void 0:i.pageFlow)&&!i.visibleStyle.backgroundImage&&i.visible){let a=false;if(t&&t===i.toElementString("htmlFor"))a=true;else if(i.textElement){const t=i.actualParent;if("LABEL"===t.tagName)t.renderAs=e,a=true;else if(i.plainText)a=true}if(a){if(i.labelFor=e,!this.options.displayLabel)i.hide();return true}}return false})}break;case"INPUT_IMAGE":if(e.hasResource(Gi.IMAGE_SOURCE))e.data(Resource.KEY_NAME,"embedded",[e]);break;case"BUTTON":if(e.length>0){let{width:t,height:i}=e.bounds,a=false;if(e.cascade(n=>{if(n.width>=t&&n.height>=i){if(({width:t,height:i}=n),!e.visibleStyle.background)e.inherit(n,"boxStyle");a=true}}),a)e.css("minWidth",Mi(t)),e.css("minHeight",Mi(i));const n=e.extract(e=>!e.textElement);if(n.length>0&&e.hasResource(Gi.IMAGE_SOURCE))e.data(Resource.KEY_NAME,"embedded",n);e.clear()}break}}})}}const{formatPX:Xi}=squared.lib.css,{createElement:Vi}=squared.lib.dom,{truncate:zi}=squared.lib.math,{safeNestedArray:Fi}=squared.lib.util,{APP_SECTION:Ui,BOX_STANDARD:qi,NODE_ALIGNMENT:Yi,NODE_PROCEDURE:ji,NODE_RESOURCE:$i,NODE_TEMPLATE:Ki}=squared.base.lib.enumeration;class Column extends squared.base.extensions.Column{processNode(e,i){return super.processNode(e,i),e.containerType=t.CONSTRAINT,e.addAlign(2),{complete:true,subscribe:true}}postBaseLayout(e){const i=e.data(this.name,"mainData");if(i){const a=this.application,{columnCount:o,columnGap:r,columnWidth:s,columnRule:l,columnSized:c,boxWidth:d,rows:h,multiline:f}=i,{borderLeftWidth:u,borderLeftColor:p,borderLeftStyle:g}=l,m=e.parseUnit(u),b="none"!==g&&m>0,y=()=>{const i=a.createNode(e.sessionId,{parent:e,append:true});let o;if(i.inherit(e,"base"),i.containerName=e.containerName+"_COLUMNRULE",i.setControlType(n.LINE,t.LINE),i.exclude({resource:$i.ASSET,procedure:ji.ALL}),b)o=Xi(m),i.cssApply({width:o,paddingLeft:o,borderLeftStyle:g,borderLeftWidth:u,borderLeftColor:p,lineHeight:"initial",boxSizing:"border-box",display:"inline-block"});else o=Xi(r),i.cssApply({width:o,lineHeight:"initial",display:"inline-block"});return i.saveAsInitial(),i.setLayoutWidth(o),i.setLayoutHeight("0px"),i.render(e),i.positioned=true,i.renderExclude=false,a.addLayoutTemplate(e,i,{type:1,node:i,controlName:i.controlName}),i};let S;const T=h.length;for(let t=0;t<T;++t){const i=h[t],a=i.length;if(1===a){const e=i[0];if(0===t)e.anchor("top","parent"),e.anchorStyle("vertical",0,"packed");else S.anchor("bottomTop",e.documentId),e.anchor("topBottom",S.documentId);if(t===T-1)e.anchor("bottom","parent");else S=i[0];e.anchorParent("horizontal",e.rightAligned?1:e.centerAligned?.5:0),e.anchored=true,e.positioned=true}else{const n=[];let l=Math.min(a,c,o||1/0),h=0;if(l>1){const e=Math.floor(i.reduce((e,t)=>e+t.bounds.height,0)/l);let t=a>=l?Math.ceil(a/l):1,s=f||t>1&&(a%t!=0||!isNaN(o)&&t*o%a>1),c=s&&a%l!=0?a-l:1/0;for(let o=0,r=0,d=0;o<a;++o,++d){const h=i[o],f=d%t==0;if(r<l-1&&(f||c<=0||o>0&&(i[o-1].bounds.height>=e||n[r].length>0&&o<a-2&&a-o+1==l-r&&i[o-1].bounds.height>i[o+1].bounds.height))){if(o>0)if(++r,f)--c;else++c;if(d=0,!f&&c>0)s=true}const u=Fi(n,r);if(u.push(h),o>0&&/^H\d/.test(h.tagName)){if(1===u.length&&o===a-2)--l,c=0;else if((d+1)%t==0&&a-o>l&&!i[o+1].multiline&&i[o+1].bounds.height<e)u.push(i[++o]),d=-1}else if(s&&a-o==l-r&&c!==1/0)t=1}h=l>1?Math.max(r*(l-1)/d/l,.01):0}else n.push(i);const u=n.length,p=new Array(u);let g;for(g=0;g<u;++g){const t=n[g];for(let i=0;i<t.length;++i){const a=t[i];a.app("layout_constraintWidth_percent",zi(1/l-h,e.localSettings.floatPrecision)),a.setLayoutWidth("0px"),a.setBox(2,{reset:1}),a.exclude({section:Ui.EXTENSION}),a.anchored=true,a.positioned=true}p[g]=t[0]}for(g=0;g<u;++g){const e=n[g];if(g<u-1&&e.length>1){const t=e[e.length-1];if(/^H\d/.test(t.tagName)){e.pop();const i=g+1;p[i]=t,n[i].unshift(t)}}}const m=new Array(u);for(g=0;g<u;++g){const t=n[g],i=[];let a=0,o=t.length,r=0;while(r<o){const e=t[r++];if(e.naturalChild){const t=e.element.cloneNode(true);if(e.styleElement)if(e.imageOrSvgElement||e.some(e=>e.imageOrSvgElement,{cascade:true}))t.style.height=Xi(e.bounds.height);else{const i=e.textStyle;for(const e in i)t.style[e]=i[e]}i.push(t)}else a+=e.linear.height}if(o=i.length,o>0){const t=Vi("div",{parent:document.body,style:{width:Xi(s||e.box.width/l),visibility:"hidden"}});r=0;while(r<o)t.appendChild(i[r++]);a+=t.getBoundingClientRect().height,document.body.removeChild(t)}m[g]=a}let b,w,v=0;for(g=0;g<u;++g){const e=m[g];if(e>=v){const t=n[g];b=t[0],w=t[t.length-1],v=e}}for(g=0;g<u;++g){const e=p[g];if(0===g)e.anchor("left","parent"),e.anchorStyle("horizontal",0,"packed");else{const t=p[g-1];e.anchor("leftRight",t.documentId),e.modifyBox(8,r)}if(g===u-1)e.anchor("right","parent");else e.anchor("rightLeft",p[g+1].documentId)}const E=[];for(g=0;g<u;++g){const e=n[g],i=e.length;for(let a=0;a<i;++a){const o=e[a];if(0===a){if(g>0){const e=y();e.anchor("top",b.documentId),e.anchor("left",n[g-1][0].documentId),e.anchor("right",o.documentId),E.push(e)}if(0===t)o.anchor("top","parent");else if(o!==b)o.anchor("top",b.documentId);else S.anchor("bottomTop",o.documentId),o.anchor("topBottom",S.documentId);o.anchorStyle("vertical",0,"packed"),o.setBox(1,{reset:1})}else{const t=e[a-1];t.anchor("bottomTop",o.documentId),o.anchor("topBottom",t.documentId),o.app("layout_constraintVertical_bias","0"),o.anchor("left",e[0].documentId)}if(a===i-1){if(t===T-1)o.anchor("bottom","parent");o.setBox(4,{reset:1})}}}const x=t<T-1?w.documentId:"parent";g=0;while(g<E.length)E[g++].anchor("bottom",x);S=w}}}}}var Zi=squared.base.LayoutUI;const{formatPercent:Ji,formatPX:Qi,isLength:ea,isPercent:ta,isPx:ia}=squared.lib.css,{maxArray:aa,truncate:na}=squared.lib.math,{conditionArray:oa,flatArray:ra,isArray:sa}=squared.lib.util,{BOX_STANDARD:la,NODE_ALIGNMENT:ca,NODE_PROCEDURE:da,NODE_RESOURCE:ha}=squared.base.lib.enumeration;function fa(e,t,i,a,n){const o=i?t.column:t.row,r=o.unit,s=r.length;let l=0;if(s>0){const e=i?"width":"height";for(let i=0;i<s;++i){const a=r[i];if(ia(a))l+=parseFloat(a);else{let a=0;oa(t.rowData[i],e=>sa(e),t=>a=Math.min(a,...t.map(t=>t.bounds[e]))),l+=a}}}else if(l=aa(o.unitTotal),l<=0)return 0;if(l+=o.gap*(o.length-1),i)return l+=e.contentBox?e.borderLeftWidth+e.borderRightWidth:e.contentBoxWidth,(a>l?Math.min(a,e.actualWidth):e.actualWidth)-l;else return l+=e.contentBox?e.borderTopWidth+e.borderBottomWidth:e.contentBoxHeight,(n>l&&e.documentBody?Math.min(n,e.actualHeight):e.actualHeight)-l}function ua(e,t){const i=Math.floor(t/e);return[i,t-i*e]}function pa(e,t,i,a,n,o,r,s,l,c){const d=a?t.column:t.row;if(i.startsWith("space")){const h=fa(e,t,a,l,c);if(h>0){const e=function(e,t){const i=e.rowData;if(t){const t=e.column.length,a=e.row.length,n=new Array(t);let o,r=0;while(r<t){const e=new Array(a);o=0;while(o<a)e[o]=i[o++][r];n[r++]=e}return n}return i}(t,a),l=d.length,c=new Set;switch(i){case"space-around":{const[t,i]=ua(2*l,h);for(let a=0;a<l;++a)for(const o of new Set(ra(e[a],1/0))){const e=(a>0&&a<=i?1:0)+t;if(!c.has(o))o.modifyBox(r,e),o.modifyBox(s,t),c.add(o);else o.cssPX(n,h/l,true)}break}case"space-between":if(l>1){const[t,i]=ua(l-1,h);for(let o=0;o<l;++o)for(const r of new Set(ra(e[o],1/0)))if(o<l-1){const e=t+(o<i?1:0);if(!c.has(r))r.modifyBox(s,e),c.add(r);else r.cssPX(n,e,true)}else{if(parseInt(r.android(a?"layout_columnSpan":"layout_rowSpan"))>1){const e=t+(i>0?Math.max(i-1,1):0);if(r.cssPX(n,e,true),c.has(r))r.modifyBox(s,-e,false)}}}else return;break;case"space-evenly":{const[t,i]=ua(l+1,h);for(let a=0;a<l;++a)for(const l of new Set(ra(e[a],1/0))){let e=t+(a<i?1:0);if(!c.has(l)){if(o)e/=2,l.modifyBox(r,e),l.modifyBox(s,e);else{if(0===a)l.modifyBox(r,t);l.modifyBox(s,e)}c.add(l)}else l.cssPX(n,e,true)}break}}}}else if(!o){let n=fa(e,t,a,l,c);if(n>0)switch(i){case"center":if(n/=2,a)e.modifyBox(128,Math.floor(n));else e.modifyBox(16,Math.floor(n)),e.modifyBox(64,Math.ceil(n));break;case"right":if(!a)break;case"end":case"flex-end":e.modifyBox(a?128:16,n);break}}}function ga(e,t,i,a){let n,o,r,s;if(i.every(e=>ia(e))){const e=i.reduce((e,t)=>e+parseFloat(t),a),r=Qi(e);if(t)n=r;else o=r}else if(i.every(e=>CssGrid.isFr(e))){const a=i.reduce((e,t)=>e+parseFloat(t),0),l=na(a,e.localSettings.floatPrecision);if(t)n="0px",r=l;else o="0px",s=l}else if(i.every(e=>ta(e))){const r=Ji((i.reduce((e,t)=>e+parseFloat(t),0)+a/(t?e.actualWidth:e.actualHeight))/100);if(t)n=r;else o=r}else if(t)n="wrap_content";else o="wrap_content";return[n,o,r,s]}function ma(e,t){const i=e.unit;if(i.length>0&&i.every(e=>"auto"===e))e.unit=new Array(length).fill(t?"1fr":"")}function ba(e,t){const i=e.unit;let a=0,n=0,o=0;while(o<i.length){const e=i[o++];if(ia(e))a+=parseFloat(e);else if(ta(e))n+=parseFloat(e);else if(CssGrid.isFr(e))return 0}const r=Math.ceil(a+(e.length-1)*e.gap);if(n>0)return n+r/t*100;else if(a>0)return r<t?-1:0;return 0}const ya=e=>"space-between"===e?"match_parent":"wrap_content",Sa=e=>/start|end|center|baseline/.test(e);class CssGrid extends squared.base.extensions.CssGrid{processNode(e,i){let a,n,o;if(CssGrid.isJustified(e)||CssGrid.isAligned(e)){if(a=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,resource:ha.ASSET}),a.inherit(e,"styleMap","boxStyle"),e.resetBox(15,a),e.resetBox(240,a),e.data(this.name,"unsetContentBox",true),CssGrid.isJustified(e))e.setLayoutWidth(ya(e.css("justifyContent")));else if(e.hasPX("width",{percent:false}))e.setLayoutWidth("match_parent");else a.setLayoutWidth(e.blockStatic?"match_parent":"wrap_content");if(CssGrid.isAligned(e))e.setLayoutHeight(ya(e.css("alignContent")));else if(e.hasPX("height",{percent:false}))e.setLayoutHeight("match_parent");else a.setLayoutHeight("wrap_content");n=a,o=this.application.renderNode(new Zi(i,a,t.CONSTRAINT,2048,a.children))}super.processNode(e,i);const r=e.data(this.name,"mainData");if(r){const{column:s,row:l}=r,c=s.unit,d=s.length,h=Zi.create({parent:a||i,node:e,containerType:t.GRID,alignmentType:2,children:e.children,rowCount:l.length,columnCount:d});if(!e.rootElement&&!e.hasWidth&&0===r.rowSpanMultiple.length&&c.length===d&&c.every(e=>CssGrid.isFr(e))&&e.ascend({condition:e=>function(e,t){const i=e.actualParent;if(null==i?void 0:i.gridElement){const a=i.data(t,"mainData"),n=e.data(t,"cellData");if(a&&n){const e=a.column.unit,{columnStart:t,columnSpan:i}=n;let o=false,r=0;while(r<i){const i=e[t+r++];if(CssGrid.isFr(i)||ta(i))o=true;else if("auto"===i){o=false;break}}return o}}else if(e.hasFlex("row")&&e.flexbox.grow>0)return true;return false}(e,this.name),error:e=>e.hasWidth}).length>0){const i=r.rowData,a=i.length,n=new Array(a);let o=true;e:{let e,t=0;while(t<a){const a=[],r=i[t];e=0;while(e<r.length){const t=r[e++];if(1===(null==t?void 0:t.length))a.push(t[0]);else{o=false;break e}}n[t++]=a}}if(o)s.frTotal=c.reduce((e,t)=>e+parseFloat(t),0),l.frTotal=l.unit.reduce((e,t)=>e+(CssGrid.isFr(t)?parseFloat(t):0),0),e.setLayoutWidth("match_parent"),e.lockAttr("android","layout_width"),e.data(this.name,"constraintData",n),h.setContainerType(t.CONSTRAINT)}if(h.containerType===t.GRID)ma(s,true),ma(l,false);return{parent:a,renderAs:n,outputAs:o,outerParent:a,output:this.application.renderNode(h),include:true,complete:true}}}processChild(e,i){var a;const o=i.data(this.name,"mainData"),r=e.data(this.name,"cellData");let s,l;if(o&&r){const{column:c,row:d}=o,h=e.has("alignSelf")?e.css("alignSelf"):o.alignItems,f=e.has("justifySelf")?e.css("justifySelf"):o.justifyItems,u=i.layoutConstraint,p=(t,a,n)=>{const[s,l,h,f]=a?[c,r.columnStart,r.columnSpan,"minWidth"]:[d,r.rowStart,r.rowSpan,"minHeight"],{unit:p,unitMin:g}=s;let m=0,b=0,y=0,S=0,T=false,w=false,v=0,E=0;while(v<h){const r=l+v++,c=g[r];if(""!==c)y+=a?i.parseUnit(c):i.parseUnit(c,{dimension:"height"});let d=p[r];if(!d){const e=s.auto;if(e[E]){if(d=e[E],e[E+1])++E}else continue}if("auto"===d||"max-content"===d){if(w=true,h<p.length&&(!i.hasPX(n)||p.some(e=>ea(e))||"max-content"===d)){m=e.bounds[n],b=0,S=0;break}else if(a){m=0,b=0,S=-1;break}}else if("min-content"===d){if(!t.hasPX(n)){if(a)t.setLayoutWidth("wrap_content",false);else t.setLayoutHeight("wrap_content",false);break}}else if(CssGrid.isFr(d)){if(a||i.hasHeight){if(-1===S)S=0;S+=parseFloat(d),b=m}else S=0,b+=o.minCellHeight*parseFloat(d);m=0}else if(ta(d)){if(-1===S)S=0;S+=parseFloat(d)/100,b=m,m=0}else{const e=a?t.parseUnit(d):t.parseUnit(d,{dimension:"height"});if(0===b)m+=e;else b+=e}if(e.textElement&&/^\s*0[a-z]*\s*$/.test(c))T=true}if(h>1){const e=(h-1)*s.gap;if(m>0&&0===b)m+=e;else if(b>0)b+=e;if(y>0)y+=e}if(y>0)if(s.autoFill&&0===m&&1===(a?d.length:c.length))m=Math.max(e.actualWidth,y),S=0;else b=y;if(b>0&&!t.hasPX(f))t.css(f,Qi(b),true);if(u){if(a){if(!t.hasPX("width",{percent:false}))t.app("layout_constraintWidth_percent",na(S/c.frTotal,t.localSettings.floatPrecision)),t.setLayoutWidth("0px");if(0===l)t.anchor("left","parent"),t.anchorStyle("horizontal",0,"spread");else{const e=t.innerMostWrapped.previousSibling;if(e)e.anchor("rightLeft",t.documentId),t.anchor("leftRight",e.anchorTarget.documentId)}if(l+h===c.length)t.anchor("right","parent");t.positioned=true}else if(!t.hasPX("height",{percent:false}))if(S>0)if(1===d.length)t.setLayoutHeight("match_parent");else t.app("layout_constraintHeight_percent",na(S/d.frTotal,t.localSettings.floatPrecision)),t.setLayoutHeight("0px");else if(m>0){if(t.contentBox)m-=t.contentBoxHeight;t.css(w?"minHeight":"height",Qi(m),true)}}else{t.android(a?"layout_column":"layout_row",l.toString()),t.android(a?"layout_columnSpan":"layout_rowSpan",h.toString());let o=a&&c.flexible;if(0!==S){if(!t.hasPX(n))if(a){if(r.columnSpan===c.length)t.setLayoutWidth("match_parent");else t.setLayoutWidth("0px"),t.android("layout_columnWeight",-1===S?"0.01":na(S,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_horizontal");o=false}else if(r.rowSpan===d.length)t.setLayoutHeight("match_parent");else t.setLayoutHeight("0px"),t.android("layout_rowWeight",na(S,e.localSettings.floatPrecision)),t.mergeGravity("layout_gravity","fill_vertical")}else if(m>0){const e=a?"maxWidth":"maxHeight";if(T&&!t.hasPX(e))t.css(e,Qi(m),true),t.mergeGravity("layout_gravity",a?"fill_horizontal":"fill_vertical");else if(!t.hasPX(n)){if(t.contentBox)m-=a?t.contentBoxWidth:t.contentBoxHeight;if(w&&!i.hasPX(e))if(t.css(f,Qi(m),true),a)t.setLayoutWidth("wrap_content");else t.setLayoutHeight("wrap_content");else t.css(n,Qi(m),true)}}else if(0===p.length&&!t.hasPX(n))if(a)t.setLayoutWidth("match_parent",false);else t.setLayoutHeight("wrap_content",false);if(o)t.android("layout_columnWeight","0")}return[l,h]};if(Sa(h)||/start|center|end|baseline|right|left/.test(f)||u){s=this.application.createNode(e.sessionId,{parent:i,innerWrap:e}),s.containerName=e.containerName,s.setControlType(n.FRAME,t.FRAME),s.inherit(e,"base","initial"),s.exclude({resource:ha.BOX_STYLE|ha.ASSET,procedure:da.CUSTOMIZATION}),s.resetBox(15),s.resetBox(240),s.render(i),e.transferBox(15,s);let a=true;switch(f){case"first baseline":case"baseline":case"left":case"start":case"flex-start":case"self-start":e.mergeGravity("layout_gravity","left");break;case"last baseline":case"right":case"end":case"flex-end":case"self-end":e.mergeGravity("layout_gravity","right");break;case"center":e.mergeGravity("layout_gravity","center_horizontal");break;default:a=false;break}if(!e.hasWidth)e.setLayoutWidth(a?"wrap_content":"match_parent",false);switch(h){case"first baseline":case"baseline":case"start":case"flex-start":case"self-start":e.mergeGravity("layout_gravity","top");break;case"last baseline":case"end":case"flex-end":case"self-end":e.mergeGravity("layout_gravity","bottom");break;case"center":e.mergeGravity("layout_gravity","center_vertical");break;default:if(!e.hasHeight)e.setLayoutHeight("match_parent",false);break}l=this.application.renderNode(new Zi(i,s,t.FRAME,2048,s.children))}else e.mergeGravity("layout_gravity","top");const g=s||e;if(p(g,true,"width"),g!==e||e.hasPX("maxHeight"))g.mergeGravity("layout_gravity","fill");else if(!g.hasPX("width"))g.mergeGravity("layout_gravity","fill_horizontal");const[m,b]=p(g,false,"height");if("normal"===o.alignContent&&!i.hasPX("height")&&!e.hasPX("minHeight")&&(!d.unit[m]||"auto"===d.unit[m])&&Math.floor(e.bounds.height)>((null===(a=e.data(this.name,"boundsData"))||void 0===a?void 0:a.height)||1/0)&&function(e,t,i,a,n){if(1===t&&a.rowSpanMultiple[i]){const o=a.rowData;for(const a of ra(o[i],1/0))if(a!==e){const e=a.data(n,"cellData");if(e&&e.rowSpan>t&&(0===i||e.rowSpan<o.length))return true}}return false}(e,b,m,o,this.name))g.css("minHeight",Qi(e.box.height));else if(!(g.hasPX("height")||g.hasPX("maxHeight")||1===d.length&&o.alignContent.startsWith("space")&&!Sa(o.alignItems)))g.mergeGravity("layout_gravity","fill_vertical")}return{parent:s,renderAs:s,outputAs:l}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=this.controller,{children:a,column:n,row:o,rowData:r}=t,s=true===e.data(this.name,"unsetContentBox"),l=a[a.length-1].id;if(CssGrid.isJustified(e)){switch(pa(e,t,t.justifyContent,true,"width",s,8,2,i.userSettings.resolutionScreenWidth-e.bounds.left,0),t.justifyContent){case"center":case"space-around":case"space-evenly":if(s)e.anchorParent("horizontal",.5,"",true);break;case"right":case"end":case"flex-end":if(s)e.anchorParent("horizontal",1,"",true);break;default:if(1===t.column.length)e.setLayoutWidth("match_parent");break}if(s)if(n.unit.some(e=>CssGrid.isFr(e)))e.setLayoutWidth("match_parent")}else{const t=n.length;if(e.blockStatic||e.hasWidth){const a=ba(n,e.actualWidth);if(0!==a&&a<100){if(a>0)i.addAfterOutsideTemplate(l,i.renderSpace({width:Ji((100-a)/100),height:"match_parent",rowSpan:o.length,android:{layout_row:"0",layout_column:t.toString(),layout_columnWeight:n.flexible?"0.01":""}}),false);e.android("columnCount",(t+1).toString())}}if(s)if(e.contentBoxWidth>0&&e.hasPX("width",{percent:false}))e.anchorParent("horizontal",.5,"",true);else if(1===t)e.setLayoutWidth("match_parent");else e.setLayoutWidth("wrap_content",false)}if(CssGrid.isAligned(e)){if(pa(e,t,t.alignContent,false,"height",s,1,4,0,this.controller.userSettings.resolutionScreenHeight),s)switch(t.alignContent){case"center":case"space-around":case"space-evenly":e.anchorParent("vertical",.5,"",true);break;case"end":case"flex-end":e.anchorParent("vertical",1,"",true);break}}else{if(e.hasHeight){const t=ba(o,e.actualHeight);if(0!==t&&t<100){if(t>0)i.addAfterOutsideTemplate(l,i.renderSpace({width:"match_parent",height:Ji((100-t)/100),columnSpan:n.length,android:{layout_row:o.length.toString(),layout_column:"0",layout_rowWeight:o.flexible?"0.01":""}}),false);e.android("rowCount",(o.length+1).toString())}}if(s)if(e.contentBoxHeight>0&&e.hasPX("height",{percent:false}))e.anchorParent("vertical",.5,"",true);else e.setLayoutHeight("wrap_content",false)}const c=e.data(this.name,"constraintData");if(c){const{gap:t,length:a}=n,o=c.length,r=new Array(o-1);let s=1,l=0;while(s<o)r[l++]=i.addBarrier(c[s++],"top");for(s=0;s<o;++s){const d=c[s],h=r[s-1],f=r[s];let u;for(l=0;l<a;++l){const r=d[l];if(r){if(0===s)r.anchor("top","parent"),r.anchor("bottomTop",f),r.anchorStyle("vertical",0,"packed");else{if(s===o-1)r.anchor("bottom","parent");else r.anchor("bottomTop",f);r.anchor("topBottom",h)}if(l===a-1)r.anchor("right","parent");else r.modifyBox(2,-t);if(u)u.anchor("rightLeft",r.documentId),r.anchor("leftRight",u.documentId);else r.anchor("left","parent"),r.anchorStyle("horizontal",0,"packed");r.anchored=true,r.positioned=true,u=r}else if(u){const t={width:"0px",height:"wrap_content",android:{},app:{layout_constraintTop_toTopOf:0===s?"parent":"",layout_constraintTop_toBottomOf:h,layout_constraintBottom_toTopOf:s<a-1?f:"",layout_constraintBottom_toBottomOf:s===a-1?"parent":"",layout_constraintStart_toEndOf:u.anchorTarget.documentId,layout_constraintEnd_toEndOf:"parent",layout_constraintVertical_bias:0===s?"0":"",layout_constraintVertical_chainStyle:0===s?"packed":"",layout_constraintWidth_percent:(n.unit.slice(l,a).reduce((e,t)=>e+parseFloat(t),0)/n.frTotal).toString()}};i.addAfterInsideTemplate(e.id,i.renderSpace(t),false),u.anchor("rightLeft",t.documentId);break}}}}else{const{emptyRows:a,rowDirection:s}=t,{flexible:c,gap:d,unit:f}=s?n:o,u=f.length;let p=-1,g=0;const m=(t,a,n,o="wrap_content",r="",d=0)=>{if(-1!==p){const f=a.slice(p,p+g);let u,m,b,y,S="",T="",w=1,v=1;if(s)b=t.toString(),y=p.toString(),T=o,u=c?"0.01":"",m=r,v=g;else b=p.toString(),y=t.toString(),m=c?"0.01":"",u=r,S=o,w=g;if(f.length===a.length){if(s)S="match_parent",u="";else T="match_parent",m="";n=0}else{const[t,i,a,o]=ga(e,s,f,n*(f.length-1));if(t)S=t;if(i)T=i;if(a)u=a;if(o)m=o}i.addAfterOutsideTemplate(l,i.renderSpace({width:S,height:T,rowSpan:w,columnSpan:v,android:{[s?e.localizeString(h.MARGIN_RIGHT):"bottom"]:n>0&&p+g<a.length?"@dimen/"+Resource.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${s?"column":"row"}_gap`,Qi(n)):"",[s?"bottom":e.localizeString(h.MARGIN_RIGHT)]:d>0?"@dimen/"+Resource.insertStoredAsset("dimens",`${e.controlId}_cssgrid_${s?"row":"column"}_gap`,Qi(d)):"",layout_row:b,layout_column:y,layout_rowWeight:m,layout_columnWeight:u,layout_gravity:"fill"}}),ia(S)||ia(T)),p=-1}g=0};let b=Math.max(r.length,1);for(let e=0;e<b;++e)if(!a[e]){const t=r[e];for(let i=0;i<u;++i)if(t[i])m(e,f,d);else{if(-1===p)p=i;++g}m(e,f,d)}b=a.length;for(let t=0;t<b;++t){const i=a[t];if(i){const a=i.length;for(let r=0;r<a;++r){const l=i[r];if(l>0){p=r;const{unit:i,gap:c}=s?o:n,h=ga(e,!s,[i[s?r:t]],0);if(g=l===1/0?f.length:1,s)m(t,i,c,h[1],h[3],t<b-1?d:0);else m(t,i,c,h[0],h[2],r<a-1?d:0)}}}}}}}postOptimize(e){var t;const i=e.data(this.name,"mainData");if(i)if(e.blockStatic&&!e.hasPX("minWidth",{percent:false})&&false===(null===(t=e.actualParent)||void 0===t?void 0:t.layoutElement)){const{gap:t,length:a,unit:n}=i.column;let o=t*(a-1),r=0;while(r<n.length){const e=n[r++];if(ia(e))o+=parseFloat(e);else return}if(o>e.width)if(e.android("minWidth",Qi(o)),!e.flexibleWidth&&!e.blockWidth)e.setLayoutWidth("wrap_content")}}}class External extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}init(e,t){var i;if(this.included(e))null===(i=this.application.getProcessing(t))||void 0===i||i.rootElements.add(e);return false}}var Ta=squared.base.LayoutUI;const{isLength:wa}=squared.lib.css,{truncate:va}=squared.lib.math,{capitalize:Ea,iterateReverseArray:xa,sameArray:Aa,withinRange:_a}=squared.lib.util,{BOX_STANDARD:Ra,NODE_ALIGNMENT:Ia}=squared.base.lib.enumeration,Na=squared.base.NodeUI,Ca={orientation:"horizontal",orientationInverse:"vertical",WHL:"width",HWL:"height",LT:"left",TL:"top",RB:"right",BR:"bottom",LRTB:"leftRight",RLBT:"rightLeft"},ka={orientation:"vertical",orientationInverse:"horizontal",WHL:"height",HWL:"width",LT:"top",TL:"left",RB:"bottom",BR:"right",LRTB:"topBottom",RLBT:"bottomTop"};function La(e,t,i){const a="width"===i,n=a?"hasWidth":"hasHeight";let o=e[n]||a&&e.blockStatic&&_a(e.parseWidth(e.css("maxWidth")),e.box.width),r=0,s=0;const l=t.length;let c=0;while(c<l){const e=t[c++];if(o)if(a){if(e.innerMostWrapped.autoMargin.horizontal){o=false;break}}else if(e.innerMostWrapped.autoMargin.vertical){o=false;break}s+=e.flexbox.grow}if(l>1&&(a||o)){const a=[],s=[];let d,h=0,f=0,u=NaN;c=0;while(c<l){const e=t[c++],{alignSelf:l,basis:p,shrink:g,grow:m}=e.flexbox,b=e.bounds[i];let y=false;if(m>0||1!==g){const t=e.parseUnit("auto"===p?e.css(i):p,{dimension:i});if(t>0){let i=false;if(b<t){if(isNaN(u)||g<u)u=g,i=true,r=1}else if(isNaN(u)||m>u)u=m,i=true,r=2;if(i)d=e,h=t,f=b;a.push({item:e,basis:t,dimension:b,shrink:g,grow:m});continue}else if(m>0)y=true}else if(wa(p)){a.push({item:e,basis:Math.min(b,e.parseUnit(p,{dimension:i})),dimension:b,shrink:g,grow:m}),e.flexbox.basis="auto";continue}if("auto"===l&&(o&&!e[n]||y))s.push(e)}if(r){let t=a.length;if(t>1){c=0;while(c<t){const e=a[c++],{basis:t,item:i}=e;if(i===d||t===h&&(1===r&&u===e.shrink||2===r&&u===e.grow))i.flexbox.grow=1;else if(t>0)i.flexbox.grow=e.dimension/t/(f/h)*t/h}}t=s.length,c=0;while(c<t)Ba(e,s[c++],i)}}if(a&&0===r){c=0;while(c<l){if(t[c++].find(t=>t.multiline&&0===t.ascend({condition:e=>e[n],including:e}).length,{cascade:true})){c=0;while(c<l)Ba(e,t[c++],i);break}}}return s}function Pa(e){const t=e.length;let i=0;while(i<t){const t=e[i++];if(t.textElement&&t.baseline)return t}return Na.baseline(e)}function Oa(e,t,i){if(!i)e.setLayoutWidth(t);else e.setLayoutHeight(t)}function Wa(e){while(void 0!==e){if(e.layoutFrame)return e.innerWrapped;e=e.innerWrapped}}function Da(e,t,i,a,n){if(0===e[i])if(e.app(a,va(n,e.localSettings.floatPrecision)),t)e.setLayoutWidth("0px");else e.setLayoutHeight("0px")}const Ba=(e,t,i)=>t.flexbox.basis=t.bounds[i]/e.box[i]*100+"%";class Flexbox extends squared.base.extensions.Flexbox{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"mainData"),{rowCount:n,columnCount:o}=a;if(1===n&&a.row||1===o&&a.column)return e.containerType=t.CONSTRAINT,e.addAlign(2),e.addAlign(a.column?8:4),a.wrap=false,{include:true,complete:true};else return{output:this.application.renderNode(Ta.create({parent:i,node:e,containerType:t.CONSTRAINT,alignmentType:2|(a.column?4:8),itemCount:e.length,rowCount:n,columnCount:o})),include:true,complete:true}}processChild(e,i){if(e.hasAlign(64))return{output:this.application.renderNode(new Ta(i,e,t.CONSTRAINT,2,e.children)),complete:true,subscribe:true};else{const a=e.autoMargin;if(a.horizontal||a.vertical&&i.hasHeight){const n=i.data(this.name,"mainData");if(n){const o=n.children.findIndex(t=>t===e);if(-1!==o){const r=this.controller.createNodeWrapper(e,i);if(r.cssApply({marginTop:"0px",marginRight:"0px",marginBottom:"0px",marginLeft:"0px",display:"block"},true),r.saveAsInitial(),r.setCacheValue("flexbox",e.flexbox),n.children[o]=r,a.horizontal&&!e.hasWidth)e.setLayoutWidth("wrap_content");return{parent:r,renderAs:r,outputAs:this.application.renderNode(new Ta(i,r,t.FRAME,2048,r.children))}}}}}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=this.controller,{row:a,column:n,reverse:o,wrap:r,wrapReverse:s,alignContent:l,justifyContent:c,children:d}=t,h=e.hasPX("height",{percent:false})||e.percentHeight>0?e.linear.bottom:0,f=[],u=[],p=[];let g=0;if(r){let t;if(e.each(e=>{if(e.hasAlign(64)){const i=e.renderChildren.filter(e=>e.pageFlow);if(i.length>0){if(a)e.setLayoutWidth("match_parent"),f.push(i);else{if(e.setLayoutHeight("match_parent"),t){let i=t[0],a=1;while(a<t.length){const e=t[a++];if(e.linear.right>i.linear.right)i=e}e.constraint.horizontal=true}u.push(i),t=i}p.push(e)}}}),a)u.push(p);else{if(s){const t=u[0][0],i=t.linear.left-e.box.left;if(i>0)t.modifyBox(8,i);else p[0].anchorStyle("horizontal",0,"packed")}else{const t=u[u.length-1][0],i=e.box.right-t.linear.right;if(i>0)t.modifyBox(2,i);else p[0].anchorStyle("horizontal",0,"packed")}f.push(p)}}else if(a)f[0]=d;else u[0]=d;const m=(t,a)=>{const d=t.length;if(0===d)return;const{orientation:f,orientationInverse:u,WHL:m,HWL:b,LT:y,TL:S,RB:T,BR:w,LRTB:v,RLBT:E}=a?Ca:ka,[x,A]=a?[e.hasHeight,e.hasWidth]:[e.hasWidth,e.hasHeight],_=`layout_constraint${Ea(f)}_weight`;for(let R=0;R<d;++R){const I=t[R],N=I.length,C=I[0],k=I[N-1],L=I===p,P=!L&&I.every(e=>0===e.flexbox.grow),O=P&&("space-between"===c||"space-around"===c&&N>1),W=[];let D,B=0,M=0,H=0,G=true,X=null;if(C.anchor(y,"parent"),k.anchor(T,"parent"),L)if(D=false,A){let e="spread",t=0;switch(l){case"left":case"right":case"flex-end":t=1;case"baseline":case"start":case"end":case"flex-start":e="packed",G=false;break}C.anchorStyle(f,t,e)}else C.anchorStyle(f,0,"spread_inside",false);else if(D=a||A,M=1-La(e,I,m),N>1){let t=0,i=0;while(i<N){const e=I[i++],a=(e.data(this.name,"boundsData")||e.bounds)[b];if(0===t)B=a,++t;else if(a===B)++t;else if(a>B)B=a,t=1}if(t===N)B=NaN;if(a)H=View.availablePercent(I,"width",e.box.width)}for(let e=0;e<N;++e){const t=I[e],i=I[e-1],n=I[e+1];if(n)t.anchor(E,n.documentId);if(i)t.anchor(v,i.documentId);if(L){if(t.anchor(S,"parent"),G)if(A)Da(t,a,m,_,1);else t.anchor(w,"parent"),t.anchorStyle(u,o?1:0,"packed")}else{const o=Wa(t),c=t.innerMostWrapped.autoMargin;if(a){if(c.horizontal)if(o){if(o.mergeGravity("layout_gravity",c.leftRight?"center_horizontal":c.left?t.localizeString("right"):t.localizeString("left")),M>0)t.flexbox.basis="0%",W.push(t)}else if(!c.leftRight)if(c.left){if(i)t.anchorDelete(v)}else if(n)t.anchorDelete(E)}else if(c.vertical)if(o){if(o.mergeGravity("layout_gravity",c.topBottom?"center_vertical":c.top?"bottom":"top"),M>0)t.flexbox.basis="0%",W.push(t)}else if(!c.topBottom)if(c.top){if(i)t.anchorDelete(v)}else if(n)t.anchorDelete(E);switch(t.flexbox.alignSelf){case"first baseline":if("top"===S&&t.baselineElement){const e=I.find(e=>e!==t&&e.baselineElement);if(e){t.anchor("baseline",e.documentId);break}}case"start":case"flex-start":t.anchor(S,"parent");break;case"last baseline":if("bottom"===w&&t.baselineElement){if(xa(I,e=>{if(e!==t&&e.baselineElement)return t.anchor("baseline",e.documentId),true})===1/0)break}case"end":case"flex-end":t.anchor(w,"parent");break;case"baseline":if(a){if(!X)X=Pa(I);if(X)if(X!==t)t.anchor("baseline",X.documentId);else t.anchorParent(u,0)}break;case"center":if(t.anchorParent(u,.5),!a&&t.textElement)t.mergeGravity("gravity","center");break;default:{const i=Wa(t);switch(l){case"center":if(d%2==1&&R===Math.floor(d/2))t.anchorParent(u);else if(R<d/2)t.anchor(w,"parent");else if(R>=d/2)t.anchor(S,"parent");break;case"space-evenly":case"space-around":if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);break;case"space-between":if(O&&2===N)t.anchorDelete(0===e?E:v);if(0===R)if(i)i.mergeGravity("layout_gravity",s?w:S);else t.anchor(s?w:S,"parent");else if(d>2&&R<d-1)if(i)i.mergeGravity("layout_gravity",a?"center_vertical":"center_horizontal");else t.anchorParent(u);else if(i)i.mergeGravity("layout_gravity",s?S:w);else t.anchor(s?S:w,"parent");break;default:if(t.anchorParent(u),!o||!t.innerMostWrapped.autoMargin[u])t.anchorStyle(u,s?1:0);if(0===t[b])if(!a&&t.blockStatic)Oa(t,"match_parent",a);else if(isNaN(B))if(!a&&!r&&t.length>0||x&&"normal"===l)Oa(t,x?"0px":"match_parent",a);else Oa(t,"wrap_content",a);else if(1===N)if(!a)Oa(t,x?"0px":"match_parent",a);else Oa(t,"wrap_content",a);else if((t.naturalElement?(t.data(this.name,"boundsData")||t.bounds)[b]:1/0)<B){if(Oa(t,t.flexElement&&t.css("flexDirection").startsWith(a?"row":"column")?"match_parent":"0px",a),o&&!o.autoMargin[f])Oa(o,"match_parent",a)}else if(x)Oa(t,"0px",a);else Oa(t,"wrap_content",a),t.lockAttr("android","layout_"+b);break}break}}if(H=View.setFlexDimension(t,m,H),!t.innerMostWrapped.has("flexGrow"))D=false;if(h>0&&R===d-1){if(t.linear.bottom-h>0)g=Math.max(t.linear.bottom-h,g);t.setBox(4,{reset:1})}}t.anchored=true,t.positioned=true}if(!L){if(D){let e=0;while(e<N){const t=I[e++];Da(t,a,m,_,t.flexbox.grow)}}else if(M>0){const e=W.length;let t=0;while(t<e){const e=W[t++],i=e.innerMostWrapped.autoMargin;let n=1;if(a){if(i.leftRight)n=2}else if(i.topBottom)n=2;Da(e,a,m,_,Math.max(e.flexbox.grow,M*n/W.length))}}if(g>0)e.modifyBox(4,g);if(a||n){let t=false;if(P)switch(c){case"normal":if(n){C.anchorStyle(f,o?1:0,"packed");continue}break;case"left":if(!a)break;case"start":case"flex-start":C.anchorStyle(f,o?1:0,"packed");continue;case"center":if(N>1){C.anchorStyle(f,.5,"packed");continue}t=true;break;case"right":if(!a)break;case"end":case"flex-end":C.anchorStyle(f,1,"packed");continue;case"space-between":if(1===N){k.anchorDelete(T);continue}break;case"space-evenly":if(N>1){C.anchorStyle(f,0,"spread");continue}t=true;break;case"space-around":if(N>1){C.constraint[f]=false,k.constraint[f]=false,i.addGuideline(C,e,{orientation:f,percent:true}),i.addGuideline(k,e,{orientation:f,percent:true,opposing:true}),C.anchorStyle(f,0,"spread_inside");continue}t=true;break}if(O||!r&&I.some(e=>""!==e.app(_))&&!Aa(I,e=>e.app(_)))C.anchorStyle(f,0,"spread_inside",false);else if(!t)C.anchorStyle(f,o?1:0,"packed",false)}}}};m(f,true),m(u,false)}}}var Ma=squared.base.LayoutUI;const{formatPX:Ha}=squared.lib.css,{withinRange:Ga}=squared.lib.util,{BOX_STANDARD:Xa,NODE_ALIGNMENT:Va}=squared.base.lib.enumeration;class Grid extends squared.base.extensions.Grid{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"columnCount");if(a)return{output:this.application.renderNode(Ma.create({parent:i,node:e,containerType:t.GRID,alignmentType:128,children:e.children,columnCount:a})),include:true,complete:true}}processChild(e,t){var i;const a=e.data(this.name,"cellData");if(a){const n=null===(i=a.siblings)||void 0===i?void 0:i.slice(0);let o;if(n){const i=this.controller,a=Grid.createDataCellAttribute();n.unshift(e),o=i.processLayoutHorizontal(new Ma(t,i.createNodeGroup(e,n,t,{delegate:true,cascade:true}),0,0,n)),e=o.node;let r=0;while(r<n.length){const e=n[r++],t=e.data(this.name,"cellData");if(t){if(t.cellStart)a.cellStart=true;if(t.cellEnd)a.cellEnd=true;if(t.rowEnd)a.rowEnd=true;if(t.rowStart)a.rowStart=true;e.data(this.name,"cellData",null)}}e.data(this.name,"cellData",a)}if(a.rowSpan>1)e.android("layout_rowSpan",a.rowSpan.toString());if(a.columnSpan>1)e.android("layout_columnSpan",a.columnSpan.toString());if("table-cell"===e.display)e.mergeGravity("layout_gravity","fill");if(o)return{parent:o.node,renderAs:o.node,outputAs:this.application.renderNode(o)}}}postConstraints(e){if("collapse"!==e.css("borderCollapse")){const t=e.data(this.name,"columnCount");if(t){let i=0,a=0,n=0,o=0;e.renderEach(r=>{const s=r.data(this.name,"cellData");if(s){const l=r.actualParent;if(false===(null==l?void 0:l.visible)){const c=0===l.getBox(1)[0]?l.marginTop:0,d=0===l.getBox(4)[0]?l.marginBottom:0;if(s.cellStart)i=c+l.paddingTop;if(s.rowStart)o=Math.max(l.marginLeft+l.paddingLeft,o);if(s.rowEnd){const i=d+l.paddingBottom+(s.cellEnd?0:c+l.paddingTop);if(i>0)if(s.cellEnd)n=i;else{const a=this.controller;a.addAfterOutsideTemplate(r.id,a.renderSpace({width:"match_parent",height:"@dimen/"+Resource.insertStoredAsset("dimens",e.controlId+"_grid_space",Ha(i)),columnSpan:t,android:{}}),false)}a=Math.max(l.marginRight+l.paddingRight,a)}}}}),e.modifyBox(16,i),e.modifyBox(32,a),e.modifyBox(64,n),e.modifyBox(128,o)}}if(!e.hasWidth){let t=-1/0;if(e.renderEach(e=>{if(e.inlineFlow||!e.blockStatic)t=Math.max(t,e.linear.right)}),Ga(e.box.right,t))e.setLayoutWidth("wrap_content")}}}var za=squared.base.LayoutUI;const{formatPX:Fa,getBackgroundPosition:Ua,isPercent:qa}=squared.lib.css,{convertInt:Ya}=squared.lib.util,{BOX_STANDARD:ja,NODE_ALIGNMENT:$a,NODE_TEMPLATE:Ka}=squared.base.lib.enumeration;class List extends squared.base.extensions.List{processNode(e,i){const a=new za(i,e,0,0,e.children);if(!a.unknownAligned||a.singleRowAligned){if(super.processNode(e,i),a.linearY)a.rowCount=e.length,a.columnCount=e.some(e=>"inside"===e.css("listStylePosition"))?3:2,a.setContainerType(t.GRID,8);else if(a.linearX||a.singleRowAligned)a.rowCount=1,a.columnCount=a.length,a.setContainerType(t.LINEAR,4);else return;return{output:this.application.renderNode(a),complete:true,include:true}}}processChild(e,i){const a=e.data(this.name,"mainData");if(a){const o=this.application,r=this.controller,s=i.firstStaticChild===e,l=e.marginTop;let c,d,h=a.ordinal||"",f=e.marginLeft,u=0,p=0,g=false,m=NaN,b=false;if(e.setBox(8,{reset:1}),i.layoutGrid)p=Ya(i.android("columnCount"))||1,g=true;else if(s)g=true;if(g)if(i.paddingLeft>0)f+=i.paddingLeft;else f+=i.marginLeft;if(0===e.length&&!e.outerWrapper)c=r.createNodeWrapper(e,i),b=true;else c=e.outerMostWrapper;if(c!==e)e.resetBox(5,c);if(""===h)d=e.find(e=>"left"===e.float&&e.marginLeft<0&&Math.abs(e.marginLeft)<=e.documentParent.marginLeft);if(d){if(3===p)e.android("layout_columnSpan","2");if(!d.hasWidth)if(f+=d.marginLeft,f>0)d.android("minWidth",Fa(f));d.parent=i,d.setControlType(n.TEXT,t.INLINE),d.setBox(8,{reset:1}),d.render(i);const a=new za(i,d);if(d.inlineText||0===d.length)a.setContainerType(t.TEXT);else if(a.retainAs(d.children),a.singleRowAligned)a.setContainerType(t.RELATIVE,4);else a.setContainerType(t.CONSTRAINT,1);const r=o.renderNode(a);if(r)o.addLayoutTemplate(i,d,r);else return}else{let r,s=0,l=0,b=0,y="right";if(""!==a.imageSrc){const t=this.resource;if(a.imagePosition){if(({top:s,left:l}=Ua(a.imagePosition,e.actualDimension,{fontSize:e.fontSize,imageDimension:t.getImage(a.imageSrc),screenDimension:e.localSettings.screenDimension})),e.marginLeft<0)m=e.marginLeft+(i.paddingLeft>0?i.paddingLeft:i.marginLeft);else g=false,u=e.marginLeft;f=e.paddingLeft-l,e.setBox(128,{reset:1}),y=""}r=t.addImageSrc(a.imageSrc)}const S=$();if(d=o.createNode(e.sessionId,{parent:i}),d.childIndex=e.childIndex,d.containerName=e.containerName+"_ORDINAL",d.inherit(e,"textStyle"),""!==h&&!h.endsWith("."))d.setCacheValue("fontSize",.75*d.fontSize);if("right"===y)if(r)b=Math.max(f/6,4),f-=b;else if(""!==h)h+="&#160;".repeat(1===h.length?3:2);if(3===p)c.android("layout_columnSpan","2");if("DT"===e.tagName&&!r)c.android("layout_columnSpan",p.toString());else{if(r)d.setControlType(n.IMAGE,t.IMAGE),Object.assign(S.android,{src:"@drawable/"+r,scaleType:"right"===y?"fitEnd":"fitStart",baselineAlignBottom:g?"true":""});else if(""!==h){if(d.textContent=h,d.inlineText=true,d.setControlType(n.TEXT,t.TEXT),"DFN"===e.tagName)f+=8,d.modifyBox(32,8)}else d.setControlType(n.SPACE,t.SPACE),d.renderExclude=false,e.setBox(128,{reset:1});const{paddingTop:a,lineHeight:c}=e;if(d.cssApply({minWidth:f>0?Fa(f):"",marginLeft:u>0?Fa(u):"",paddingTop:a>0&&0===e.getBox(16)[0]?Fa(a):"",paddingRight:b>0?Fa(b):"",lineHeight:c>0?Fa(c):""}),d.apply(S),d.modifyBox(128,2),d.cssTry("display","block"))d.setBounds(),d.cssFinally("display");if(d.saveAsInitial(),""!==y)d.mergeGravity("gravity",e.localizeString(y));if(0!==s)d.modifyBox(1,s);if(0!==l)d.modifyBox(8,l);d.render(i),o.addLayoutTemplate(i,d,{type:1,node:d,controlName:d.controlName})}}if(0!==l)d.modifyBox(1,l),d.companion=c,this.subscribers.add(d);if(d.positioned=true,g){if(isNaN(m)||m<=0)i.setBox(i.paddingLeft>0?128:8,{reset:1});if(m<0)i.modifyBox(8,m)}if(p>0&&0===e.ascend({condition:e=>!e.blockStatic&&!e.hasWidth,error:e=>e.hasWidth,startSelf:e.naturalElement}).length)c.setLayoutWidth("0px"),c.android("layout_columnWeight","1");if(b)return{parent:c,renderAs:c,outputAs:o.renderNode(new za(i,c,e.baselineElement&&0===e.percentWidth&&!qa(e.css("maxWidth"))?t.LINEAR:t.CONSTRAINT,9,c.children)),subscribe:true}}}postConstraints(e){const t=!e.naturalChild&&e.companion;if(t){const[i,a]=t.getBox(1);if(0===i)e.modifyBox(1,a-e.getBox(1)[1],false);else e.setBox(1,{adjustment:0})}}}const{BOX_STANDARD:Za}=squared.base.lib.enumeration;class Relative extends squared.base.extensions.Relative{is(e){if(e.inlineStatic||e.imageOrSvgElement)switch(e.verticalAlign){case"sub":case"super":return true}return super.is(e)}postOptimize(e){if(!e.baselineAltered)switch(e.verticalAlign){case"sub":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(4,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.subscriptBottomOffset));break;case"super":if(!e.outerMostWrapper.renderParent.layoutHorizontal)e.modifyBox(1,-1*Math.floor(e.baselineHeight*this.controller.localSettings.deviations.superscriptTopOffset));break}super.postOptimize(e)}}var Ja=squared.base.LayoutUI;const{formatPX:Qa}=squared.lib.css,{APP_SECTION:en,BOX_STANDARD:tn,NODE_ALIGNMENT:an,NODE_PROCEDURE:nn,NODE_RESOURCE:on}=squared.base.lib.enumeration;class Sprite extends squared.base.extensions.Sprite{processNode(e,i){const a=e.data(this.name,"mainData");if(a){const o=this.resource.addImageSrc(e.backgroundImage);if(""!==o){const r=this.application.createNode(e.sessionId,{parent:i,innerWrap:e});return r.inherit(e,"base","initial","styleMap"),r.setControlType(n.FRAME,t.FRAME),r.exclude({resource:on.ASSET,procedure:nn.CUSTOMIZATION,section:en.ALL}),e.setControlType(n.IMAGE,t.IMAGE),e.resetBox(15),e.resetBox(240),e.registerBox(1,r),e.registerBox(2,r),e.registerBox(4,r),e.registerBox(8,r),e.exclude({resource:on.FONT_STYLE|on.BOX_STYLE|on.BOX_SPACING}),e.cssApply({position:"static",top:"auto",right:"auto",bottom:"auto",left:"auto",display:"inline-block",width:a.image.width>0?Qa(a.image.width):"auto",height:a.image.height>0?Qa(a.image.height):"auto",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRadius:"0px",backgroundPositionX:"0px",backgroundPositionY:"0px",backgroundColor:"transparent"}),e.unsetCache(),e.android("src","@drawable/"+o),e.android("layout_marginTop",Qa(a.position.top)),e.android(e.localizeString("layout_marginLeft"),Qa(a.position.left)),{renderAs:r,outputAs:this.application.renderNode(new Ja(i,r,t.FRAME,2048,r.children)),parent:r,complete:true}}}}}const{convertCamelCase:rn}=squared.lib.util,{NODE_ALIGNMENT:sn,NODE_TEMPLATE:ln}=squared.base.lib.enumeration;class Substitute extends squared.base.ExtensionUI{constructor(e,t,i,n){super(e,t,i,n),this.require(a.EXTERNAL,true)}processNode(e,i){const a=Y(e.dataset,rn(this.name,"."));if(a){const n=a.tag;if(n){e.setControlType(n,e.blockStatic?t.BLOCK:t.INLINE),e.render(i);const o=a.tagChild;if(o){const t=this.name;e.addAlign(2),e.each(e=>{if(e.styleElement)if(e.pseudoElement&&e.textEmpty)e.hide({remove:true});else e.use=t,e.dataset.androidSubstituteTag=o})}return{output:{type:1,node:e,controlName:n},include:true}}}}postOptimize(e){e.apply(Resource.formatOptions($(this.options[e.elementId]),this.application.extensionManager.optionValueAsBoolean(a.RESOURCE_STRINGS,"numberResourceValue")))}}var cn=squared.base.LayoutUI;const{CSS_UNIT:dn,formatPX:hn}=squared.lib.css,{convertFloat:fn,convertInt:un,trimEnd:pn}=squared.lib.util,{NODE_ALIGNMENT:gn}=squared.base.lib.enumeration;function mn(e){if(e.hasPX("height")&&e.height+e.contentBoxHeight<Math.floor(e.bounds.height)&&"top"!==e.css("verticalAlign"))e.setLayoutHeight("wrap_content")}class Table extends squared.base.extensions.Table{processNode(e,i){super.processNode(e,i);const a=e.data(this.name,"mainData");let n=false;if(a.columnCount>1)n=a.expand,e.each(e=>{const t=e.data(this.name,"cellData");if(t)if(t.flexible)e.android("layout_columnWeight",t.colSpan.toString()),e.setLayoutWidth("0px"),n=true;else{if(false===t.expand)e.android("layout_columnWeight","0");else if(t.percent){const i=fn(t.percent)/100;if(i>0)e.setLayoutWidth("0px"),e.android("layout_columnWeight",pn(i.toPrecision(3),"0")),n=true}if(t.downsized)if(t.exceed)e.setLayoutWidth("0px"),e.android("layout_columnWeight","0.01"),n=true;else if(e.hasPX("width")){const t=e.bounds.width;if(e.actualWidth<t)e.setLayoutWidth(hn(t))}}if("TD"===e.tagName)e.setSingleLine(true);mn(e)});else e.each(e=>{if(e.has("width",{type:2}))e.setLayoutWidth("wrap_content"),n=true;mn(e)});if(e.hasWidth){if(e.width<Math.floor(e.bounds.width))if(a.layoutFixed)e.android("width",hn(e.bounds.width));else{if(!e.hasPX("minWidth"))e.android("minWidth",hn(e.actualWidth));e.css("width","auto")}}else if(n)if((i.blockStatic||i.hasPX("width"))&&Math.ceil(e.bounds.width)>=i.box.width)e.setLayoutWidth("match_parent");else e.css("width",hn(e.actualWidth));if(e.hasHeight&&e.height<Math.floor(e.bounds.height)){if(!e.hasPX("minHeight"))e.android("minHeight",hn(e.actualHeight));e.css("height","auto")}return{output:this.application.renderNode(cn.create({parent:i,node:e,containerType:t.GRID,alignmentType:2,children:e.children,rowCount:a.rowCount,columnCount:a.columnCount})),include:true,complete:true}}processChild(e,t){const i=e.data(this.name,"cellData");if(i){if(i.rowSpan>1)e.android("layout_rowSpan",i.rowSpan.toString());if(i.colSpan>1)e.android("layout_columnSpan",i.colSpan.toString());if(i.spaceSpan){const t=this.controller;t.addAfterOutsideTemplate(e.id,t.renderSpace({width:"wrap_content",height:"wrap_content",columnSpan:i.spaceSpan,android:{}}),false)}if(e.mergeGravity("layout_gravity","fill"),"hide"===t.css("emptyCells")&&e.textEmpty)e.hide({hidden:true})}}postOptimize(e){const t=un(e.layoutWidth);if(t>0){const i=e.bounds.width;if(i>t)e.setLayoutWidth(hn(i));if("auto"===e.cssInitial("width")&&e.renderChildren.every(e=>e.inlineWidth))e.renderEach(e=>{e.setLayoutWidth("0px"),e.android("layout_columnWeight","1")})}}}var bn=squared.base.LayoutUI;const{NODE_ALIGNMENT:yn}=squared.base.lib.enumeration;class VerticalAlign extends squared.base.extensions.VerticalAlign{processNode(e,i){return super.processNode(e,i),{output:this.application.renderNode(new bn(i,e,t.RELATIVE,4,e.children)),subscribe:true}}}class WhiteSpace extends squared.base.extensions.WhiteSpace{constructor(){super(...arguments),this.eventOnly=true}}var Sn=squared.base.LayoutUI;const{formatPX:Tn}=squared.lib.css,{hypotenuse:wn}=squared.lib.math,{withinRange:vn}=squared.lib.util,{NODE_ALIGNMENT:En}=squared.base.lib.enumeration;class Guideline extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={circlePosition:false}}is(e){return this.included(e.element)}condition(e){return e.length>0}processNode(e,i){return{output:this.application.renderNode(new Sn(i,e,t.CONSTRAINT,16,e.children))}}postBaseLayout(e){const t=this.controller,i=this.options.circlePosition,{left:a,top:n}=e.box;let o;if(e.each(e=>{const t=e.linear;if(vn(t.left,a))e.anchorParent("horizontal",0);if(vn(t.top,n))e.anchorParent("vertical",0);if(i)if(e.anchored)o=e;else if(o){if(e.constraint.vertical&&!o.constraint.vertical)o=e}else if(e.constraint.vertical)o=e;else if(e.constraint.horizontal)o=e;e.positioned=true}),i){if(!o)o=e.item(0);if(!o.anchored)t.addGuideline(o,e);const{x:i,y:a}=o.center;e.each(e=>{if(e!==o){const{x:t,y:n}=e.center,r=Math.abs(t-i),s=Math.abs(n-a),l=Math.round(wn(r,s));let c=Math.round(Math.atan(Math.min(r,s)/Math.max(r,s))*(180/Math.PI));if(n>a)if(t>i)if(r>s)c+=90;else c=180-c;else if(r>s)c=270-c;else c+=180;else if(n<a){if(i>t)if(r>s)c+=270;else c=360-c;else if(r>s)c=90-c}else c=t>i?90:270;e.app("layout_constraintCircle",o.documentId),e.app("layout_constraintCircleRadius",Tn(l)),e.app("layout_constraintCircleAngle",c.toString())}})}else e.each(i=>{if(!i.anchored)t.addGuideline(i,e)})}}var xn=squared.base.LayoutUI;const{CSS_UNIT:An,isLength:_n}=squared.lib.css,{BOX_STANDARD:Rn,NODE_ALIGNMENT:In,NODE_RESOURCE:Nn,NODE_TEMPLATE:Cn}=squared.base.lib.enumeration,kn=squared.base.extensions.CssGrid,Ln=e=>!e.blockStatic&&!e.hasPX("width")||e.has("width",{type:3,not:"100%"})&&"100%"!==e.css("minWidth")||e.has("maxWidth",{type:3,not:"100%"}),Pn=e=>"100%"===e.css("height")||"100%"===e.css("minHeight"),On=e=>e.marginTop>0||e.marginRight>0||e.marginBottom>0||e.marginLeft>0,Wn=(e,t)=>t.visibleStyle.background&&(Ln(e)||!Pn(t)||!Pn(e)),Dn=e=>"HTML"===e.tagName&&(e.contentBoxWidth>0||e.contentBoxHeight>0||On(e)),Bn=(e,t,i,a,n,o,r)=>i&&a&&(!o&&e.has("backgroundPositionY")||r&&(!n||!o)&&(Ln(e)||!Pn(t)||!Pn(e))||"fixed"===e.css("backgroundAttachment"));class Background extends squared.base.ExtensionUI{is(e){return e.documentBody}condition(e,t){const{backgroundColor:i,backgroundImage:a,backgroundRepeatX:n,backgroundRepeatY:o,borderWidth:r}=e.visibleStyle;return((e,t,i,a,n)=>(i||a)&&!Wn(e,t)&&(n||e.gridElement&&(kn.isJustified(e)||kn.isAligned(e))))(e,t,i,a,r)||Bn(e,t,i,a,n,o,r)||a&&On(e)||Dn(t)}processNode(e,i){const a=this.controller,{backgroundColor:n,backgroundImage:o,visibleStyle:r}=e,s=Bn(e,i,r.backgroundColor,r.backgroundImage,r.backgroundRepeatX,r.backgroundRepeatY,r.borderWidth),l=e.hasHeight||true===e.actualParent.hasHeight,c=Wn(e,i),d="fixed"===e.css("backgroundAttachment");let h,f,u=i;if(""!==n){if(!(r.backgroundImage&&r.backgroundRepeatX&&r.backgroundRepeatY)||/\.(gif|png)"?\)$/i.test(o)){if(h=a.createNodeWrapper(e,u,{resource:Nn.BOX_SPACING|Nn.FONT_STYLE|Nn.VALUE_STRING}),h.css("backgroundColor",n),h.setCacheValue("backgroundColor",n),!c)h.setLayoutWidth("match_parent"),h.setLayoutHeight("match_parent");else if(!Ln(e))h.setLayoutWidth("match_parent");h.unsetCache("visibleStyle")}e.css("backgroundColor","transparent"),e.setCacheValue("backgroundColor",""),r.backgroundColor=false}if(""!==o&&(c||s||r.backgroundRepeatY||i.visibleStyle.background||On(e))){if(h){if(s||d)h.setControlType(View.getControlName(t.CONSTRAINT,e.api),t.CONSTRAINT),h.addAlign(8),h.render(u),this.application.addLayoutTemplate(u,h,{type:1,node:h,controlName:h.controlName}),f=h,u=h,h=a.createNodeWrapper(e,f,{resource:Nn.BOX_SPACING})}else h=a.createNodeWrapper(e,u,{resource:Nn.BOX_SPACING|Nn.FONT_STYLE|Nn.VALUE_STRING});h.setLayoutWidth("match_parent");const n=i.cssInitial("height"),p=i.cssInitial("minHeight");let g=e.css("backgroundSize");if(""===n&&""===p)h.setLayoutHeight(!c&&(d||!(s&&l)&&(r.backgroundRepeatY||e.has("backgroundSize")||e.css("backgroundPosition").split(" ").some(e=>_n(e)&&parseInt(e)>0)))?"match_parent":"wrap_content");else{if("100%"!==n&&"100%"!==p){const e=i.toElementInt("offsetHeight");if(e<window.innerHeight)g=`auto ${e}px`}h.setLayoutHeight("match_parent")}if(h.cssApply({backgroundImage:o,backgroundSize:g,border:"0px none solid",borderRadius:"0px"}),h.cssApply(e.cssAsObject("backgroundRepeat","backgroundPositionX","backgroundPositionY","backgroundClip")),h.setCacheValue("backgroundImage",o),h.unsetCache("visibleStyle"),d)h.android("scrollbars","vertical");e.css("backgroundImage","none"),e.setCacheValue("backgroundImage",""),r.backgroundImage=false,r.backgroundRepeatX=false,r.backgroundRepeatY=false}if(Dn(i)){if(!h)h=a.createNodeWrapper(e,u);h.unsafe("excludeResource",Nn.FONT_STYLE|Nn.VALUE_STRING),i.resetBox(15,h),i.resetBox(240,h),h.setLayoutWidth("match_parent",false),h.setLayoutHeight("wrap_content",false)}if(h)return r.background=r.borderWidth||r.backgroundImage||r.backgroundColor,{parent:h,parentAs:f,renderAs:h,outputAs:this.application.renderNode(new xn(f||i,h,t.CONSTRAINT,8,h.children)),remove:true};else return{remove:true}}}var Mn=squared.base.LayoutUI;const{NODE_ALIGNMENT:Hn}=squared.base.lib.enumeration;class MaxWidthHeight extends squared.base.ExtensionUI{is(e){return!e.support.maxDimension&&!e.inputElement&&!e.controlElement}condition(e,t){const i=e.hasPX("maxWidth")&&!t.layoutConstraint&&!t.layoutElement&&(t.layoutVertical||t.layoutFrame||e.blockStatic||e.onlyChild&&(t.blockStatic||t.hasWidth)),a=e.hasPX("maxHeight")&&(t.hasHeight||t.gridElement||t.tableElement);if(i||a)return e.data(this.name,"mainData",{maxWidth:i,maxHeight:a}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){const n=this.controller.createNodeWrapper(e,i,{containerType:t.CONSTRAINT,alignmentType:32,resetMargin:true});if(a.maxWidth)if(e.setLayoutWidth("0px"),n.setLayoutWidth("match_parent"),i.layoutElement){const t=e.autoMargin;t.horizontal=false,t.left=false,t.right=false,t.leftRight=false}if(a.maxHeight)if(e.setLayoutHeight("0px"),n.setLayoutHeight("match_parent"),i.layoutElement){const t=e.autoMargin;if(t.vertical=false,t.top=false,t.bottom=false,t.topBottom=false,!a.maxHeight&&e.blockStatic&&!e.hasWidth)e.setLayoutWidth("match_parent",false)}return{parent:n,renderAs:n,outputAs:this.application.renderNode(new Mn(i,n,n.containerType,2048,n.children))}}}}var Gn=squared.base.LayoutUI;const{BOX_STANDARD:Xn,NODE_ALIGNMENT:Vn}=squared.base.lib.enumeration;function zn(e,t){if(e.pageFlow)return e===t.firstStaticChild&&e.inlineFlow&&!e.centerAligned&&!e.rightAligned&&e.marginLeft<0&&Math.abs(e.marginLeft)<=t.marginLeft+t.paddingLeft&&!t.some(e=>e.multiline);else return e.leftTopAxis&&(e.left<0||!e.hasPX("left")&&e.right<0)}class NegativeX extends squared.base.ExtensionUI{is(e){return e.length>0&&!e.rootElement&&"hidden"!==e.css("overflowX")}condition(e){return e.some(t=>zn(t,e))}processNode(e,i){const a=e.children.filter(t=>zn(t,e)),n=this.controller.createNodeWrapper(e,i,{children:a,containerType:t.CONSTRAINT});let o,r=NaN,s=NaN;e.resetBox(5,n);const l=a.length;let c=0;while(c<l){const e=a[c++],t=e.linear;if(e.pageFlow){if(isNaN(r)||t.left<r)r=t.left;o=e}else if(e.hasPX("left")){if(e.left<0&&(isNaN(r)||t.left<r))r=t.left}else if(e.right<0&&(isNaN(s)||t.right>s))s=t.right}if(!e.pageFlow){if(!isNaN(r)&&!e.has("left")){const t=e.linear.left-r;if(t>0)e.modifyBox(8,t)}if(!isNaN(s)&&!e.has("right")){const t=s-e.linear.right;if(t>0)e.modifyBox(2,t)}}else if(e.hasPX("width",{percent:false}))n.setLayoutWidth("wrap_content");else if(e.hasPX("width"))n.css("width",e.css("width"),true),e.setLayoutWidth("0px");return e.data(this.name,"mainData",{container:n,children:a,offsetLeft:e.marginLeft+e.paddingLeft,firstChild:o}),{parent:n,renderAs:n,outputAs:this.application.renderNode(new Gn(i,n,n.containerType,2052,n.children)),subscribe:true}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){let i=t.firstChild;if(i)i=i.ascend({excluding:e,attr:"outerWrapper"}).pop()||i,i.anchor("left","parent"),i.anchorStyle("horizontal",0),i.anchorParent("vertical",0),i.modifyBox(8,t.offsetLeft),View.setConstraintDimension(i),i.positioned=true;const a=t.children,n=a.length;let o=0;while(o<n){const t=a[o++];if(t!==i)if(t.hasPX("left"))t.translateX(t.left),t.alignSibling("left",e.documentId),t.constraint.horizontal=true;else if(t.hasPX("right"))t.translateX(-t.right),t.alignSibling("right",e.documentId),t.constraint.horizontal=true}e.anchorParent("horizontal",0),e.anchorParent("vertical",0),View.setConstraintDimension(e),e.positioned=true}}beforeCascade(){for(const e of this.subscribers){const t=e.data(this.name,"mainData");if(t){const i=e.android("translationX"),a=e.android("translationY");if(""!==i||""!==a){const e=parseInt(i),n=parseInt(a),o=t.children,r=o.length;let s=0;while(s<r){const t=o[s++];if(!isNaN(e))t.translateX(e);if(!isNaN(n))t.translateY(n)}}}}}}var Fn=squared.base.LayoutUI;const{BOX_STANDARD:Un,NODE_ALIGNMENT:qn}=squared.base.lib.enumeration,Yn=(e,t)=>t.marginLeft<0&&(e.rootElement||t.linear.left<Math.floor(e.box.left)),jn=(e,t)=>t.marginTop<0&&(e.rootElement||t.linear.top<Math.floor(e.box.top));class PositiveX extends squared.base.ExtensionUI{is(e){return e.length>0}condition(e){var t,i;const{documentBody:a,lastStaticChild:n}=e;let o=e.contentBoxWidth>0||e.contentBoxHeight>0||0!==e.marginTop||0!==e.marginRight||0!==e.marginBottom||0!==e.marginLeft,r=false,s=false;if(null===(t=e.firstStaticChild)||void 0===t?void 0:t.lineBreak)o=true,r=true;if((null==n?void 0:n.lineBreak)&&(null===(i=n.previousSibling)||void 0===i?void 0:i.blockStatic))o=true,s=true;if(!a&&!o)return false;const l=e.rootElement,c=a&&e.positionStatic,d=e.paddingTop+(a?e.marginTop:0),h=e.paddingRight+(a?e.marginRight:0),f=e.paddingBottom+(a?e.marginBottom:0),u=e.paddingLeft+(a?e.marginLeft:0),p=new Set;let g=false,m=false;if(e.each(t=>{const i=l&&"fixed"===t.css("position");if(t.pageFlow||!o&&!i)return;const n=i&&t.autoPosition;if(t.hasPX("left")||n)if(a&&("100%"===t.css("width")||"100%"===t.css("minWidth"))){if(u>0||h>0)p.add(t);g=true}else{const i=t.left;if((i>=0||l)&&i<u)p.add(t);else if(i<0&&e.marginLeft>0)p.add(t);else if(!t.hasPX("right")&&Yn(e,t))p.add(t)}else if(t.hasPX("right"))if(c)p.add(t),g=true;else{const i=t.right;if((i>=0||l)&&i<h)p.add(t);else if(i<0&&e.marginRight>0)p.add(t);else if(((e,t)=>t.marginRight<0&&(e.rootElement||t.linear.right>Math.ceil(e.box.right)))(e,t))p.add(t)}else if(Yn(e,t))p.add(t);if(t.hasPX("top")||n)if(a&&("100%"===t.css("height")||"100%"===t.css("minHeight"))){if(d>0||f>0)p.add(t);m=true}else{const i=t.top;if((i>=0||l)&&(i<d||r))p.add(t);else if(i<0&&e.marginTop>0)p.add(t);else if(!t.hasPX("bottom")&&jn(e,t))p.add(t)}else if(t.hasPX("bottom"))if(c)p.add(t),m=true;else{const i=t.bottom;if((i>=0||l)&&(i<f||s))p.add(t);else if(i<0&&e.marginBottom>0)p.add(t);else if(((e,t)=>t.marginBottom<0&&(e.rootElement||t.linear.bottom>Math.ceil(e.box.bottom)))(e,t))p.add(t)}else if(jn(e,t))p.add(t)}),p.size>0||g||m)return e.data(this.name,"mainData",{children:Array.from(p),right:g,bottom:m}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){const n=a.children;let o;if(n.length>0)o=this.controller.createNodeWrapper(e,i,{children:n,resetMargin:!e.rootElement&&!e.pageFlow||i.layoutGrid,cascade:true,inheritDataset:true});if(e.documentBody){if(a.right)(o||e).setLayoutWidth("match_parent");if(a.bottom)(o||e).setLayoutHeight("match_parent")}else if(!e.pageFlow){if(!e.hasPX("width")&&e.hasPX("left")&&e.hasPX("right"))e.setLayoutWidth("match_parent");if(!e.hasPX("height")&&e.hasPX("top")&&e.hasPX("bottom"))e.setLayoutHeight("match_parent")}if(o)return{parent:o,renderAs:o,outputAs:this.application.renderNode(new Fn(i,o,t.CONSTRAINT,16,o.children)),subscribe:true}}}postBaseLayout(e){const t=e.data(this.name,"mainData");if(t){const i=e.documentId,a=t.children,n=a.length;let o=0;while(o<n){const t=a[o++],n=!t.pageFlow&&(t.absoluteParent!==t.documentParent||"fixed"===t.css("position")||e.documentBody),r=t.outerMostWrapper;if(t.hasPX("left")){if(!n)t.translateX(t.left),t.alignSibling("left",i),t.constraint.horizontal=true;r.modifyBox(8,e.borderLeftWidth)}if(t.hasPX("right")){if(!n){if(t.translateX(-t.right),e.rootElement)t.anchor("right","parent");else t.alignSibling("right",i);t.constraint.horizontal=true}r.modifyBox(2,e.borderRightWidth)}else if(t.marginLeft<0&&Yn(e,t))r.alignSibling("left",i),r.translateX(t.linear.left-e.bounds.left),r.modifyBox(8,e.borderLeftWidth),r.constraint.horizontal=true,t.setBox(8,{reset:1});if(t.hasPX("top")){if(!n)t.translateY(t.top),t.alignSibling("top",i),t.constraint.vertical=true;r.modifyBox(1,e.borderTopWidth)}if(t.hasPX("bottom")){if(!n){if(t.translateY(-t.bottom),e.rootElement)t.anchor("bottom","parent");else t.alignSibling("bottom",i);t.constraint.vertical=true}r.modifyBox(4,e.borderBottomWidth)}else if(t.marginTop<0&&jn(e,t))r.alignSibling("top",i),r.translateY(t.linear.top-e.bounds.top),r.modifyBox(1,e.borderTopWidth),r.constraint.vertical=true,t.setBox(1,{reset:1})}}}}var $n=squared.base.LayoutUI;const{CSS_UNIT:Kn,formatPX:Zn,isPercent:Jn}=squared.lib.css,{truncate:Qn}=squared.lib.math,{BOX_STANDARD:eo,NODE_ALIGNMENT:to}=squared.base.lib.enumeration;const io=e=>Jn(e)&&parseFloat(e)>0;class Percent extends squared.base.ExtensionUI{is(e){return!e.actualParent.layoutElement&&!e.display.startsWith("table")}condition(e,t){const i=e.absoluteParent||t,a=!i.hasPX("width",{percent:false}),n=!i.hasPX("height",{percent:false}),o=a&&function(e){const t=e.percentWidth;return t>0&&t<1||Jn(e.css("maxWidth"))}(e)&&!t.layoutConstraint&&("100%"!==e.cssInitial("width")||e.has("maxWidth",{type:2,not:"100%"}))&&(e.rootElement||(t.layoutVertical||e.onlyChild)&&(t.blockStatic||t.percentWidth>0)),r=a&&function(e,t,i){return(io(e.css("marginLeft"))||io(e.css("marginRight")))&&(t.layoutVertical&&!t.hasAlign(1)||t.layoutFrame||e.blockStatic&&e.alignedVertically(void 0,i)||1===e.documentParent.length||!e.pageFlow)}(e,t,this.application.clearMap),s=n&&function(e,t){const i=e.percentHeight;return i>0&&i<1||Jn(e.css("maxHeight"))&&t.hasHeight}(e,t)&&("100%"!==e.cssInitial("height")||e.has("maxHeight",{type:2,not:"100%"}))&&(e.rootElement||t.percentHeight>0),l=n&&(e=>(io(e.css("marginTop"))||io(e.css("marginBottom")))&&e.documentParent.percentHeight>0&&!e.inlineStatic&&(1===e.documentParent.length||!e.pageFlow))(e);if(o||s||r||l)return e.data(this.name,"mainData",{percentWidth:o,percentHeight:s,marginHorizontal:r,marginVertical:l}),true;else return false}processNode(e,i){const a=e.data(this.name,"mainData");if(a){let n;if(!i.layoutConstraint||a.percentHeight)n=this.controller.createNodeWrapper(e,i,{resetMargin:true});const o=n||i;if(a.percentWidth){if(!o.hasWidth)o.setCacheValue("hasWidth",true),o.css("display","block"),o.setLayoutWidth("match_parent");e.setLayoutWidth("100%"===e.cssInitial("width")&&!e.hasPX("maxWidth")?"match_parent":"0px")}else if(n&&!a.marginHorizontal)n.setLayoutWidth("wrap_content");if(a.percentHeight){if(!o.hasHeight)o.setCacheValue("hasHeight",true),o.setLayoutHeight("match_parent");e.setLayoutHeight("100%"===e.cssInitial("height")&&!e.hasPX("maxHeight")?"match_parent":"0px")}else if(n&&!a.marginVertical)n.setLayoutHeight("wrap_content");if(n)return{parent:n,renderAs:n,outputAs:this.application.renderNode(new $n(i,n,t.CONSTRAINT,2048,n.children)),include:true};else return{include:true}}}postBaseLayout(e){const t=this.controller,i=e.data(this.name,"mainData"),a=c.constraint,n=e.renderParent,o=e.anchorTarget.renderParent.id;if(i.marginHorizontal){const[i,r]=e.cssAsTuple("marginLeft","marginRight"),s=Controller.anchorPosition(e,n,true,false),l=e.rightAligned;let c=e.percentWidth,d=io(i)?parseFloat(i)/100:0,f=io(r)?parseFloat(r)/100:0;if(c>0)if(l){if(c+f<1)d=1-(c+f)}else if(c+d<1)f=1-(c+d);if(d>0){const i=!l&&!e.centerAligned,n={width:"0px",height:"wrap_content",android:{[e.localizeString(h.MARGIN_LEFT)]:s.left?Zn(s.left):""},app:{layout_constraintHorizontal_chainStyle:i?"packed":"",layout_constraintHorizontal_bias:i?"0":"",layout_constraintWidth_percent:Qn(d,e.localSettings.floatPrecision),[a.top]:"parent",[e.localizeString(a.left)]:"parent",[e.localizeString(a.rightLeft)]:e.documentId}},r=t.renderSpace(n);if(n.documentId){if(e.anchorDelete("left"),e.anchor("leftRight",n.documentId),e.setBox(8,{reset:1}),0===f){if(l)e.anchor("right","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","1");if(s.right)e.modifyBox(2,s.right)}e.constraint.horizontal=true,t.addAfterInsideTemplate(o,r)}}if(f>0){const i={width:"0px",height:"wrap_content",android:{[e.localizeString(h.MARGIN_RIGHT)]:s.right?Zn(s.right):""},app:{layout_constraintHorizontal_chainStyle:l?"packed":"",layout_constraintHorizontal_bias:l?"1":"",layout_constraintWidth_percent:Qn(f,e.localSettings.floatPrecision),[a.top]:"parent",[e.localizeString(a.right)]:"parent",[e.localizeString(a.leftRight)]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("right"),e.anchor("rightLeft",i.documentId),e.setBox(2,{reset:1}),0===d){if(!l)e.anchor("left","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","0");if(s.left)e.modifyBox(8,s.left)}e.constraint.horizontal=true,t.addAfterInsideTemplate(o,n)}}if(e.blockStatic&&!e.hasWidth)e.app("layout_constraintWidth_percent",(1-(d+f)).toString()),e.setLayoutWidth("0px"),e.setCacheValue("contentBoxWidth",0);else if(c>0){let t=c+d+f;if(t>=1)c-=t-1;else{const i=e.contentBox&&!e.tableElement?e.contentBoxWidth/n.box.width:0;if(i>0)if(t+=i,t>=1)c=1-(d+f);else c=t}e.app("layout_constraintWidth_percent",c.toString()),e.setLayoutWidth("0px"),e.setCacheValue("contentBoxWidth",0)}}if(i.marginVertical){const[i,r]=e.cssAsTuple("marginTop","marginBottom"),s=Controller.anchorPosition(e,n,true,false),l=e.bottomAligned;let c=e.percentHeight,d=io(i)?parseFloat(i)/100:0,f=io(r)?parseFloat(r)/100:0;if(c>0)if(l){if(c+f<1)d=1-(c+f)}else if(c+d<1)f=1-(c+d);if(d>0){const i={width:"wrap_content",height:"0px",android:{[h.MARGIN_TOP]:s.top?Zn(s.top):""},app:{layout_constraintVertical_chainStyle:!l?"packed":"",layout_constraintVertical_bias:!l?"0":"",layout_constraintHeight_percent:Qn(d,e.localSettings.floatPrecision),[e.localizeString(a.left)]:"parent",[a.top]:"parent",[a.bottomTop]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("top"),e.anchor("topBottom",i.documentId),e.setBox(1,{reset:1}),0===f){if(l)e.anchor("bottom","parent"),e.app("layout_constraintVertical_chainStyle","packed"),e.app("layout_constraintVertical_bias","1");if(s.bottom)e.modifyBox(4,s.bottom)}e.constraint.vertical=true,t.addAfterInsideTemplate(o,n)}}if(f>0){const i={width:"wrap_content",height:"0px",android:{[h.MARGIN_BOTTOM]:s.bottom?Zn(s.bottom):""},app:{layout_constraintVertical_chainStyle:l?"packed":"",layout_constraintVertical_bias:l?"1":"",layout_constraintHeight_percent:Qn(f,e.localSettings.floatPrecision),[e.localizeString(a.left)]:"parent",[a.bottom]:"parent",[a.topBottom]:e.documentId}},n=t.renderSpace(i);if(i.documentId){if(e.anchorDelete("bottom"),e.anchor("bottomTop",i.documentId),e.setBox(4,{reset:1}),0===d){if(!l)e.anchor("top","parent"),e.app("layout_constraintHorizontal_chainStyle","packed"),e.app("layout_constraintHorizontal_bias","0");if(s.top)e.modifyBox(1,s.top)}e.constraint.vertical=true,t.addAfterInsideTemplate(o,n)}}if("100%"===e.css("height")||"100%"===e.css("minHeight"))e.app("layout_constraintHeight_percent",(1-(d+f)).toString()),e.setLayoutHeight("0px"),e.setCacheValue("contentBoxHeight",0);else if(c>0){let t=c+d+f;if(t>=1)c-=t-1;else{const i=e.contentBox&&!e.tableElement?e.contentBoxHeight/n.box.height:0;if(i>0)if(t+=i,t>=1)c=1-(d+f);else c=t}e.app("layout_constraintHeight_percent",c.toString()),e.setLayoutHeight("0px"),e.setCacheValue("contentBoxHeight",0)}}}}const{getElementAsNode:ao}=squared.lib.session,{NODE_ALIGNMENT:no,NODE_RESOURCE:oo,NODE_TEMPLATE:ro}=squared.base.lib.enumeration,so=squared.base.NodeUI;function lo(e,t,i){let a=false;const n=e.length;let o=0;while(o<n){const n=e[o++];if(n.toElementBoolean("checked"))n.android("checked","true");if(!a&&n.baseline&&n.parent===t&&t.layoutLinear&&(0===o||t.layoutHorizontal))t.android("baselineAlignedChildIndex",o.toString()),a=true;n.data(i,"siblings",e)}return a}const co=e=>{var t;return(null===(t=e.name)||void 0===t?void 0:t.trim())||""};class RadioGroup extends squared.base.ExtensionUI{is(e){return e.is(t.RADIO)}condition(e){return""!==co(e.element)&&void 0===e.data(this.name,"siblings")}processNode(e,i){var a,o;const r=co(e.element),s=[],l=[];let c=-1,d=-1;i.each((i,a)=>{const n=i.renderAs;let o;if(n){if(n!==e)o=i;i=n}if(i.is(t.RADIO)&&!i.rendered&&co(i.element)===r){if(s.push(i),-1===c)c=a;d=a}else if(!i.visible&&s.includes(i.labelFor))d=a;if(o)l.push(o)});let h=s.length;if(h>1){const a=so.linearData(i.children.slice(c,d+1)).linearX,o=this.controller.createNodeGroup(e,s,i,{delegate:true}),r=n.RADIOGROUP;if(o.setControlType(r,t.LINEAR),a)o.addAlign(68),o.android("orientation","horizontal");else o.addAlign(8),o.android("orientation","vertical");if(o.inherit(e,"alignment"),o.exclude({resource:oo.ASSET}),o.render(i),!lo(s,o,this.name))o.css("verticalAlign","middle"),o.setCacheValue("baseline",false),o.setCacheValue("verticalAlign","middle");h=l.length;let f=0;while(f<h)l[f++].hide({remove:true});return this.subscribers.add(o),{renderAs:o,outputAs:{type:1,node:o,controlName:r},parent:o,complete:true}}else{s.length=0;const i=co(e.element),r=e.sessionId;if(document.querySelectorAll(`input[type=radio][name=${i}]`).forEach(e=>{const t=ao(e,r);if(t)s.push(t)}),h=s.length,h>1&&s.includes(e)){const e=n.RADIOGROUP,i=new Map;let r=0;while(r<h){const t=s[r++].ascend({condition:e=>e.layoutLinear,error:t=>t.controlName===e,every:true}),a=t.length;if(a>0){let e=0;while(e<a){const a=t[e++];i.set(a,(i.get(a)||0)+1)}}else{i.clear();break}}for(const[n,r]of i.entries())if(r===h){n.unsafe("controlName",e),n.containerType=t.RADIO;const i=null===(o=null===(a=n.renderParent)||void 0===a?void 0:a.renderTemplates)||void 0===o?void 0:o.find(e=>e.node===n);if(i)i.controlName=e;return void lo(s,n,this.name)}}}}postBaseLayout(e){e.renderEach(t=>t.naturalElement&&t.toElementBoolean("checked")&&e.android("checkedButton",t.documentId))}}const{formatPX:ho}=squared.lib.css,{BOX_STANDARD:fo,NODE_RESOURCE:uo,NODE_TEMPLATE:po}=squared.base.lib.enumeration;class ScrollBar extends squared.base.ExtensionUI{is(e){return e.scrollElement&&!e.textElement}condition(e){return(e.overflowX&&e.hasPX("width")||e.overflowY&&e.hasPX("height")&&e.hasHeight)&&!e.rootElement&&"TEXTAREA"!==e.tagName}processNode(e,i){const a=[],r=[],s=n.HORIZONTAL_SCROLL,l=e.api<29?n.VERTICAL_SCROLL:o.VERTICAL_SCROLL,c=[];let d=NaN;if(e.overflowX&&e.overflowY)a.push(s,l);else if(e.overflowX)a.push(s);else if(e.overflowY)a.push(l);if(a.includes(s)){d=e.actualWidth-e.contentBoxWidth;let t=true,i=0;if(e.each(e=>{if(e.textElement&&"nowrap"!==e.css("whiteSpace"))c.push(e);else{const t=e.actualWidth;if(t<=d)return;else if(t>i)i=t}t=false}),!t){if(i>d)d=i}else a.shift()}const h=a.length;if(h>0){for(let n=0;n<h;++n){const o=this.application.createNode(e.sessionId,{parent:i});if(0===n){if(o.inherit(e,"base","initial","styleMap"),!i.replaceTry({child:e,replaceWith:o}))return}else o.inherit(e,"base"),o.exclude({resource:uo.BOX_STYLE});o.setControlType(a[n],t.BLOCK),o.exclude({resource:uo.ASSET}),o.resetBox(240),o.childIndex=e.childIndex,r.push(o)}for(let t=0;t<h;++t){const a=r[t];switch(a.controlName){case l:e.setLayoutHeight("wrap_content"),a.setLayoutHeight(ho(e.actualHeight)),a.android("scrollbars","vertical"),a.cssApply({width:1===h&&e.css("width")||"auto",overflow:"scroll visible",overflowX:"visible",overflowY:"scroll"});break;case s:e.setLayoutWidth("wrap_content"),a.setLayoutWidth(ho(e.actualWidth)),a.android("scrollbars","horizontal"),a.cssApply({height:1===h&&e.css("height")||"auto",overflow:"visible scroll",overflowX:"scroll",overflowY:"visible"});break}if(0===t)a.render(i);else a.render(r[t-1]);a.unsetCache(),this.application.addLayoutTemplate(a.renderParent||i,a,{type:1,node:a,controlName:a.controlName})}const n=c.length;let o=0;while(o<n){const e=c[o++];if(e.textElement)e.css("maxWidth",ho(d))}let f,u=true;do{if(f=r.pop(),u)i=f,f.innerWrapped=e,u=false;else f.innerWrapped=i}while(r.length>0);return e.exclude({resource:uo.BOX_STYLE}),e.resetBox(15,f),e.parent=i,{parent:i}}}}var go={shape:{"@":["xmlns:android","android:shape"],">":{solid:{"^":"android","@":["color"]},gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","centerX","centerY","gradientRadius","visible"]},corners:{"^":"android","@":["radius","topLeftRadius","topRightRadius","bottomRightRadius","bottomLeftRadius"]},stroke:{"^":"android","@":["width","color","dashWidth","dashGap"]}}}},mo={"layer-list":{"@":["xmlns:android"],">":{item:{"^":"android","@":["left","start","top","right","end","bottom","drawable","width","height","gravity"],">":{shape:go.shape,bitmap:{"^":"android","@":["src","gravity","tileMode","tileModeX","tileModeY"]},rotate:{"^":"android","@":["drawable","fromDegrees","toDegrees","pivotX","pivotY","visible"]}}}}}};const bo={path:{"^":"android","@":["name","fillColor","fillAlpha","fillType","strokeColor","strokeAlpha","strokeWidth","strokeLineCap","strokeLineJoin","strokeMiterLimit","trimPathStart","trimPathEnd","trimPathOffset","pathData"],">":{"aapt:attr":{"@":["name"],">":{gradient:{"^":"android","@":["type","startColor","endColor","centerColor","angle","startX","startY","endX","endY","centerX","centerY","gradientRadius","tileMode"],">":{item:{"^":"android","@":["offset","color"]}}}}}}}},yo={group:{"^":"android","@":["name","rotation","scaleX","scaleY","translateX","translateY","pivotX","pivotY"],">>":true,">":{"clip-path":{"^":"android","@":["name","pathData","fillType"]},path:bo.path},"#":"include"}};var So={vector:{"@":["xmlns:android","xmlns:aapt","android:name","android:width","android:height","android:viewportWidth","android:viewportHeight","android:alpha"],">":{path:bo.path},"#":"include"}};const{reduceRGBA:To}=squared.lib.color,{extractURL:wo,formatPercent:vo,formatPX:Eo,getBackgroundPosition:xo}=squared.lib.css,{truncate:Ao}=squared.lib.math,{delimitString:_o,flatArray:Ro,isEqual:Io,plainMap:No,resolvePath:Co}=squared.lib.util,{BOX_STANDARD:ko,NODE_RESOURCE:Lo}=squared.base.lib.enumeration,Po=squared.base.NodeUI,Oo=/\s*,\s*/;function Wo(e,t=-1,i=false){const{style:a,color:n}=e,o=jo(e.width),r=$o(n);switch(a){case"solid":break;case"dotted":r.dashWidth=Eo(o),r.dashGap=r.dashWidth;break;case"dashed":{let e,t;switch(o){case 1:case 2:e=3*o,t=e-1;break;case 3:e=6,t=3;break;default:e=2*o,t=4;break}r.dashWidth=Eo(e),r.dashGap=Eo(t);break}case"inset":case"outset":case"groove":case"ridge":{const e=n.rgba;let r=1;if(1===o){if("inset"===a||"outset"===a)r=.5}else{const n=e.r===e.g&&e.g===e.b;let o=0;if("ridge"===a)i=!i,o+=.25;else if("groove"===a)o+=.25;else if(n){if("inset"===a)i=!i}else if("outset"===a)i=!i;if(i)switch(t){case 0:case 3:t=1;break;case 1:case 2:t=0;break}switch(t){case 0:case 3:if(n)r=.5+o;break;case 1:case 2:r=n?.75+o:-.75;break}}if(1!==r){const t=To(e,r,n.valueAsRGBA);if(t)return $o(t)}break}}return r}function Do(e,t=-1,i=false,a=false){if(e){let n;if(Ho(e.style)){const o=parseFloat(e.width);n=Wo(e,t,!a),n.width=a?Eo(2*Math.ceil(o/2)):Eo(i?Math.ceil(o/2):jo(e.width))}else n=Wo(e),n.width=Eo(jo(e.width));return n}}function Bo(e){const[t,i,a,n]=e,o={};let r=false;if("0px"!==t)o.topLeftRadius=t,r=true;if("0px"!==i)o.topRightRadius=i,r=true;if("0px"!==a)o.bottomRightRadius=a,r=true;if("0px"!==n)o.bottomLeftRadius=n,r=true;return r?o:void 0}function Mo(e){const t=Fo(e,false);return""!==t?{color:t}:void 0}function Ho(e,t=0){switch(e){case"groove":case"ridge":case"inset":case"outset":return 1!==t;default:return false}}function Go(e,t,i,a,n,o,r=0,s){const l=jo(t.width),c=Math.max(1,Math.floor(l/3)),d=r>0?Eo(r):"";let h="-"+Eo(c+r+1);e.push({top:i?d:h,right:a?d:h,bottom:n?d:h,left:o?d:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Eo(c)},Wo(t)),corners:s}});const f=l-c+r,u=Eo(f);h="-"+Eo(f+1),e.push({top:i?u:h,right:a?u:h,bottom:n?u:h,left:o?u:h,shape:{"android:shape":"rectangle",stroke:Object.assign({width:Eo(c)},Wo(t)),corners:s}})}function Xo(e,t,i){if(!e.includes(" ")&&t.includes(" "))return/^[a-z]+$/.test(e)?("initial"===e?i:e)+" 0px":i+" "+e;else if("initial"===e)return"0px";return e}function Vo(e,t=29,i,a,n){const{colorStops:o,type:r}=e;let s=t>=21;const l={type:r,positioning:s},c=o.length;switch(r){case"conic":{const t=e.center;if(l.type="sweep",s)l.centerX=(2*t.left).toString(),l.centerY=(2*t.top).toString();else l.centerX=vo(t.leftAsPercent),l.centerY=vo(t.topAsPercent);break}case"radial":{const{center:t,radius:i}=e;if(s)l.gradientRadius=i.toString(),l.centerX=t.left.toString(),l.centerY=t.top.toString();else l.gradientRadius=Eo(i),l.centerX=vo(t.leftAsPercent),l.centerY=vo(t.topAsPercent);break}case"linear":if(!s||a&&1===i&&1===o[c-1].offset&&(2===c||3===c&&.5===o[1].offset))l.angle=(e.angle+90).toString(),l.positioning=false,s=false;else{const{angle:t,angleExtent:i,dimension:a}=e,{width:o,height:r}=a;let{x:s,y:c}=i;if(t<=90)c+=r,l.startX="0",l.startY=r.toString();else if(t<=180)l.startX="0",l.startY="0";else if(t<=270)s+=o,l.startX=o.toString(),l.startY="0";else s+=o,c+=r,l.startX=o.toString(),l.startY=r.toString();l.endX=Ao(s,n),l.endY=Ao(c,n)}break}if(s)l.item=Jo(o);else if(l.startColor=Fo(o[0].color),l.endColor=Fo(o[c-1].color),c>2)l.centerColor=Fo(o[Math.floor(c/2)].color);return l}function zo(e,t=[],i=true,a,n,o){const r=[],s=[{"xmlns:android":d.android,item:r}],l=!i&&Mo(e.backgroundColor);if(l&&!t.find(e=>!!e.gradient))r.push({shape:{"android:shape":"rectangle",solid:l,corners:n}});let c=0;while(c<t.length){const e=t[c++];r.push(e.gradient?{shape:{"android:shape":"rectangle",gradient:e.gradient,corners:n}}:e)}if(a)r.push({top:o,right:o,left:o,bottom:o,shape:{"android:shape":"rectangle",stroke:a,corners:n}});return s}function Fo(e,t=true){const i=Resource.addColor(e,t);return""!==i?"@color/"+i:""}function Uo(e,t){while(e.length<t)e=e.concat(e.slice(0));return e.length=t,e}function qo(e,t,i,a,n,o){const r=t[i];if(r){const t=jo(r.width);if("double"===r.style&&t>1)Go(e.item,r,0===i,1===i,2===i,3===i,n,a);else{const s=t>1&&Ko(r);if(s){const a="-"+Eo(t+n+1);e.item.push({top:0===i?"":a,right:1===i?"":a,bottom:2===i?"":a,left:3===i?"":a,shape:{"android:shape":"rectangle",stroke:Do(r,i,s,true)}})}const l="-"+Eo((s?Math.ceil(t/2):t)+n+1);e.item.push({top:0===i?o:l,right:1===i?o:l,bottom:2===i?o:l,left:3===i?o:l,shape:{"android:shape":"rectangle",corners:a,stroke:Do(r,i,s)}})}}}function Yo(e,t){if(e!==t&&!t.hasResource(Lo.BOX_SPACING)&&0===e.percentWidth)switch(e.cssInitial("maxWidth")){case"":case"auto":case"100%":{const e=t.renderChildren;if(1===e.length)t.removeTry({replaceWith:e[0]});break}}}const jo=e=>Math.round(parseFloat(e)),$o=e=>({color:Fo(e),dashWidth:"",dashGap:""}),Ko=e=>"groove"===e.style||"ridge"===e.style||"double"===e.style&&jo(e.width)>1,Zo=(e,t)=>`${e}px ${t}px`;function Jo(e,t){return No(e,e=>({color:Fo(e.color),offset:Ao(e.offset,t)}))}function Qo(e,t,i=0,a=0,n){if(n)i=Ao(i,n),a=Ao(a,n),e=Ao(i+e,n),t=Ao(a+t,n);else e+=i,t+=a;return`M${i},${a} ${e},${a} ${e},${t} ${i},${t} Z`}class ResourceBackground extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={drawOutlineAsInsetBorder:true},this.eventOnly=true}beforeParseDocument(){this._resourceSvgInstance=this.controller.localSettings.svg.enabled?this.application.builtInExtensions[a.RESOURCE_SVG]:void 0}afterResources(e){const t=this.application.userSettings,i=this.options.drawOutlineAsInsetBorder;let a=false;const o=(e,t,i)=>{Resource.addTheme({name:e,parent:t,items:{"android:windowBackground":i,"android:windowFullscreen":"true","android:fitsSystemWindows":"true"}}),a=true},r=(e,i)=>{if(""!==i){const n="@drawable/"+Resource.insertStoredAsset("drawables",e.containerName.toLowerCase()+"_"+e.controlId,i);if(!a)if("HTML"===e.tagName)return void o(t.manifestThemeName,t.manifestParentThemeName,n);else{const i=e.innerMostWrapped;if(i.documentBody&&(""!==e.backgroundColor||e.visibleStyle.backgroundRepeatY))return o(t.manifestThemeName,t.manifestParentThemeName,n),void Yo(i,e)}e.android("background",n,false)}};this.application.getProcessingCache(e).each(e=>{var s,l;const c=e.data(Resource.KEY_NAME,"boxStyle");if(c){if(e.inputElement){const t=e.companion;if("LABEL"===(null==t?void 0:t.tagName)&&!t.visible){const e=null===(s=t.data(Resource.KEY_NAME,"boxStyle"))||void 0===s?void 0:s.backgroundColor;if(e)c.backgroundColor=e}}const d=this.getDrawableImages(e,c);if(e.controlName===n.BUTTON&&1===(null===(l=c.borderRadius)||void 0===l?void 0:l.length)&&(null==d?void 0:d.some(e=>true===e.vectorGradient))&&e.api>=28)e.android("buttonCornerRadius",c.borderRadius[0]),c.borderRadius=void 0;const h=c.outline;let[f,u]=this.getDrawableBorder(c,void 0,d,i&&h?function(e){const t=jo(e.width);return 2===t&&"double"===e.style?3:t}(h):0);const p=void 0===f&&void 0===u;if(h&&(i||p)){const[e,t]=this.getDrawableBorder(c,h,p?d:void 0,void 0,!p);if(e){if(!f)f=e}else if(t)if(u)u[0].item=u[0].item.concat(t[0].item);else u=t}if(f)r(e,V("shape",go,f));else if(u)r(e,V("layer-list",mo,u));else{const i=c.backgroundColor;if(i){const n=Fo(i,e.inputElement);if(""!==n){if(!a)if("HTML"===e.tagName)return void o(t.manifestThemeName,t.manifestParentThemeName,n);else{const i=e.innerMostWrapped;if(i.documentBody)return o(t.manifestThemeName,t.manifestParentThemeName,n),void Yo(i,e)}const r=e.data(Resource.KEY_NAME,"fontStyle");if(r)r.backgroundColor=i;else e.android("background",n,false)}}}}})}getDrawableBorder(e,t,i,a=0,n=false){const o=new Array(4),r=!n?function(e){if(e)switch(e.length){case 1:return{radius:e[0]};case 8:{const t=new Array(4);let i=0,a=0;while(i<8)t[a++]=Eo((parseFloat(e[i++])+parseFloat(e[i++]))/2);return Bo(t)}default:return Bo(e)}}(e.borderRadius):void 0,s=a>0?Eo(a):"";let l,c,h,f,u,p=true,g=true;if(t){h=t,l=new Array(4);for(let e=0;e<4;++e)l[e]=t,o[e]=true}else{l=[e.borderTop,e.borderRight,e.borderBottom,e.borderLeft];for(let e=0;e<4;++e){const t=l[e];if(t){if(p&&h)if(p=Io(h,t),!p)g=false;h=t,o[e]=true}else o[e]=false,g=false}}if(g)c=h;if(c&&!Ho(c.style,jo(c.width))&&!("double"===c.style&&parseInt(c.width)>1)||!h&&(r||(null==i?void 0:i.length))){const t=c?Do(c):false;if((null==i?void 0:i.length)||a>0||n)u=zo(e,i,n,t,r,s);else f=function(e,t,i){return[{"xmlns:android":d.android,"android:shape":"rectangle",stroke:e,solid:t,corners:i}]}(t,!n&&Mo(e.backgroundColor),r)}else if(h)if(u=zo(e,i,n),p&&!Ho(h.style)){const e=jo(h.width);if("double"===h.style&&e>1)Go(u[0].item,h,o[0],o[1],o[2],o[3],a,r);else{const t="-"+Eo(e+a+1);u[0].item.push({top:o[0]?s:t,right:o[1]?s:t,bottom:o[2]?s:t,left:o[3]?s:t,shape:{"android:shape":"rectangle",corners:r,stroke:Do(h)}})}}else{const e=u[0];qo(e,l,0,r,a,s),qo(e,l,3,r,a,s),qo(e,l,2,r,a,s),qo(e,l,1,r,a,s)}return[f,u]}getDrawableImages(e,i){var a;const n=i.backgroundImage,o=e.data(Resource.KEY_NAME,"embedded");if(n||o){const l=this.resource,c=e.localSettings.screenDimension,{bounds:h,fontSize:f}=e,{width:u,height:p}=h,g=[],m=[],b=[],y=[],S=[],T=i.backgroundPositionX.split(Oo),w=i.backgroundPositionY.split(Oo);let v=i.backgroundRepeat.split(Oo),E=i.backgroundSize.split(Oo),x=0;if(n){const t=this._resourceSvgInstance,o=n.length;v=Uo(v,o),E=Uo(E,o);let r=false;for(let s=0;s<o;++s){let d=n[s],h=false;if("string"==typeof d){if("initial"!==d){if(t){const[i,n]=t.createSvgElement(e,d);if(i&&n){const o=t.createSvgDrawable(e,n);if(o){const t=(null===(a=e.data(Resource.KEY_NAME,"svg"))||void 0===a?void 0:a.viewBox)||{width:n.width.baseVal.value,height:n.height.baseVal.value};if(!e.svgElement){let{width:e,height:i}=t;if(e>u||i>p){const t=e/u,a=i/p;if(t>a)if(t>1)e=u,i/=t;else i=p*(a/t);else if(a>1)i=p,e/=a;else e=u*(t/a)}t.width=e,t.height=i}m[x]=o,y[x]=t,b[x]=true,h=true}i.removeChild(n)}}if(!h){const e=wo(d);if(e)if(e.startsWith("data:image/")){const t=l.getRawData(e);if(null==t?void 0:t.base64){const e=t.filename;if(e)m[x]=e.substring(0,e.lastIndexOf(".")),y[x]=t.width&&t.height?t:void 0,l.writeRawImage(t.mimeType,{filename:e,data:t.base64,encoding:"base64"}),h=true}}else{d=Co(e);const t=l.addImageSet({mdpi:d});if(m[x]=t,""!==t)y[x]=l.getImage(d),h=true}}}}else if(d.colorStops.length>1){const t=Vo(d,e.api,o,i.borderRadius);if(t)m[x]=t,y[x]=d.dimension,h=true}if(h){const t=T[s]||T[s-1],i=w[s]||w[s-1];S[x]=xo(Xo(t,i,"left")+" "+Xo(i,t,"top"),e.actualDimension,{fontSize:f,imageDimension:y[x],imageSize:E[s],screenDimension:c}),++x}else v[s]=void 0,E[s]=void 0,r=true}if(r)v=Ro(v),E=Ro(E)}if(o){if(0===x)v.length=0,E.length=0;for(const t of o.filter(e=>e.visible&&(e.imageElement||"INPUT_IMAGE"===e.containerName))){const i=t.element,a=l.addImageSrc(i);if(""!==a){const n=t.bounds;m[x]=a,v[x]="no-repeat",E[x]=Zo(t.actualWidth,t.actualHeight);const o=xo("INPUT_IMAGE"===t.containerName?Zo(0,0):Zo(n.left-h.left+e.borderLeftWidth,n.top-h.top+e.borderTopWidth),e.actualDimension,{fontSize:f,imageDimension:n,screenDimension:c}),r=l.getImage(i.src);if(!e.hasPX("width")){const t=((null==r?void 0:r.width)||i.naturalWidth)+o.left-(e.paddingLeft+e.borderLeftWidth);if(t>0)e.modifyBox(128,t)}y[x]=r,S[x]=o,++x}}}const A=e.innerMostWrapped.documentBody;for(let a=x-1,n=0;a>=0;--a){const o=m[a],l={order:1/0};if("object"==typeof o&&!o.positioning){l.gravity="fill",l.gradient=o,l.order=n++,g.push(l);continue}const f=S[a],T=4===f.orientation.length,w=E[a];let x=v[a],_=y[a],R=NaN,I=NaN,N=true!==b[a],C=e.is(t.IMAGE)||"string"!=typeof o,k=0,L=0,P=0,O=0,W=0,D=0,B=0,M=NaN,H=NaN,G=NaN,X=NaN,z="",F="",U="",q="",Y="",j=false,$=false;if(_)if(!_.width||!_.height)_=void 0;else R=_.width,I=_.height;if(x.includes(" ")){const[e,t]=x.split(" ");if("no-repeat"===e)x="no-repeat"===t?"no-repeat":"repeat-y";else if("no-repeat"===t)x="repeat-x";else x="repeat"}else if("space"===x||"round"===x)x="repeat";switch(x){case"repeat":z="repeat",F="repeat";break;case"repeat-x":z="repeat",F="disabled";break;case"repeat-y":z="disabled",F="repeat";break;default:z="disabled",F="disabled";break}switch(f.horizontal){case"left":case"0%":case"0px":if(U=e.localizeString("left"),T)X=0,j=true;break;case"center":case"50%":U="center_horizontal";break;case"right":case"100%":if(U=e.localizeString("right"),H=0,T)j=true;break;default:if(f.leftAsPercent<1)U="left",X=0,j=true;else U="right",H=0,j=true;break}switch(f.vertical){case"top":case"0%":case"0px":if(q="top",T)M=0,$=true;break;case"center":case"50%":q="center_vertical";break;case"bottom":case"100%":if(q="bottom",G=0,T)$=true;break;default:if(f.topAsPercent<1)q="top",M=0,$=true;else q="bottom",G=0,$=true;break}switch(w){case"auto":case"auto auto":case"initial":if("string"!=typeof o)Y="fill";break;case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(e.ascend({condition:e=>e.hasPX("width"),startSelf:true}).length>0)U="",q="";case"contain":case"cover":case"round":if(z="",F="",Y="fill",A){const t=e.visibleStyle;t.backgroundRepeat=true,t.backgroundRepeatY=true}break;default:if(""!==w)w.split(" ").forEach((t,i)=>{if("100%"===t)Y=0===i?"fill_horizontal":_o({value:Y,delimiter:"|"},"fill_vertical");else if("auto"!==t)if(0===i){if("repeat"!==z||!N)W=e.parseWidth(t,false)}else if("repeat"!==F||!N)D=e.parseHeight(t,false)});break}let K,Z=false,J=false,Q=false,ee=false,te=true;if(_){let t=u,i=p;if("contain"!==w)if(!e.hasWidth){const a=window.innerWidth,n=c.width,o=()=>p*(t/u);if(u===a)if(a>=n)t=n,i=o();else({width:t,height:i}=Po.refitScreen(e,h));else if(a>=n)t=e.actualBoxWidth(u),i=o()}const a=R/t,n=I/i,o=()=>R*D/I,r=()=>I*W/R,s=()=>t*(a/n),l=()=>i*(n/a),d=(e,t)=>{if(z="",F="",Y="",e)U="",q="";if(t)M=NaN,H=NaN,G=NaN,X=NaN,j=false,$=false;te=false};switch(w){case"100%":case"100% 100%":case"100% auto":case"auto 100%":if(I>=p){Q=true,ee=true,D=p,C=true;break}case"cover":{const o="cover"===w;if(d(o,!o),a<n)if(W=t,D=l(),D>p){const t=f.topAsPercent;if(0!==t)k=Math.round((p-D)*t);const i=e.layoutConstraint||e.layoutRelative?"minHeight":"height";if(!e.hasPX(i))e.css(i,Eo(p-e.contentBoxHeight));if(!j)Y="center_horizontal|fill_horizontal"}else{if(D<p)W=t*p/D,D=p;if(!j)Y="center_horizontal|fill"}else if(a>n){if(W=s(),D=i,W>u){if(e.hasWidth){const e=f.leftAsPercent;if(0!==e)O=Math.round((u-W)*e)}if(!$)Y="center_vertical|fill_vertical"}else{if(W<u)W=u,D=i*u/W;if(!$)Y="center_vertical|fill"}j=false}else Y="fill";$=false;break}case"contain":if(d(true,true),a>n)D=l(),W=R<u?o():u,q="center_vertical",Y="fill_horizontal";else if(a<n)W=s(),D=I<p?r():p,U="center_horizontal",Y="fill_vertical";else Y="fill";break;default:if(0===W&&D>0)W=o();if(0===D&&W>0)D=r();break}}if(i.backgroundClip){const{top:t,right:a,left:n,bottom:o}=i.backgroundClip;if(0===W)W=u;else W+=e.contentBoxWidth;if(0===D)D=p;else D+=e.contentBoxHeight;if(W-=n+a,D-=t+o,!isNaN(H))L+=a;else O+=n;if(!isNaN(G))P+=o;else k+=t;U="",q=""}else if(te){if(i.backgroundOrigin){if("repeat"!==z)if(!isNaN(H))L+=i.backgroundOrigin.right;else O+=i.backgroundOrigin.left;if("repeat"!==F)if(!isNaN(G))P+=i.backgroundOrigin.bottom;else k+=i.backgroundOrigin.top}if(!C&&!A){if(0===W&&R>u){W=u-(j?Math.min(f.left,0):0);let t=true;if("repeat"===F&&""!==U){switch(U){case"start":case"left":if(L+=u-R,j){const e=f.left;if(e<0)B=e;W=0,L-=e,t=false,U="right",F=""}else U="";X=NaN,H=0;break;case"center_horizontal":U+="|fill_vertical",F="";break;case"right":if(O+=u-R,j){const i=f.right;if(i<0)B=i;W=0,O-=i,t=false,U=e.localizeString("left"),F=""}else U="";X=0,H=NaN;break}j=false,q=""}if(t)Y=_o({value:Y,delimiter:"|",not:["fill"]},"fill_horizontal");if("disabled"!==z)z="";Z=true}if(0===D&&I>p){D=p;let e=true;if("repeat"===z&&""!==q){switch(q){case"top":if($){P+=p-I;const t=f.top;if(t<0)B=t;D=0,P-=t,e=false,q="bottom",z="",M=NaN,G=0}break;case"center_vertical":q+="|fill_horizontal",z="";break;case"bottom":if(k+=p-I,$){const t=f.bottom;if(t<0)B=t;D=0,k-=t,e=false,q="top"}else q="";z="",M=0,G=NaN;break}U="",$=false}if(e)Y=_o({value:Y,delimiter:"|",not:["fill"]},"fill_vertical");if("disabled"!==F)F="";J=true}}}switch(e.controlName){case r.TOOLBAR:case s.TOOLBAR:U="",q="",Y="fill";break}if(!C){if(0===W&&R<u&&"disabled"===z)W=R,Q=true;if(0===D&&I<p&&"disabled"===F)D=I,ee=true;const t=U;if("repeat"===z){switch(q){case"top":if(!isNaN(M))z="";q="";break;case"bottom":if(W>0&&!Q)z="";else if(ee)if(W=R,Y=_o({value:Y,delimiter:"|",not:["fill"]},"fill_horizontal"),I>=R)z="";break}U=""}if("repeat"===F){switch(t){case"start":case"left":if(!isNaN(X))F="";U="";break;case"center_horizontal":if(e.renderChildren.length>0)F="";break;case"right":case"end":if(D>0&&!ee)F="";else if(Q)if(D=I,Y=_o({value:Y,delimiter:"|",not:["fill"]},"fill_vertical"),R>=I)F="";break}q=""}if(""!==U&&!Z)Y=_o({value:Y,delimiter:"|"},U),U="";if(""!==q&&!J)Y=_o({value:Y,delimiter:"|"},q),q=""}else if(0===W&&0===D&&"fill"===Y)N=false;if("string"==typeof o)K="@drawable/"+o;else if(o.item){if(0===W)W=(null==_?void 0:_.width)||Po.refitScreen(e,e.actualDimension).width;if(0===D)D=(null==_?void 0:_.height)||Po.refitScreen(e,e.actualDimension).height;const t=Resource.insertStoredAsset("drawables",`${e.controlId}_gradient_${a+1}`,V("vector",So,[{"xmlns:android":d.android,"xmlns:aapt":d.aapt,"android:width":Eo(W),"android:height":Eo(D),"android:viewportWidth":W.toString(),"android:viewportHeight":D.toString(),path:{pathData:Qo(W,D),"aapt:attr":{name:"android:fillColor",gradient:o}}}]));if(""!==t)K="@drawable/"+t,l.order=n++,l.vectorGradient=true;if("left"===U||"start"===U)U="";if("top"===q)q="";if("fill"!==Y)if("repeat"===z&&"repeat"===F)Y="fill";else if("repeat"===z)if("fill_vertical"===Y)Y="fill";else Y="fill_horizontal";else if("repeat"===F)if("fill_horizontal"===Y)Y="fill";else Y="fill_vertical"}const ie="center_horizontal"===U&&"center_vertical"===q?"center":_o({value:U,delimiter:"|"},q);if(K){if(N&&(!C&&(""!==Y&&""!==ie||"repeat"===z||"repeat"===F||A)||Q||ee)){let e="";if("disabled"===z&&"disabled"===F)e="disabled",z="",F="";else if("repeat"===z&&"repeat"===F)e="repeat",z="",F="";l.gravity=Y,l.bitmap=[{src:K,gravity:ie,tileMode:e,tileModeX:z,tileModeY:F}]}else l.gravity=_o({value:ie,delimiter:"|"},Y),l.drawable=K;if(l.drawable||l.bitmap||l.gradient){if(!isNaN(G)){if($)P+=f.bottom;if(P+=G,0!==P)l.bottom=Eo(P);if(B<0)l.top=Eo(B)}else{if($)k+=f.top;if(!isNaN(M))k+=M;if(0!==k)l.top=Eo(k);if(B<0)l.bottom=Eo(B)}if(!isNaN(H)){if(j)L+=f.right;if(L+=H,0!==L)l[e.localizeString("right")]=Eo(L);if(B<0)l[e.localizeString("left")]=Eo(B)}else{if(j)O+=f.left;if(!isNaN(X))O+=X;if(0!==O)l[e.localizeString("left")]=Eo(O);if(B<0)l[e.localizeString("right")]=Eo(B)}if(W>0)l.width=Eo(W);if(D>0)l.height=Eo(D);g.push(l)}}}return g.sort((e,t)=>{const i=e.order,a=t.order;if(i===a)return 0;else return i<a?-1:1})}}}const{capitalize:er}=squared.lib.util;class ResourceData extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e,t){const i=this.application.viewModel;if(i){const a=this.controller,n=new Set,o=e.length;let r=0;while(r<o){const t=e[r++];if(t.styleElement&&t.visible)for(const[e]of t.namespaces()){const i=Y(t.dataset,"viewmodel"+er(e));if(i){for(const a in i)t.attr(e,a,`@{${i[a]}}`,true);n.add(t)}}}if(n.size>0){r=0;while(r<t.length){const e=t[r++].node;for(const t of n)if(t.ascend({condition:t=>t===e,attr:"renderParent"}).length>0){const{import:o,variable:r}=i,{depth:s,id:l}=e,c="\t".repeat(s),d="\t".repeat(s+1),h="\t".repeat(s+2);let f=c+"<layout {#0}>\n"+d+"<data>\n";if(o){let e=0;while(e<o.length)f+=h+`<import type="${o[e++]}" />\n`}if(r){let e=0;while(e<r.length){const{name:t,type:i}=r[e++];f+=h+`<variable name="${t}" type="${i}" />\n`}}f+=d+"</data>\n",a.addBeforeOutsideTemplate(l,f),a.addAfterOutsideTemplate(l,c+"</layout>\n"),e.depth=s-1,n.delete(t);break}}}}}}const{convertUnderscore:tr,fromLastIndexOf:ir,safeNestedArray:ar,safeNestedMap:nr}=squared.lib.util;function or(e,t,i){if(e.get(t)===i)return t;for(const[a,n]of e.entries())if(i===n&&a.startsWith(t))return a;return Resource.generateId("dimen",t)}function rr(e,t,i){const a=t.namespace(e);for(const n in a)if("text"!==n){const o=a[n];if(/\dpx$/.test(o))ar(i,`${e},${n},${o}`).push(t)}}class ResourceDimens extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=Resource.STORED.dimens,i={},a=e.length;let n=0;while(n<a){const t=e[n++];if(t.visible){const e=t.containerName.toLowerCase(),a=nr(i,e);rr("android",t,a),rr("app",t,a)}}for(const e in i){const a=i[e];for(const i in a){const[n,o,r]=i.split(","),s=or(t,ir(e,".")+"_"+tr(o),r);for(const e of a[i])e.attr(n,o,"@dimen/"+s);t.set(s,r)}}}afterFinalize(){if(this.controller.hasAppendProcessing()){const e=Resource.STORED.dimens,t=this.application.layouts;let i=0;while(i<t.length){const a=t[i++],n=/:(\w+)="(-?[\d.]+px)"/g;let o,r=a.content;while(o=n.exec(a.content)){const[t,i,a]=o;if("text"!==i){const n=or(e,"custom_"+tr(i),a);r=r.replace(t,t.replace(a,"@dimen/"+n)),e.set(n,a)}}a.content=r}}}}const{capitalize:sr,convertInt:lr,convertWord:cr,hasKeys:dr,plainMap:hr,safeNestedArray:fr,safeNestedMap:ur,spliceArray:pr,trimBoth:gr}=squared.lib.util,{NODE_RESOURCE:mr}=squared.base.lib.enumeration,br={"sans-serif":14,"sans-serif-thin":16,"sans-serif-light":16,"sans-serif-condensed":16,"sans-serif-condensed-light":16,"sans-serif-medium":21,"sans-serif-black":21,"sans-serif-smallcaps":21,"serif-monospace":21,serif:21,casual:21,cursive:21,monospace:21,"sans-serif-condensed-medium":26},yr={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},Sr={"arial black":"sans-serif","ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif","-webkit-standard":"sans-serif"},Tr={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},wr={fontFamily:'android:fontFamily="',fontStyle:'android:textStyle="',fontWeight:'android:fontWeight="',fontSize:'android:textSize="',color:'android:textColor="@color/',backgroundColor:'android:background="@color/'};function vr(e,t,i){const a=t.split(";"),n=a.length,o=e.length;let r,s=0;while(s<n){const t=a[s++];e:{r=0;while(r<o){const a=e[r++];for(const e in a)if(e===t){if(a[e]=a[e].filter(e=>!i.includes(e)),0===a[e].length)delete a[e];break e}}}}}class ResourceFonts extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={systemDefaultFont:"sans-serif",disableFontAlias:false},this.eventOnly=true}afterParseDocument(e){const t=this.resource,i=t.userSettings,a=this.options.disableFontAlias,n=i.targetAPI,o="dp"===i.convertPixels,{fonts:r,styles:s}=t.mapOfStored,l=Object.keys(wr),c={},d={};let h=[];this.application.getProcessingCache(e).each(e=>{if(e.data(Resource.KEY_NAME,"fontStyle")&&e.hasResource(mr.FONT_STYLE))fr(c,e.containerName).push(e)});for(const e in c){const i=[],s=c[e];h=h.concat(s);const f=s.length;let u=0;while(u<f){let e=s[u++];const c=e.data(Resource.KEY_NAME,"fontStyle"),{id:d,companion:h}=e;let{fontFamily:f,fontStyle:p,fontWeight:g}=c;if("LABEL"===(null==h?void 0:h.tagName)&&!h.visible)e=h;f.replace(/"/g,"").split(",").some((i,o,s)=>{let l=i=gr(i.trim(),"'").toLowerCase(),c="";if(!a&&Sr[l])l=this.options.systemDefaultFont;if(n>=br[l]||!a&&n>=br[yr[l]])f=l;else if(p&&g){let e;if(t.getFont(i,p,g))e=true;else{const a=p.startsWith("oblique")?t.getFont(i,"italic")||t.getFont(i,"normal"):t.getFont(i,p);if(a)c=g,g=a.fontWeight.toString(),e=true;else if(o<s.length-1)return false;else f=this.options.systemDefaultFont}if(e){l=cr(l);const e=r.get(l)||{};e[i+"|"+p+"|"+g]=Tr[g]||g,r.set(l,e),f="@font/"+l}}else return false;if("normal"===p||p.startsWith("oblique"))p="";if(""!==c)g=c;else if("400"===g||e.api<26)g="";if(parseInt(g)>500)p+=(p?"|":"")+"bold";return true});const m={fontFamily:f,fontStyle:p,fontWeight:g,fontSize:c.fontSize,color:Resource.addColor(c.color),backgroundColor:Resource.addColor(c.backgroundColor,e.inputElement)};for(let e=0;e<6;++e){const t=l[e];let a=m[t];if(a){if(3===e&&o)a=z(a,true);fr(ur(i,e),wr[t]+a+'"').push(d)}}}d[e]=i}const f={};for(const e in d){const t={};f[e]=t;const i=d[e].filter(e=>!!e).sort((e,t)=>{let i=0,a=0,n=0,o=0;for(const t in e){const a=e[t].length;i=Math.max(a,i),n+=a}for(const e in t){const i=t[e];if(i){const e=i.length;a=Math.max(e,a),o+=e}}if(i!==a)return i>a?-1:1;else if(n!==o)return n>o?-1:1;return 0});do{const a=i.length;if(1===a){const e=i[0];for(const i in e){const a=e[i];if(a.length>0)t[i]=a}break}else{const n={};for(let o=0;o<a;++o){const r=i[o],s={};for(const t in r){const l=r[t];if(0===l.length)continue;else if(l.length===c[e].length){n[t]=l,i[o]={};break}const d={};let h=false;for(let e=0;e<a;++e)if(o!==e){const t=i[e];for(const e in t){const i=t[e];if(i.length>0){const t=l.length;let a=0;while(a<t){const t=l[a++];if(i.includes(t))fr(d,e).push(t)}}}}for(const e in d){const i=d[e];if(i.length>1)s[t<e?`${t};${e}`:`${e};${t}`]=i,h=true}if(!h)s[t]=l}if(dr(s)){const e={},a=new Set,n={};for(const e in s)n[e]=s[e].join(",");for(const t in s)for(const i in s){const o=n[t];if(t!==i&&o===n[i]){let n=e[o];if(!n)n=new Set(t.split(";")),e[o]=n;for(const e of i.split(";"))n.add(e);a.add(t).add(i)}}for(const e in s)if(!a.has(e))vr(i,e,s[e]),t[e]=s[e];for(const a in e){const n=Array.from(e[a]).sort().join(";"),o=hr(a.split(","),e=>parseInt(e));vr(i,n,o),t[n]=o}}}const o=Object.keys(n);if(o.length>0)t[o.join(";")]=n[o[0]];pr(i,e=>{for(const t in e)if(e[t].length>0)return false;return true})}}while(i.length>0)}const u={},p={},g=new Set;for(const e in f){const t=f[e],i=[];for(const e in t){const a=[];for(const t of e.split(";")){const e=/([^\s]+)="((?:[^"]|\\")+)"/.exec(t);if(e)a.push({key:e[1],value:e[2]})}i.push({name:"",parent:"",items:a,ids:t[e]})}i.sort((e,t)=>{let i=e.ids.length,a=t.ids.length;if(i===a)if(i=e.items.length,a=t.items.length,i===a)i=e.name,a=t.name;return i<=a?1:-1});for(let t=0;t<i.length;++t)i[t].name=sr(e)+(t>0?"_"+t:"");u[e]=i}for(const e in u)for(const t of u[e]){const e=t.ids;if(e){const i=e.length;let a=0;while(a<i)fr(p,e[a++]).push(t.name)}}const m=h.length;let b=0;while(b<m){const e=h[b++],t=p[e.id];if(t){if(t.length>1)g.add(t.join(".")),t.shift();else g.add(t[0]);e.attr("_","style","@style/"+t.join("."))}}for(const e of g){const t=[],i=e.split(".");let a,n="";const o=i.length;for(b=0;b<o;++b){const e=i[b],r=/^(\w*?)(?:_(\d+))?$/.exec(e);if(r){const i=u[r[1].toUpperCase()][lr(r[2])];if(i)if(0===b){if(n=e,1===o)a=i.items;else if(!s.has(e))s.set(e,{name:e,parent:"",items:i.items})}else{if(a){const e=i.items,t=e.length;let n=0;while(n<t){const t=e[n++],i=t.key,o=a.findIndex(e=>e.key===i);if(-1!==o)a[o]=t;else a.push(t)}}else a=i.items.slice(0);t.push(e)}}}if(a)if(0===t.length)s.set(n,{name:n,parent:"",items:a});else{const e=t.join(".");s.set(e,{name:e,parent:n,items:a})}}}}const{NODE_TEMPLATE:Er}=squared.base.lib.enumeration;class ResourceIncludes extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=e.length;let i=0;while(i<t){const t=e[i++],a=t.renderTemplates;if(a){let e,i;if(t.renderEach((t,a)=>{const n=t.dataset,o=n.androidInclude,r="true"===n.androidIncludeEnd;if(o||r){if(t.documentRoot)return;const s={item:t,name:o,index:a,include:"false"===n.androidIncludeMerge};if(o){if(!e)e=[];e.push(s)}if(r){if(!i)i=[];i.push(s)}}}),e&&i){const t=this.application,n=this.controller,o=Math.min(e.length,i.length),r=i.length-o;if(r>0)i.splice(0,r);let s=o-1;while(s>=0){const{index:o,include:r,item:l,name:c}=e[s--];for(let e=0;e<i.length;++e){const s=i[e].index;if(s>=o){const d=[];let h=o;while(h<=s)d.push(a[h++]);const f=!r||d.length>1,u=f?1:0;a.splice(o,d.length,{type:2,node:d[0].node,content:n.renderNodeStatic({controlName:"include",width:"match_parent"},{layout:"@layout/"+c,android:{}}),indent:true});let p=n.cascadeDocument(d,u);if(f)p=n.getEnclosingXmlTag("merge",te(p),p);else l.documentRoot=true;t.saveDocument(c,p,"",1/0),i.splice(e,1);break}}}}}}}}const{isPercent:xr,parseAngle:Ar}=squared.lib.css,{measureTextWidth:_r}=squared.lib.dom,{clamp:Rr}=squared.lib.math,{capitalizeString:Ir,delimitString:Nr,lowerCaseString:Cr}=squared.lib.util,{NODE_RESOURCE:kr}=squared.base.lib.enumeration;function Lr(e,t,i){if(""!==i)e.android(t,i,false)}class ResourceStrings extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={numberResourceValue:false},this.eventOnly=true}afterResources(e){const t=this.options.numberResourceValue;this.application.getProcessingCache(e).each(e=>{if(e.hasResource(kr.VALUE_STRING)){if(e.styleElement){const i=e.data(Resource.KEY_NAME,"titleString")||e.toElementString("title");if(""!==i)Lr(e,"tooltipText",Resource.addString(J(i),e.controlId.toLowerCase()+"_title",t))}if(e.inputElement){if(e.controlName===n.EDIT_LIST){const t=e.element.list;if(t)this.createOptionArray(t,e.controlId)}const i=e.data(Resource.KEY_NAME,"hintString");if(i)Lr(e,"hint",Resource.addString(J(i),e.controlId.toLowerCase()+"_hint",t))}const i=e.tagName;switch(i){case"SELECT":{const t=this.createOptionArray(e.element,e.controlId);if(""!==t)e.android("entries","@array/"+t);break}case"IFRAME":{const t=e.data(Resource.KEY_NAME,"valueString");if(t)Resource.addString(J(t));break}default:{let a=e.data(Resource.KEY_NAME,"valueString");if(a){let n=0;if(e.blockDimension||"table-cell"===e.display){const t=e.css("textIndent");if(n=e.parseUnit(t),"100%"===t||n+e.bounds.width<0)return void e.delete("android","ellipsize","maxLines")}if(e.naturalChild&&e.alignParent("left")&&e.pageFlow&&!(e.preserveWhiteSpace&&!e.plainText||e.plainText&&e.actualParent.preserveWhiteSpace)){const t=e.textContent,i=t.length;let n=0,o=0;while(n<i){switch(t.charCodeAt(n++)){case 9:case 10:case 32:++o;continue}break}if(o>0)a=a.replace(new RegExp(`^(\\s|&#160;){1,${o}}`),"")}switch(e.css("textTransform")){case"uppercase":e.android("textAllCaps","true"),e.lockAttr("android","textAllCaps");break;case"lowercase":a=Cr(a);break;case"capitalize":a=Ir(a);break}a=J(a,e.preserveWhiteSpace||"CODE"===i?e.toInt("tabSize",8):void 0);const o=e.css("textDecorationLine");if("none"!==o)for(const e of o.split(" "))switch(e){case"underline":a=`<u>${a}</u>`;break;case"line-through":a=`<strike>${a}</strike>`;break}if("INS"===i&&!o.includes("line-through"))a=`<strike>${a}</strike>`;if(0===n){const t=e.actualParent;if((null==t?void 0:t.firstChild)===e&&(t.blockDimension||"table-cell"===t.display))n=t.parseUnit(t.css("textIndent"))}if(n>0){const t=_r(" ",e.css("fontFamily"),e.fontSize)||e.fontSize/2;a=Resource.STRING_SPACE.repeat(Math.max(Math.floor(n/t),1))+a}let r=function(e){if("italic"===e)return"'ital' 1";const t=/oblique(?:\s+(-?[\d.]+[a-z]+))?/.exec(e);if(t){let e;if(t[1])e=Ar(t[1]);return"'slnt' "+(void 0!==e&&!isNaN(e)?Rr(e,-90,90):"14")}return""}(e.css("fontStyle")),s="";if(e.has("fontStretch")){let t=e.css("fontStretch");switch(t){case"100%":t="";break;case"ultra-condensed":t="50%";break;case"extra-condensed":t="62.5%";break;case"condensed":t="75%";break;case"semi-condensed":t="87.5%";break;case"semi-expanded":t="112.5%";break;case"expanded":t="125%";break;case"extra-expanded":t="150%";break;case"ultra-expanded":t="200%";break}if(xr(t))r=Nr({value:r},"'wdth' "+parseFloat(t))}if(e.has("fontVariantCaps"))for(const t of e.css("fontVariantCaps").split(" "))switch(t){case"small-caps":s=Nr({value:s},"'smcp'");break;case"all-small-caps":s=Nr({value:s},"'c2sc'","'smcp'");break;case"petite-caps":s=Nr({value:s},"'pcap'");break;case"all-petite-caps":s=Nr({value:s},"'c2pc'","'pcap'");break;case"unicase":s=Nr({value:s},"'unic'");break;case"titling-caps":s=Nr({value:s},"'titl'");break}if(e.has("fontVariantNumeric"))for(const t of e.css("fontVariantNumeric").split(" "))switch(t){case"ordinal":s=Nr({value:s},"'ordn'");break;case"slashed-zero":s=Nr({value:s},"'zero'");break;case"lining-nums":s=Nr({value:s},"'lnum'");break;case"oldstyle-nums":s=Nr({value:s},"'onum'");break;case"proportional-nums":s=Nr({value:s},"'pnum'");break;case"tabular-nums":s=Nr({value:s},"'tnum'");break;case"diagonal-fractions":s=Nr({value:s},"'frac'");break;case"stacked-fractions":s=Nr({value:s},"'afrc'");break}if(e.has("fontVariantLigatures"))for(const t of e.css("fontVariantLigatures").split(" "))switch(t){case"common-ligatures":s=Nr({value:s},"'liga'");break;case"no-common-ligatures":s=Nr({value:s},"'liga' 0");break;case"discretionary-ligatures":s=Nr({value:s},"'dlig'");break;case"no-discretionary-ligatures":s=Nr({value:s},"'dlig' 0");break;case"historical-ligatures":s=Nr({value:s},"'hlig'");break;case"no-historical-ligatures":s=Nr({value:s},"'hlig' 0");break;case"contextual":s=Nr({value:s},"'calt'");break;case"no-contextual":s=Nr({value:s},"'calt' 0");break}if(e.has("fontVariantEastAsian"))for(const t of e.css("fontVariantEastAsian").split(" "))switch(t){case"ruby":s=Nr({value:s},"'ruby'");break;case"jis78":s=Nr({value:s},"'jp78'");break;case"jis83":s=Nr({value:s},"'jp83'");break;case"jis90":s=Nr({value:s},"'jp90'");break;case"jis04":s=Nr({value:s},"'jp04'");break;case"simplified":s=Nr({value:s},"'smpl'");break;case"traditional":s=Nr({value:s},"'trad'");break;case"proportional-width":s=Nr({value:s},"'pwid'");break;case"full-width":s=Nr({value:s},"'fwid'");break}if(e.has("fontVariationSettings"))for(const t of e.css("fontVariationSettings").replace(/"/g,"'").split(","))r=Nr({value:r},t.trim());if(e.has("fontFeatureSettings"))for(const t of e.css("fontFeatureSettings").replace(/"/g,"'").split(","))s=Nr({value:s},t.trim());if(""!==r)e.android("fontVariationSettings",r);if(""!==s)e.android("fontFeatureSettings",s);Lr(e,"text",Resource.addString(a,"",t))}}}}})}createOptionArray(e,t){const[i,a]=Resource.getOptionArray(e),n=this.options.numberResourceValue;let o;if(!n&&a)o=a;else{const e=i||a;if(e){o=[];const t=e.length;let i=0;while(i<t){const t=Resource.addString(J(e[i++]),"",n);if(""!==t)o.push(t)}}}return(null==o?void 0:o.length)?Resource.insertStoredAsset("arrays",t+"_array",o):""}}const{capitalize:Pr}=squared.lib.util;class ResourceStyles extends squared.base.ExtensionUI{constructor(){super(...arguments),this.eventOnly=true}beforeCascade(e){const t=this.resource.mapOfStored,i=e.length;let a=0;while(a<i){const i=e[a++];if(i.controlId&&i.visible){const e=i.renderChildren,a=e.length;if(a>1){const n={};let o,r="",s=0;while(s<a){const t=e[s++].combine("_","android");let i=false;const a=t.length;o=0;while(o<a){const e=t[o++];if(!i&&e.startsWith("style=")){if(0===s)r=e;else if(""===r||e!==r)return;i=true}else n[e]=(n[e]||0)+1}if(!i&&""!==r)return}const l=[];for(const e in n)if(n[e]===a)l.push(e);const c=l.length;if(c>1){if(""!==r)r=r.substring(r.indexOf("/")+1,r.length-1);const n=[],o=[];s=0;while(s<c){const e=/(\w+:(\w+))="([^"]+)"/.exec(l[s++]);if(e)n.push({key:e[1],value:e[3]}),o.push(e[2])}const d=(""!==r?r+".":"")+Pr(i.controlId);if(!t.styles.has(d))n.sort((e,t)=>e.key<t.key?-1:1),t.styles.set(d,Object.assign(K(),{name:d,items:n}));s=0;while(s<a){const t=e[s++];t.attr("_","style","@style/"+d),t.delete("android",...o)}}}}}}}var Or={"animated-vector":{"@":["xmlns:android","android:drawable"],">":{target:{"^":"android","@":["name","animation"]}}}};const Wr={objectAnimator:{"^":"android","@":["propertyName","startOffset","duration","repeatCount","interpolator","valueType","valueFrom","valueTo"],">":{propertyValuesHolder:{"^":"android","@":["propertyName"],">":{keyframe:{"^":"android","@":["interpolator","fraction","value"]}}}}}};var Dr={set:{"@":["xmlns:android","android:ordering"],">":{set:{"^":"android","@":["ordering"],">":{set:{"^":"android","@":["ordering"],">":{objectAnimator:Wr.objectAnimator}},objectAnimator:Wr.objectAnimator}},objectAnimator:Wr.objectAnimator}}};if(!squared.svg)Object.assign(squared,{svg:{lib:{constant:{},util:{}}}});var Br=squared.svg.Svg,Mr=squared.svg.SvgAnimate,Hr=squared.svg.SvgAnimateTransform,Gr=squared.svg.SvgBuild,Xr=squared.svg.SvgG,Vr=squared.svg.SvgPath,zr=squared.svg.SvgShape;const{extractURL:Fr,formatPX:Ur,isPercent:qr}=squared.lib.css,{truncate:Yr}=squared.lib.math,{FILE:jr}=squared.lib.regex,{convertCamelCase:$r,convertInt:Kr,convertWord:Zr,formatString:Jr,hasKeys:Qr,isArray:es,isNumber:ts,partitionArray:is,plainMap:as,replaceMap:ns}=squared.lib.util,{KEYSPLINE_NAME:os,SYNCHRONIZE_MODE:rs}=squared.svg.lib.constant,{MATRIX:ss,SVG:ls,TRANSFORM:cs,getAttribute:ds,getRootOffset:hs}=squared.svg.lib.util,fs=squared.base.NodeUI,us={accelerate_decelerate:"@android:anim/accelerate_decelerate_interpolator",accelerate:"@android:anim/accelerate_interpolator",anticipate:"@android:anim/anticipate_interpolator",anticipate_overshoot:"@android:anim/anticipate_overshoot_interpolator",bounce:"@android:anim/bounce_interpolator",cycle:"@android:anim/cycle_interpolator",decelerate:"@android:anim/decelerate_interpolator",linear:"@android:anim/linear_interpolator",overshoot:"@android:anim/overshoot_interpolator"},ps=["name","value","fill","stroke","fillPattern","fillRule","strokeWidth","fillOpacity","strokeOpacity","strokeLinecap","strokeLinejoin","strokeLineJoin","strokeMiterlimit"];if(os)Object.assign(us,{[os["ease-in"]]:us.accelerate,[os["ease-out"]]:us.decelerate,[os["ease-in-out"]]:us.accelerate_decelerate,[os.linear]:us.linear});const gs={stroke:["strokeColor"],fill:["fillColor"],opacity:["alpha"],"stroke-opacity":["strokeAlpha"],"fill-opacity":["fillAlpha"],"stroke-width":["strokeWidth"],"stroke-dasharray":["trimPathStart","trimPathEnd"],"stroke-dashoffset":["trimPathOffset"],d:["pathData"],"clip-path":["pathData"]};function ms(e,t){const i=null==e?void 0:e[t];return i?us[i]||bs(i):""}function bs(e){const t=us[e];if(t)return t;const i=Resource.STORED,a="path_interpolator_"+Zr(e);if(!i.animators.has(a))i.animators.set(a,Jr('<?xml version="1.0" encoding="utf-8"?>\n<pathInterpolator xmlns:android="http://schemas.android.com/apk/res/android"\n\tandroid:controlX1="{0}"\n\tandroid:controlY1="{1}"\n\tandroid:controlX2="{2}"\n    android:controlY2="{3}" />\n',...e.split(/\s+/)));return"@anim/"+a}function ys(e){const t={},i=e.length;let a=0;while(a<i){const{matrix:i,origin:n,angle:o,type:r}=e[a++];switch(r){case SVGTransform.SVG_TRANSFORM_SCALE:if(t.scaleX=i.a.toString(),t.scaleY=i.d.toString(),n)t.pivotX=n.x.toString(),t.pivotY=n.y.toString();break;case SVGTransform.SVG_TRANSFORM_ROTATE:if(t.rotation=o.toString(),n)t.pivotX=n.x.toString(),t.pivotY=n.y.toString();else t.pivotX="0",t.pivotY="0";break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:t.translateX=i.e.toString(),t.translateY=i.f.toString();break}}return t}function Ss(e,t,i=1,a=1){if((ls.circle(e)||ls.ellipse(e))&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_ROTATE))if(i!==a||t.length>1&&t.some(e=>e.type===SVGTransform.SVG_TRANSFORM_SCALE&&e.matrix.a!==e.matrix.d))return Ts(e,t);return[[],t]}function Ts(e,t,i=false){if(t.length>0){const a=[],n=[],o=t[0].fromStyle?[]:cs.rotateOrigin(e).reverse(),r=t.slice(0).reverse(),s=[],l=()=>{a.push(s.slice(0)),s.length=0};for(let e=1;e<r.length;++e){const t=r[e],i=r[e-1];if(t.type===i.type){let a;switch(t.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:a=ss.clone(t.matrix),a.e+=i.matrix.e,a.f+=i.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:a=ss.clone(t.matrix),a.a*=i.matrix.a,a.d*=i.matrix.d;break}if(a)t.matrix=a,r.splice(--e,1)}}const c=r.length;let d=0;while(d<c){const e=r[d++];switch(e.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SKEWX:case SVGTransform.SVG_TRANSFORM_SKEWY:n.push(e);break;case SVGTransform.SVG_TRANSFORM_TRANSLATE:if(!i&&0===a.length&&0===s.length)n.push(e);else s.push(e),l();break;case SVGTransform.SVG_TRANSFORM_ROTATE:while(o.length>0){const t=o.shift();if(t.angle===e.angle){if(0!==t.x||0!==t.y)e.origin=t;break}}if(!e.origin&&1===s.length&&s[0].type===SVGTransform.SVG_TRANSFORM_SCALE){s.push(e);continue}case SVGTransform.SVG_TRANSFORM_SCALE:if(s.length>0)l();s.push(e);break}}if(s.length>0)a.push(s);return[a.reverse(),n]}return[[],t]}function ws(e,t,i,a,n){const o=e[t];let r;if(o)r=Array.isArray(o)?o[i].toString():o;else if(!a&&0===t)r=n;return r||""}function vs(e){switch(e){case"fill":case"stroke":return"";case"opacity":case"stroke-opacity":case"stroke-dasharray":case"stroke-dashoffset":case"fill-opacity":case"transform":return"floatType";case"stroke-width":return"intType";case"d":case"x":case"x1":case"x2":case"cx":case"y":case"y1":case"y2":case"cy":case"r":case"rx":case"ry":case"width":case"height":case"points":return"pathType";default:if(Rs(e))return"floatType";else return}}function Es(e,t,i,a){const n=new Mr;return n.attributeName=e,n.delay=t,n.duration=1,n.from=a||i,n.to=i,n.fillForwards=true,n.convertToValues(),n}function xs(e,t=true){let i=gs[e];if(!i&&t&&Rs(e))i=[e];return i}function As(e){switch(e){case SVGTransform.SVG_TRANSFORM_TRANSLATE:return["translateX","translateY"];case SVGTransform.SVG_TRANSFORM_SCALE:return["scaleX","scaleY","pivotX","pivotY"];case SVGTransform.SVG_TRANSFORM_ROTATE:return["rotation","pivotX","pivotY"]}}function _s(e){switch(e.type){case SVGTransform.SVG_TRANSFORM_ROTATE:return Hr.toRotateList(e.values);case SVGTransform.SVG_TRANSFORM_SCALE:return Hr.toScaleList(e.values);case SVGTransform.SVG_TRANSFORM_TRANSLATE:return Hr.toTranslateList(e.values)}}function Rs(e){switch(e){case"rotation":case"pivotX":case"pivotY":case"translateX":case"translateY":return"0";case"scaleX":case"scaleY":return"1"}}function Is(e,t){const i="@color/"+Resource.addColor(e);return t?[i]:i}function Ns(e,t){return Ms(e.attributeName)?Is(t):t.trim()||void 0}function Cs(e){switch(e){case SVGGradientElement.SVG_SPREADMETHOD_PAD:return"clamp";case SVGGradientElement.SVG_SPREADMETHOD_REFLECT:return"mirror";case SVGGradientElement.SVG_SPREADMETHOD_REPEAT:return"repeat"}return""}function ks(e,t,i){const{colorStops:a,type:n}=e,o={type:n,item:Jo(a,i),positioning:false};switch(n){case"radial":{const{cxAsString:i,cyAsString:a,rAsString:n,spreadMethod:r}=e,s=t.element;let l,c,d,h,f=[];switch(s.tagName){case"path":for(const e of Gr.getPathCommands(t.value))f=f.concat(e.value);case"polygon":if(ls.polygon(s))f=f.concat(Gr.clonePoints(s.points));if(0===f.length)return;({left:l,top:c,right:d,bottom:h}=Gr.minMaxPoints(f)),d-=l,h-=c;break;default:if(ls.rect(s))l=s.x.baseVal.value,c=s.y.baseVal.value,d=s.width.baseVal.value,h=s.height.baseVal.value;else if(ls.circle(s))d=s.r.baseVal.value,l=s.cx.baseVal.value-d,c=s.cy.baseVal.value-d,d*=2,h=d;else if(ls.ellipse(s))d=s.rx.baseVal.value,h=s.ry.baseVal.value,l=s.cx.baseVal.value-d,c=s.cy.baseVal.value-h,d*=2,h*=2;else return;break}if(o.centerX=(l+d*Gs(i)).toString(),o.centerY=(c+h*Gs(a)).toString(),o.gradientRadius=((d+h)/2*(qr(n)?parseFloat(n)/100:1)).toString(),r)o.tileMode=Cs(r);break}case"linear":{const{x1:t,y1:i,x2:a,y2:n,spreadMethod:r}=e;if(o.startX=t.toString(),o.startY=i.toString(),o.endX=a.toString(),o.endY=n.toString(),r)o.tileMode=Cs(r)}}return o}function Ls(e,t){const i=e.synchronized,a=t.synchronized;return i&&a?i.key>=a.key?1:-1:0}function Ps(e,t,i,a,n){const o=i.set,r=o.length;if(r>0){let s=false;if(r>1&&o.every(e=>""===e.ordering)){const e={set:[],objectAnimator:[]};let t=0;while(t<r){const i=o[t++];e.set=e.set.concat(i.set),e.objectAnimator=e.objectAnimator.concat(i.objectAnimator)}i=e}while(1===i.set.length){const e=i.set[0];if((!s||""===e.ordering)&&0===e.objectAnimator.length)i=e,s=true;else break}if(i["xmlns:android"]=d.android,s)i["android:ordering"]=i.ordering,i.ordering=void 0;const l={name:t,animation:Resource.insertStoredAsset("animators",Bs(a,n,"anim",t),V("set",Dr,[i]))};if(""!==l.animation)l.animation="@anim/"+l.animation,e[0].target.push(l)}}function Os(e,t,i,a,n,o="",r="",s="0"){return{propertyName:e,startOffset:r,duration:a,repeatCount:s,valueType:t,valueFrom:ts(o)?Yr(o,n):o,valueTo:ts(i)?Yr(i,n):i,propertyValuesHolder:false}}function Ws(e,t,i,a,n){if(i&&-1===a.findIndex(t=>t.propertyName===e))a.push(Os(e,t,i,"0",n))}function Ds(e,t,i,a,n,o,r,s,l,c){if(!a&&i.fillReplace){let a,d=i.replaceValue;if(!d){if(n)d=Rs(e);else{const t=i.parent;if(t)if(Gr.isShape(t)){const i=t.path;if(i)d="pathData"===e?i.value:i[function(e){for(const t in gs)if(gs[t].includes(e))return $r(t);return""}(e)]}}if(!d)d=i.baseValue}if(null==l?void 0:l.length){const e=l[l.length-1];if(es(e.propertyValuesHolder)){const t=e.propertyValuesHolder[e.propertyValuesHolder.length-1];a=t.keyframe[t.keyframe.length-1].value}else a=e.valueTo}if(d&&d!==a)if(d=Ns(i,d),d){switch(e){case"trimPathStart":case"trimPathEnd":d=d.split(" ")["trimPathStart"===e?0:1];break}r.push(Os(e,t,d,"1",o,"pathType"===t?a:"",c?c.toString():""))}if(s)if(e.endsWith("X"))r.push(Os("translateX",t,"0","1",o));else if(e.endsWith("Y"))r.push(Os("translateY",t,"0","1",o))}}const Bs=(e,t,i,a)=>e+(i?"_"+i:"")+(t?"_vector":"")+(a?"_"+a.toLowerCase():""),Ms=e=>"fill"===e||"stroke"===e,Hs=(e,t,i=-1)=>e.name+"_"+t+(-1!==i?"_"+(i+1):""),Gs=e=>qr(e)?parseFloat(e)/100:.5,Xs=e=>"@drawable/"+e,Vs=(e="")=>({ordering:e,objectAnimator:[]});class ResourceSvg extends squared.base.ExtensionUI{constructor(){super(...arguments),this.options={transformExclude:{ellipse:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],circle:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY],image:[SVGTransform.SVG_TRANSFORM_SKEWX,SVGTransform.SVG_TRANSFORM_SKEWY]},floatPrecisionKeyTime:5,floatPrecisionValue:3,animateInterpolator:""},this.eventOnly=true,this._vectorData=new Map,this._animateData=new Map,this._animateTarget=new Map,this._imageData=[],this._synchronizeMode=0,this._namespaceAapt=false}beforeParseDocument(){if(Gr)Gr.resetNameCache(),this.controller.localSettings.svg.enabled=true}afterResources(e){if(Gr){const t={};for(const[e,i]of Resource.ASSETS.rawData.entries())if("image/svg+xml"===i.mimeType&&i.content)t[e]=i.content;let i,a;this.application.getProcessingCache(e).each(e=>{if(e.imageElement)[i,a]=this.createSvgElement(e,e.toElementString("src"));else if(e.svgElement)a=e.element;if(a){const n=this.createSvgDrawable(e,a,t);if(n)if(e.api>=21)e.android("src",Xs(n));else e.app("srcCompat",Xs(n));if(!e.hasWidth)e.setLayoutWidth("wrap_content");if(!e.hasHeight)e.setLayoutHeight("wrap_content");if(e.baseline)e.android("baselineAlignBottom","true");const o=e.data(Resource.KEY_NAME,"svg");if(o){const t=o.getTitle(),i=o.getDesc();if(""!==t)e.android("tooltipText",Resource.addString(t,`svg_${e.controlId.toLowerCase()}_title`,true));if(""!==i)e.android("contentDescription",Resource.addString(i,`svg_${e.controlId.toLowerCase()}_desc`,true))}if(i)i.removeChild(a),i=void 0;a=void 0}})}}afterFinalize(){if(Gr)this.controller.localSettings.svg.enabled=false}createSvgElement(e,t){const i=Fr(t);if(i)t=i;if(jr.SVG.test(t)||t.startsWith("data:image/svg+xml")){const i=this.resource.getRawData(t);if(i){const t=(e.actualParent||e.documentParent).element;t.insertAdjacentHTML("beforeend",i.content);const a=t.lastElementChild;if(a instanceof SVGSVGElement){const i=a;if(0===i.width.baseVal.value)i.setAttribute("width",e.actualWidth.toString());if(0===i.height.baseVal.value)i.setAttribute("height",e.actualHeight.toString());return[t,i]}}}return[]}createSvgDrawable(e,t,i){var a;const{transformExclude:n,floatPrecisionValue:o,floatPrecisionKeyTime:r}=this.options,s=new Br(t);s.contentMap=i;const l=e.api>=23,c=1|(l?16:32),h=this._animateData,f=this._imageData;this._svgInstance=s,this._vectorData.clear(),h.clear(),this._animateTarget.clear(),f.length=0,this._namespaceAapt=false,this._synchronizeMode=c;const u=(e.tagName+"_"+Zr(e.controlId,true)+"_viewbox").toLowerCase();s.build({contentMap:i,exclude:n,residualHandler:Ss,precision:o}),s.synchronize({keyTimeMode:c,framesPerSecond:this.controller.userSettings.framesPerSecond,precision:o}),this.queueAnimations(s,s.name,e=>"opacity"===e.attributeName);const p=this.parseVectorData(s),g=f.length;let m;if(""!==p){const{width:t,height:i}=fs.refitScreen(e,{width:s.width,height:s.height});if(m=Resource.insertStoredAsset("drawables",Bs(u,g),V("vector",So,[{"xmlns:android":d.android,"xmlns:aapt":this._namespaceAapt?d.aapt:"","android:name":h.size>0?s.name:"","android:width":Ur(t),"android:height":Ur(i),"android:viewportWidth":(s.viewBox.width||t).toString(),"android:viewportHeight":(s.viewBox.height||i).toString(),"android:alpha":parseFloat(s.opacity)<1?s.opacity.toString():"",include:p}])),h.size>0){const e=[{"xmlns:android":d.android,"android:drawable":Xs(m),target:[]}];for(const[t,i]of h.entries()){const n=new Map,s=new Map,c=[],d=[],h=[],f=[],p=[],[m,b]=is(i.animate,e=>"companion"in e),y={set:[],objectAnimator:[]};let S=b.length;for(let e=0;e<S;++e){const t=b[e];if(t.setterType){if(gs[t.attributeName]&&t.to)if(t.fillReplace&&t.duration>0)d.push(t);else c.push(t)}else if(Gr.isAnimate(t)){const i=m.filter(e=>e.companion.value===t),a=i.length;if(a>0){i.sort((e,t)=>e.companion.key>=t.companion.key?1:0);const o=[],r=[];for(let e=0;e<a;++e){const a=i[e];if(a.companion.key<=0){if(o.push(a),0===e)a.delay+=t.delay,t.delay=0}else r.push(a)}o.push(t),n.set("sequentially_companion_"+e,o.concat(r))}else{const e=t.synchronized;if(e){const i=e.value;if(Gr.isAnimateTransform(t)){const e=s.get(i);if(e)e.push(t);else s.set(i,[t])}else{const e=n.get(i);if(e)e.push(t);else n.set(i,[t])}}else{if(Gr.isAnimateTransform(t))t.expandToValues();if(-1===t.iterationCount)d.push(t);else if((!t.fromToType||Gr.isAnimateTransform(t)&&t.transformOrigin)&&!(l&&"pathType"!==vs(t.attributeName)))h.push([t]);else if(t.fillReplace)d.push(t);else c.push(t)}}}}if(c.length>0)h.push(c);for(const[e,t]of n.entries())if(e.startsWith("sequentially_companion"))h.push(t);else h.push(t.sort(Ls));for(const e of s.values())p.push(e.sort(Ls));for(let e=0;e<d.length;++e)f.push([[d[e]]]);const T=[h,p,...f];S=T.length;for(let e=0;e<S;++e){const t=T[e],n=t.length;if(0===n)continue;const s={ordering:0===e||1===n?"":"sequentially",set:[],objectAnimator:[]};let c=0;while(c<n){const n=t[c++];let d="",h=false,f=false,u=true;if(e<=1&&n.some(e=>!!e.synchronized&&""!==e.synchronized.value)){if(!Gr.isAnimateTransform(n[0]))d="sequentially";h=true,u=false}else if(e<=1&&n.some(e=>!!e.synchronized&&""===e.synchronized.value))d="sequentially",h=true,f=true;else if(e<=1&&n.some(e=>"companion"in e))d="sequentially";else{if(e>0)d="sequentially";if(e>1&&Gr.isAnimateTransform(n[0]))f=true}const p=Vs(),g=Vs(),m=Vs(),b=Vs(),y=g.objectAnimator,S=m.objectAnimator;let T=p.objectAnimator,w=b.objectAnimator,v=[];const E=h?is(n,e=>-1!==e.iterationCount):[n],x=E.length;for(let t=0;t<x;++t){const n=E[t],c=n.length;if(1===t&&c>1)m.ordering="sequentially";const p=new Map;for(let g=0;g<c;++g){const m=n[g],b=vs(m.attributeName);if(void 0===b)continue;const E=m.delay>0;let x,A=false;if(m.setterType){const t=xs(m.attributeName);if(t){const i=Ms(m.attributeName)?Is(m.to,true):m.to.trim().split(" "),a=t.length;if(i.length===a&&!i.some(e=>""===e)){let n,r;for(let s=0;s<a;++s){let a;if("pathType"===b)a=i[s];else if(E)if(m.baseValue)a=Ns(m,m.baseValue.trim().split(" ")[s]);const l=Os(t[s],b,i[s],"1",o,a,m.delay>0?m.delay.toString():"");if(e>1)S.push(l),Ds(t[s],b,m,h,A,o,w,x,void 0,e>1?m.duration:0);else{const e=m.companion;if(e){if(e.key<=0){if(!n)n=[];n.push(l)}else if(e.key>0){if(!r)r=[];r.push(l)}}else v.push(l)}}if(n)T=T.concat(n);if(r)w=w.concat(r)}}}else if(Gr.isAnimate(m)){let n,v,_,R,I=f;if(1===t)n=c>1?"0":"-1";else n=-1!==m.iterationCount?Math.ceil(m.iterationCount-1).toString():"-1";const N=Os("",b,"",m.duration.toString(),o,"",m.delay>0?m.delay.toString():"",n);if(!h&&"pathType"===b){if(i.pathData){const e=m.parent;let t,n;if(e&&Gr.isShape(e))n=e,t=null===(a=e.path)||void 0===a?void 0:a.transformed;_=["pathData"],R=Vr.extrapolate(m.attributeName,i.pathData,m.values,t,n,o)}}else if(Gr.asAnimateTransform(m)){if(_=As(m.type),R=_s(m),_&&R){if(f&&0===m.keyTimes[0])I=false;if(I||E)v=as(_,e=>Rs(e)||"0");x=m.transformOrigin}A=true}else if(Gr.asAnimateMotion(m)){if(_=As(m.type),R=_s(m),_&&R){const e=m.rotateValues,t=R.length;if((null==e?void 0:e.length)===t){_.push("rotation");let i=0;while(i<t)R[i].push(e[i++])}}A=true}else switch(_=xs(m.attributeName),b){case"intType":if(R=as(m.values,e=>Kr(e).toString()),E&&m.baseValue)v=ns(Gr.parseCoordinates(m.baseValue),e=>Math.trunc(e).toString());break;case"floatType":if("stroke-dasharray"===m.attributeName)R=as(m.values,e=>ns(e.split(" "),e=>parseFloat(e)));else R=m.values;if(E&&m.baseValue)v=ns(Gr.parseCoordinates(m.baseValue),e=>e.toString());break;default:if(R=m.values.slice(0),Ms(m.attributeName)){if(E&&m.baseValue)v=Is(m.baseValue,true);for(let e=0;e<R.length;++e)if(""!==R[e])R[e]=Is(R[e])}break}if(!m.keySplines){const e=m.timingFunction;N.interpolator=e?bs(e):this.options.animateInterpolator}if(R&&_){const{keyTimes:a,synchronized:n}=m,c=_.length,C=a.length,k=n?n.key+n.value:0!==e||c>1?JSON.stringify(N):"";for(let e=0;e<c;++e){const n=_[e];if(I&&v)Ws(n,b,v[e],T,o);if(u&&C>1)if(l&&"pathType"!==b){if(!I&&E&&v)Ws(n,b,v[e],T,o);const i=p.get(k)||[],s=[];for(let t=0;t<C;++t){let i=ws(R,t,e,true);if(i&&"floatType"===b)i=Yr(i,o);s.push({interpolator:t>0&&""!==i&&"pivotX"!==n&&"pivotY"!==n?ms(m.keySplines,t-1):"",fraction:0===a[t]&&""===i?"":Yr(a[t],r),value:i})}if(i.push({propertyName:n,keyframe:s}),!p.has(k)){if(""!==k)p.set(k,i);(0===t?y:S).push(Object.assign(Object.assign({},N),{propertyValuesHolder:i}))}x=void 0}else{d="sequentially";const t=Vs("sequentially");for(let r=0;r<C;++r){const s=a[r],l=Object.assign(Object.assign({},N),{propertyName:n,startOffset:0===r?(m.delay+(s>0?Math.floor(s*m.duration):0)).toString():"",propertyValuesHolder:false});let c=ws(R,r,e,false,"pathType"===b?i.pathData:m.baseValue);if(c){let d;if(0===r){if(!f&&E&&v)l.valueFrom=v[e];else if("pathType"===b)l.valueFrom=i.pathData||R[0].toString();else l.valueFrom=m.baseValue||m.replaceValue||"";d=0}else l.valueFrom=ws(R,r-1,e).toString(),d=Math.floor((s-a[r-1])*m.duration);if("floatType"===b)c=Yr(c,o);const h=null==x?void 0:x[r];if(h){let e,i=0;if(n.endsWith("X"))i=h.x,e="translateX";else if(n.endsWith("Y"))i=h.y,e="translateY";if(e){const a=Os(e,"floatType",Yr(i,o),d.toString(),o);a.interpolator=bs(os["step-start"]),t.objectAnimator.push(a)}}if(r>0)l.interpolator=ms(m.keySplines,r-1);l.duration=d.toString(),l.valueTo=c,y.push(l)}}if(t.objectAnimator.length>0)s.set.push(t)}else{const a=Object.assign(Object.assign({},N),{propertyName:n,interpolator:m.duration>1?ms(m.keySplines,0):"",propertyValuesHolder:false}),r=R.length;if(Array.isArray(R[0])){const t=R[r-1][e];if(r>1){const i=R[0][e];if(i!==t)a.valueFrom=i.toString()}a.valueTo=t.toString()}else{let e;if(r>1)e=R[0].toString(),a.valueTo=R[r-1].toString();else e=m.from||(!f&&E&&v?v[g]:""),a.valueTo=m.to;if("pathType"===b)a.valueFrom=e||i.pathData||a.valueTo;else if(e!==a.valueTo&&e)a.valueFrom=Ns(m,e)}const s=a.valueTo;if(s){if("floatType"===b)a.valueTo=Yr(s,o);(0===t?y:S).push(a)}}if(0===t&&!h&&-1!==m.iterationCount)Ds(n,b,m,h,A,o,w,x,y)}if(E&&(null==x?void 0:x.length))Ws("translateX",b,"0",T,o),Ws("translateY",b,"0",T,o)}}}}const A=y.length>0||S.length>0;if("sequentially"===d){if(A&&1===T.length)y.unshift(T[0]),T.length=0;if(1===S.length)y.push(S[0]),S.length=0;if(A&&1===w.length)y.push(w[0]),w.length=0}if(0===T.length&&0===S.length&&0===w.length){if("sequentially"===d&&1===y.length)d="";if("sequentially"!==s.ordering&&"sequentially"!==d)v=v.concat(y),y.length=0}if(y.length>0||S.length>0){if(T.length>0)s.ordering="sequentially",s.set.push(p);if(y.length>0)g.ordering=d,s.set.push(g);if(S.length>0)s.ordering="sequentially",s.set.push(m);if(w.length>0)s.ordering="sequentially",s.set.push(b)}if(v.length>0)s.objectAnimator=s.objectAnimator.concat(v)}if(s.set.length>0||s.objectAnimator.length>0)y.set.push(s)}Ps(e,t,y,u,g)}for(const[t,i]of this._animateTarget.entries()){const a=i.animate;let n;const r=a.length;let s=0;while(s<r){const e=a[s++];if(Gr.asAnimateMotion(e)){const t=e.parent;if(t&&Gr.isShape(t)){const i=t.path;if(i){const{value:t,baseValue:a}=i;if(t!==a){if(!n)n=[];if(n.push(Os("pathData","pathType",a,"0",o,t)),-1!==e.iterationCount&&!e.setterType)n.push(Os("pathData","pathType",t,"0",o,a,e.getTotalDuration().toString()))}}}}}if(n)Ps(e,t,{set:[{set:void 0,objectAnimator:n}],objectAnimator:void 0},u,g)}if(e[0].target)m=Resource.insertStoredAsset("drawables",Bs(u,g,"anim"),V("animated-vector",Or,e))}}if(g){const e=this.resource,t=[],i=[{"xmlns:android":d.android,item:t}];if(m)t.push({drawable:Xs(m)});let a=0;while(a<g){const i=f[a++],{x:n,y:o}=hs(i.element,s.element),r=s.viewBox,l=s.width/r.width,c=s.height/r.height,d=i.getBaseValue("x",0)*l+n,h=i.getBaseValue("y",0)*c+o,u={width:Ur(i.getBaseValue("width",0)*l),height:Ur(i.getBaseValue("height",0)*c),left:0!==d?Ur(d):"",top:0!==h?Ur(h):""},p=Xs(e.addImageSet({mdpi:i.href}));if(i.rotateAngle)u.rotate={drawable:p,fromDegrees:i.rotateAngle.toString(),visible:i.visible?"true":"false"};else u.drawable=p;t.push(u)}return Resource.insertStoredAsset("drawables",u,V("layer-list",mo,i))}return e.data(Resource.KEY_NAME,"svg",s),m}parseVectorData(e,t=0){const i=this.options.floatPrecisionValue,a=this.createGroup(e),n=a.length,o=t+n;let r="";if(e.each(t=>{if(t.visible)if(Gr.isShape(t)){const e=t.path;if(null==e?void 0:e.value){const[a,n]=this.createPath(t,e),s=[];if(parseFloat(e.strokeWidth)>0&&(e.strokeDasharray||e.strokeDashoffset)){const o=this._animateData.get(t.name);if(!o||o.animate.every(e=>e.attributeName.startsWith("stroke-dash"))){const[r,l,c,d]=e.extractStrokeDash(null==o?void 0:o.animate,i);if(l){if(o)if(this._animateData.delete(t.name),r)o.animate=r;const e=Hs(t,"stroke"),h={name:e};if(""!==c)a.pathData=c;if(""!==d)h["clip-path"]=[{pathData:d}];const f=l.length;for(let t=0;t<f;++t){const n=0===t?a:Object.assign({},a),r=l[t];if(n.name=e+"_"+t,o)this._animateData.set(n.name,{element:o.element,animate:o.animate.filter(e=>void 0===e.id||e.id===t)});n.trimPathStart=Yr(r.start,i),n.trimPathEnd=Yr(r.end,i),s.push(n)}n.unshift(h)}}}if(0===s.length)s.push(a);if(n.length>0){n[n.length-1].path=s,r+=V("group",yo,n,o+1)}else r+=V("path",bo,s,o+1)}}else if(Gr.isContainer(t)){if(t.length>0)r+=this.parseVectorData(t,o)}else if(Gr.asImage(t))if(!Gr.asPattern(e))t.extract(this.options.transformExclude.image),this._imageData.push(t)}),n>0)return a[n-1].include=r,V("group",yo,a,t+1);else return r}createGroup(e){const t=[],i=[],a={"clip-path":t},n={"clip-path":i},o=[],r={};if((Gr.asSvg(e)&&!e.documentRoot||Gr.isUse(e))&&(0!==e.x||0!==e.y))r.name=Hs(e,"main"),r.translateX=e.x.toString(),r.translateY=e.y.toString();if(this.createClipPath(e,t,e.clipRegion),t.length>0||Qr(r))Object.assign(a,r),o.push(a);if(e!==this._svgInstance){const t={},a=Hs(e,"animate"),r=Ts(e.element,e.transforms,true)[0];if((Gr.asG(e)||Gr.asUseSymbol(e))&&this.createClipPath(e,i,e.clipPath))t.name=a;if(this.queueAnimations(e,a,e=>Gr.asAnimateTransform(e)))t.name=a;if(t.name)Object.assign(n,t),o.push(n);const s=r.length;if(s>0){let t=[],i=0;while(i<s){const e=r[i++];o.push(ys(e)),t=t.concat(e)}e.transformed=t.reverse()}}return o}createPath(e,t){var i,a;const n={name:e.name},o=[],r=[],s={},l=Hs(e,"group"),c=function(e){let t=parseFloat(e.opacity),i=e.parent;while(void 0!==i){const e=parseFloat(i.opacity||"1");if(!isNaN(e)&&e<1)t*=e;i=i.parent}return t}(e),d=Gr.asUseShape(e),h=t.clipPath;if(h){const{transformExclude:e,floatPrecisionValue:i}=this.options,a=new zr(t.element);a.build({exclude:e,residualHandler:Ss,precision:i}),a.synchronize({keyTimeMode:this._synchronizeMode,precision:i}),this.createClipPath(a,r,h)}if(Gr.asUseShape(e)&&e.clipPath!==h)this.createClipPath(e,r,e.clipPath);if(this.queueAnimations(e,l,e=>Gr.isAnimateTransform(e),"",e.name))s.name=l;else if(r.length>0)s.name="";if(Gr.asUseShape(e)&&(0!==e.x||0!==e.y))s.translateX=e.x.toString(),s.translateY=e.y.toString();if(r.length>0)s["clip-path"]=r;if(Qr(s))o.push(s);null===(i=t.transformResidual)||void 0===i||i.forEach(e=>o.push(ys(e)));let f=0;while(f<ps.length){let i=ps[f++],a=t[i]||d&&e[i];if(a){switch(i){case"name":break;case"value":i="pathData";break;case"fill":if(i="fillColor","none"!==a&&!n["aapt:attr"]){const e=Resource.addColor(a);if(""!==e)a="@color/"+e}else continue;break;case"stroke":if(i="strokeColor","none"!==a){const e=Resource.addColor(a);if(""!==e)a="@color/"+e}else continue;break;case"fillPattern":{const e=this._svgInstance.findFillPattern(a);if(e)switch(t.element.tagName){case"path":if(!/[zZ]\s*$/.test(t.value))break;case"rect":case"polygon":case"polyline":case"circle":case"ellipse":{const i=ks(e,t,this.options.floatPrecisionValue);if(i)n["aapt:attr"]={name:"android:fillColor",gradient:i},n.fillColor="",this._namespaceAapt=true}}continue}case"fillRule":if("evenodd"===a)i="fillType",a="evenOdd";else continue;break;case"strokeWidth":if("0"===a)continue;break;case"fillOpacity":case"strokeOpacity":if(a=((ts(a)?parseFloat(a):1)*c).toString(),"1"===a)continue;i="fillOpacity"===i?"fillAlpha":"strokeAlpha";break;case"strokeLinecap":if("butt"===a)continue;i="strokeLineCap";break;case"strokeLinejoin":if("miter"===a)continue;i="strokeLineJoin";break;case"strokeMiterlimit":if("4"===a)continue;i="strokeMiterLimit";break;default:continue}n[i]=a}}if(!n.strokeWidth)n.strokeColor="";else if(!n.strokeColor)n.strokeWidth="";const u=new Map,p=[],g=[],m=t.value,b=e.animations;let y=m,S=0,T=b.length;f=0;while(f<T){const e=b[f++];if(Gr.asAnimateTransform(e)&&!e.additiveSum&&e.transformFrom){let t=Math.max(0,e.delay-1);if(u.set(t,{index:S,time:t,to:e.transformFrom,reset:false,animate:e}),-1!==e.iterationCount&&e.fillReplace)if(t=e.delay+e.iterationCount*e.duration,!u.has(t))u.set(t,{index:S,time:t,to:m,reset:true});++S}}const w=Array.from(u.values()).sort((e,t)=>e.time<t.time?-1:1);for(T=w.length,f=0;f<T;++f){const e=w[f];if(!e.reset||e.to!==y){let t=true;if(e.reset)e:{let i=0;while(i<f){const a=w[i++];if(!a.reset){let i=f+1;while(i<T)switch(w[i++].index){case a.index:t=false;case e.index:break e}}}}else{const t=[],i=new Set;let n=0;while(n<f){const e=w[n++];t[e.index]=t[e.index]?2:1}for(n=0;n<t.length;++n)if(1===t[n]){const e=null===(a=w.find(e=>e.index===n&&"animate"in e))||void 0===a?void 0:a.animate;if(e)i.add(e.type)}for(const t of i){const i=As(t);if(i){const a=cs.typeAsValue(t).split(" ");n=0;while(n<a.length)p.push(Es(i[n],e.time,a[n++],""))}}}if(t)g.push(Es("d",e.time,e.to)),y=e.to}}if(!this.queueAnimations(e,n.name,e=>(Gr.asAnimate(e)||Gr.asSet(e))&&"clip-path"!==e.attributeName,m)&&0===g.length&&s.name!==l)n.name="";const v=this._animateData;if(p.length>0){const e=v.get(l);if(e)e.animate=e.animate.concat(p)}if(g.length>0){const t=v.get(n.name);if(t)t.animate=t.animate.concat(g);else v.set(n.name,{element:e.element,animate:g,pathData:m})}return[n,o]}createClipPath(e,t,i){let a=false;if(i){const n=this._svgInstance.definitions,o=this._synchronizeMode,{transformExclude:r,floatPrecisionValue:s}=this.options;i.split(";").forEach((i,l,c)=>{if("#"===i.charAt(0)){const e=n.clipPath.get(i);if(e){const i=new Xr(e);i.build({exclude:r,residualHandler:Ss,precision:s}),i.synchronize({keyTimeMode:o,precision:s}),i.each(e=>{const i=e.path;if(i){const n=i.value;if(n){let i=Hs(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,i,e=>Gr.asAnimate(e)||Gr.asSet(e),n))i="";t.push({name:i,pathData:n,fillType:"evenodd"===ds(e.element,"fill-rule",true)?"evenOdd":""}),a=true}}})}}else{let n=Hs(e,"clip_path",c.length>1?l+1:-1);if(!this.queueAnimations(e,n,e=>"clip-path"===e.attributeName&&(Gr.asAnimate(e)||Gr.asSet(e)),i))n="";t.push({name:n,pathData:i,fillType:"evenodd"===ds(e.element,"fill-rule",true)?"evenOdd":""}),a=true}})}return a}queueAnimations(e,t,i,a="",n){if(e.animations.length>0){const o=e.animations.filter((e,t,a)=>!e.paused&&(e.duration>=0||e.setterType)&&i(e,t,a));if(o.length>0){const i=e.element;if(this._animateData.set(t,{element:i,animate:o,pathData:a}),n)this._animateTarget.set(n,{element:i,animate:o,pathData:a});return true}}return false}}const zs={builtInExtensions:["android.delegate.background","android.delegate.negative-x","android.delegate.positive-x","android.delegate.max-width-height","android.delegate.percent","android.delegate.scrollbar","android.delegate.radiogroup","squared.accessibility","squared.relative","squared.css-grid","squared.flexbox","squared.table","squared.column","squared.list","squared.verticalalign","squared.grid","squared.sprite","squared.whitespace","android.resource.svg","android.resource.background","android.resource.strings","android.resource.fonts","android.resource.dimens","android.resource.styles","android.resource.data","android.resource.includes"],targetAPI:29,resolutionDPI:160,resolutionScreenWidth:1280,resolutionScreenHeight:900,framesPerSecond:60,supportRTL:true,preloadImages:true,compressImages:false,convertImages:"",supportNegativeLeftTop:true,customizationsOverwritePrivilege:true,showAttributes:true,createElementMap:false,createQuerySelectorMap:false,convertPixels:"dp",insertSpaces:4,autoCloseOnWrite:true,showErrorMessages:true,manifestLabelAppName:"android",manifestThemeName:"AppTheme",manifestParentThemeName:"Theme.AppCompat.Light.NoActionBar",outputMainFileName:"activity_main.xml",outputDirectory:"app/src/main",outputEmptyCopyDirectory:false,outputArchiveName:"android-xml",outputArchiveFormat:"zip"};let Fs,Us,qs=false;function Ys(e,t,i){return Object.assign(Object.assign({},e),{directory:t,filename:i})}const js=e=>qs&&(e.closed||function(){if(qs&&!Fs.initializing&&!Fs.closed&&Fs.userSettings.autoCloseOnWrite)return Fs.finalize(),true;else return false}()),$s={base:{Controller:Controller,File:File,Resource:Resource,View:View},extensions:{Accessibility:Accessibility,Column:Column,CssGrid:CssGrid,External:External,Flexbox:Flexbox,Grid:Grid,List:List,Relative:Relative,Sprite:Sprite,Substitute:Substitute,Table:Table,VerticalAlign:VerticalAlign,WhiteSpace:WhiteSpace,constraint:{Guideline:Guideline},delegate:{Background:Background,MaxWidthHeight:MaxWidthHeight,NegativeX:NegativeX,Percent:Percent,PositiveX:PositiveX,RadioGroup:RadioGroup,ScrollBar:ScrollBar},resource:{Background:ResourceBackground,Data:ResourceData,Dimens:ResourceDimens,Fonts:ResourceFonts,Includes:ResourceIncludes,Strings:ResourceStrings,Styles:ResourceStyles,Svg:ResourceSvg}},lib:{constant:p,customization:W,enumeration:i,util:ie},system:{customize(e,t,i){if(P[e]){const a=P[e].assign;if(a[t])Object.assign(a[t],i);else a[t]=i;return a[t]}},addXmlNs(e,t){d[e]=t},copyLayoutAllXml(e,t){if(js(Fs))Us.layoutAllToXml(Fs.layouts,Ys(t,e))},copyResourceAllXml(e,t){if(js(Fs))Us.resourceAllToXml(Ys(t,e))},copyResourceStringXml(e,t){if(js(Fs))Us.resourceStringToXml(Ys(t,e))},copyResourceArrayXml(e,t){if(js(Fs))Us.resourceStringArrayToXml(Ys(t,e))},copyResourceFontXml(e,t){if(js(Fs))Us.resourceFontToXml(Ys(t,e))},copyResourceColorXml(e,t){if(js(Fs))Us.resourceColorToXml(Ys(t,e))},copyResourceStyleXml(e,t){if(js(Fs))Us.resourceStyleToXml(Ys(t,e))},copyResourceDimenXml(e,t){if(js(Fs))Us.resourceDimenToXml(Ys(t,e))},copyResourceDrawableXml(e,t){if(js(Fs))Us.resourceDrawableToXml(Ys(t,e))},copyResourceAnimXml(e,t){if(js(Fs))Us.resourceAnimToXml(Ys(t,e))},copyResourceDrawableImage(e,t){if(js(Fs))Us.resourceDrawableImageToString(Ys(t,e))},copyResourceRawVideo(e,t){if(js(Fs))Us.resourceRawVideoToString(Ys(t,e))},copyResourceRawAudio(e,t){if(js(Fs))Us.resourceRawAudioToString(Ys(t,e))},saveLayoutAllXml(e,t){if(js(Fs))Us.layoutAllToXml(Fs.layouts,Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-layouts"))},saveResourceAllXml(e,t){if(js(Fs))Us.resourceAllToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-resources"))},saveResourceStringXml(e,t){if(js(Fs))Us.resourceStringToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-string"))},saveResourceArrayXml(e,t){if(js(Fs))Us.resourceStringArrayToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-array"))},saveResourceFontXml(e,t){if(js(Fs))Us.resourceFontToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-font"))},saveResourceColorXml(e,t){if(js(Fs))Us.resourceColorToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-color"))},saveResourceStyleXml(e,t){if(js(Fs))Us.resourceStyleToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-style"))},saveResourceDimenXml(e,t){if(js(Fs))Us.resourceDimenToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-dimen"))},saveResourceDrawableXml(e,t){if(js(Fs))Us.resourceDrawableToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-drawable"))},saveResourceAnimXml(e,t){if(js(Fs))Us.resourceAnimToXml(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-anim"))},saveResourceDrawableImage(e,t){if(js(Fs))Us.resourceDrawableImageToString(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-drawable-image"))},saveResourceRawVideo(e,t){if(js(Fs))Us.resourceRawVideoToString(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-raw-video"))},saveResourceRawAudio(e,t){if(js(Fs))Us.resourceRawAudioToString(Ys(t,void 0,e||Fs.userSettings.outputArchiveName+"-raw-audio"))},writeLayoutAllXml:e=>js(Fs)?Us.layoutAllToXml(Fs.layouts,e):{},writeResourceAllXml:e=>js(Fs)?Us.resourceAllToXml(e):{},writeResourceStringXml:e=>js(Fs)?Us.resourceStringToXml(e):[],writeResourceArrayXml:e=>js(Fs)?Us.resourceStringArrayToXml(e):[],writeResourceFontXml:e=>js(Fs)?Us.resourceFontToXml(e):[],writeResourceColorXml:e=>js(Fs)?Us.resourceColorToXml(e):[],writeResourceStyleXml:e=>js(Fs)?Us.resourceStyleToXml(e):[],writeResourceDimenXml:e=>js(Fs)?Us.resourceDimenToXml(e):[],writeResourceDrawableXml:e=>js(Fs)?Us.resourceDrawableToXml(e):[],writeResourceAnimXml:e=>js(Fs)?Us.resourceAnimToXml(e):[],writeResourceDrawableImage:e=>js(Fs)?Us.resourceDrawableImageToString(e):[],writeResourceRawVideo:e=>js(Fs)?Us.resourceRawVideoToString(e):[],writeResourceRawAudio:e=>js(Fs)?Us.resourceRawAudioToString(e):[]},create(){const e=squared.base.lib.constant.EXT_NAME,t=a;return Fs=new Application(2,View,Controller,Resource,squared.base.ExtensionManager),Us=new File,Fs.resourceHandler.fileHandler=Us,Object.assign(Fs.builtInExtensions,{[e.TABLE]:new Table(e.TABLE,2,void 0,["TABLE"]),[e.LIST]:new List(e.LIST,2,void 0,["DIV","UL","OL","DL"]),[e.GRID]:new Grid(e.GRID,2,void 0,["DIV","FORM","UL","OL","DL","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET"]),[e.CSS_GRID]:new CssGrid(e.CSS_GRID,2),[e.FLEXBOX]:new Flexbox(e.FLEXBOX,2),[e.COLUMN]:new Column(e.COLUMN,2),[e.SPRITE]:new Sprite(e.SPRITE,2),[e.ACCESSIBILITY]:new Accessibility(e.ACCESSIBILITY,2),[e.RELATIVE]:new Relative(e.RELATIVE,2),[e.VERTICAL_ALIGN]:new VerticalAlign(e.VERTICAL_ALIGN,2),[e.WHITESPACE]:new WhiteSpace(e.WHITESPACE,2),[t.EXTERNAL]:new External(t.EXTERNAL,2),[t.SUBSTITUTE]:new Substitute(t.SUBSTITUTE,2),[t.DELEGATE_BACKGROUND]:new Background(t.DELEGATE_BACKGROUND,2),[t.DELEGATE_MAXWIDTHHEIGHT]:new MaxWidthHeight(t.DELEGATE_MAXWIDTHHEIGHT,2),[t.DELEGATE_NEGATIVEX]:new NegativeX(t.DELEGATE_NEGATIVEX,2),[t.DELEGATE_PERCENT]:new Percent(t.DELEGATE_PERCENT,2),[t.DELEGATE_POSITIVEX]:new PositiveX(t.DELEGATE_POSITIVEX,2),[t.DELEGATE_RADIOGROUP]:new RadioGroup(t.DELEGATE_RADIOGROUP,2),[t.DELEGATE_SCROLLBAR]:new ScrollBar(t.DELEGATE_SCROLLBAR,2),[t.RESOURCE_BACKGROUND]:new ResourceBackground(t.RESOURCE_BACKGROUND,2),[t.RESOURCE_DATA]:new ResourceData(t.RESOURCE_DATA,2),[t.RESOURCE_DIMENS]:new ResourceDimens(t.RESOURCE_DIMENS,2),[t.RESOURCE_FONTS]:new ResourceFonts(t.RESOURCE_FONTS,2),[t.RESOURCE_INCLUDES]:new ResourceIncludes(t.RESOURCE_INCLUDES,2),[t.RESOURCE_STRINGS]:new ResourceStrings(t.RESOURCE_STRINGS,2),[t.RESOURCE_STYLES]:new ResourceStyles(t.RESOURCE_STYLES,2),[t.RESOURCE_SVG]:new ResourceSvg(t.RESOURCE_SVG,2),[t.CONSTRAINT_GUIDELINE]:new Guideline(t.CONSTRAINT_GUIDELINE,2)}),qs=true,{application:Fs,framework:2,userSettings:Object.assign({},zs)}},cached(){if(qs)return{application:Fs,framework:2,userSettings:Fs.userSettings};else return $s.create()}};return $s}();
